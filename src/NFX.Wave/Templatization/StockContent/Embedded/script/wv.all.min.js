'use strict';var WAVE=function(){function p(a,b,d,h,u,w,l,c){l=f.strDefault(l);c=f.strDefault(c);var g=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");g.open(a,b);WAVE.isFunction(w)&&(g.onerror=w);g.onreadystatechange=function(){4===g.readyState&&(200===g.status?WAVE.isFunction(h)&&h(g.responseText):WAVE.isFunction(u)&&u(g.responseText))};f.strEmpty(l)||g.setRequestHeader("Accept",l);f.strEmpty(c)||g.setRequestHeader("Content-Type",c);null!==d?(f.isObject(d)&&!f.strEmpty(c)&&
-1!==c.indexOf("application/json")&&(d=JSON.stringify(d)),g.send(d)):g.send();return g}function m(a,b){"@!WAVE EVENT FUN LIST"in a||(a["@!WAVE EVENT FUN LIST"]={});var d=a["@!WAVE EVENT FUN LIST"];b in d||(d[b]=[]);return d[b]}function y(a){"@!WAVE EVENT SINK LIST"in a||(a["@!WAVE EVENT SINK LIST"]=[]);return a["@!WAVE EVENT SINK LIST"]}function B(){var a=f.id(g.DIV_SUMMARY);if(a){var b;b='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var d=0,h=0,
u;for(u in v){var w=f.id(v[u]);w&&(b+=f.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<w.STAT_FAILED_TESTS?"class="+g.CSS_CLASS_TABLEERROR:"",Area:w.STAT_NAME,Total:w.STAT_TOTAL_TESTS,Passed:w.STAT_TOTAL_TESTS-w.STAT_FAILED_TESTS,Failed:w.STAT_FAILED_TESTS}),d+=w.STAT_TOTAL_TESTS,h+=w.STAT_FAILED_TESTS)}b+=f.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:g.CSS_CLASS_TABLETOTAL,
Total:d,Passed:d-h,Failed:h});a.innerHTML=b+"</table>"}}Date.now||(Date.now=function(){return(new Date).getTime()});var f={TUNDEFINED:"undefined",CONTENT_TYPE_JSON:"application/json",CONTENT_TYPE_JSON_UTF8:"application/json;charset=utf-8",CONTENT_TYPE_MULTIPART:"multipart/form-data",falseness:function(){return!1},falsefunc:function(){return!1},arrayDelete:function(a,b){for(var d in a)if(a[d]===b)return a.splice(d,1),!0;return!1},arrayShallowCopy:function(a){var b=[];if(a&&0<a.length)for(var d=0,h=
a.length;d<h;d++)b.push(a[d]);return b},arrayClear:function(a){for(;0<a.length;)a.pop()},mergeArrays:function(a,b,d,h){if(!f.isArray(a)&&!f.isArray(b))return[];d=f.isFunction(d)?d:function(a,b){return a===b};h=f.isFunction(h)?h:function(a){return a};f.isArray(a)||(a=b);f.isArray(b)||(b=a);a=a.concat(b);for(b=0;b<a.length;b++){for(var u=b+1;u<a.length;u++)d(a[b],a[u])&&a.splice(u--,1);a[b]=h(a[b])}return a}};f.inArray=Array.prototype.indexOf?function(a,b){return-1!==a.indexOf(b)}:function(a,b){for(var d=
a.length;d--;)if(a[d]===b)return!0;return!1};f.isString=function(a){return"undefined"===typeof a?!1:"[object String]"===Object.prototype.toString.call(a)};f.isObject=function(a){return"undefined"===typeof a?!1:a===Object(a)&&!f.isArray(a)&&!f.isFunction(a)};f.isArray=function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};f.isFunction=function(a){return"function"===typeof a};f.isMapOrArray=function(a){return a===Object(a)&&!f.isFunction(a)};f.exists=function(a){return"undefined"!==
typeof a&&null!==a};f.overrideFunction=function(a,b){return function(){this.baseFunction=a;return b.apply(this,arguments)}};f.extend=function(a,b,d){var h;if(d)for(h in b)b.hasOwnProperty(h)&&!a.hasOwnProperty(h)&&(a[h]=b[h]);else for(h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);return a};f.clone=function(a){return JSON.parse(JSON.stringify(a))};f.memberClone=function(a,b){var d;if(!f.isObject(a)){if(!f.isArray(a))return a;d=[];for(var h=a.length,u=0;u<h;u++)d.push(f.memberClone(a[u],b));return d}d={};
for(h in a)d[b?h.toLowerCase():h]=f.memberClone(a[h],b);return d};f.isSame=function(a,b){if(2>arguments.length)return!1;if(null===a&&null===b)return!0;if(null===a||null===b||typeof a!==typeof b)return!1;if("function"===typeof a.getTime)return a.getTime()===b.getTime();if(f.isMapOrArray(a)){if(a.length!==b.length||Object.keys(a).length!==Object.keys(b).length)return!1;for(var d in a)if(!f.isSame(a[d],b[d]))return!1;return!0}return a===b};f.propStrAsObject=function(a,b){if(null!==a&&!f.strEmpty(b)&&
a.hasOwnProperty(b)){var d=a[b];if(null!==d&&"string"===typeof d)try{a[b]=JSON.parse(d)}catch(h){throw console.error("WV.propStrAsObject, error parsing property '"+b+"' string as JSON: "+d),h;}}};f.tryParseJSON=function(a,b){if("undefined"!==typeof a&&null!==a){if(f.isMapOrArray(a))return{ok:!0,obj:a};try{return{ok:!0,obj:JSON.parse(a)}}catch(d){}}return{ok:!1,obj:"undefined"!==typeof b?b:{}}};f.checkKeysUnique=function(a){if(!f.isObject(a))return a;a=Object.keys(a);for(var b=0;b<a.length;++b)for(var d=
b+1;d<a.length;++d)if(a[b].toLowerCase()===a[d].toLowerCase())return!0;return!1};f.empty=function(a){if("undefined"===typeof a||null===a)return!0;for(var b in a)return!1;return!0};f.has=function(a,b){return a?hasOwnProperty.call(a,b):!1};f.get=function(a,b,d){return"undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&f.has(a,b)&&"undefined"!==typeof a[b]?a[b]:"undefined"===typeof d?null:d};f.tryParseInt=function(a,b){var d;d="undefined"===typeof a||null===a||0===a.length?NaN:Number(a);
var h;b?(h=!isNaN(d)&&isFinite(d))&&(d=0>d?-Math.floor(-d):Math.floor(d)):h=f.isFunction(Number.isInteger)?Number.isInteger(d):!isNaN(d)&&isFinite(d)&&Math.floor(d)===d;return{ok:h,value:d}};f.intValid=function(a){return f.tryParseInt(a).ok};f.intValidPositive=function(a){a=f.tryParseInt(a);return a.ok&&0<a.value};f.intValidPositiveOrZero=function(a){a=f.tryParseInt(a);return a.ok&&0<=a.value};f.formatMoney=function(a,b,d){f.tryParseInt(a,!0).ok||(a=0);b="undefined"===typeof b?".":b;d="undefined"===
typeof d?",":d;var h=100*a,u=Math.round(h);a=1E-7>Math.abs(h-u)?u:0>a?-Math.floor(-h):Math.floor(h);a=(a/100).toFixed(2);"."!==b&&(a=a.replace(".",b));return a.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+d)};f.each=function(a,b){if("undefined"===typeof a||null===a)return null;if(!f.isFunction(b))return a;for(var d in a)b(a[d],d,a);return a};f.isScalar=function(a){return/boolean|number|string/.test(typeof a)};f.isObjectType=function(a){return f.strOneOf(a,["object","json","map","array"])};f.isIntType=
function(a){return f.strOneOf(a,["int","integer"])};f.isRealType=function(a){return f.strOneOf(a,["float","real","double","money"])};f.isBoolType=function(a){return f.strOneOf(a,["bool","boolean","logical"])};f.isStringType=function(a){return f.strOneOf(a,"str string char[] char varchar text".split(" "))};f.isDateType=function(a){return f.strOneOf(a,["date","datetime","time","timestamp"])};f.isSimpleKeyStringMap=function(a){if(!f.exists(a)||!f.isObject(a))return!1;var b=Object.keys(a),d;for(d in b){var h=
a[b[d]];if("undefined"===typeof h||null!==h&&!f.isString(h))return!1}return!0};f.convertScalarType=function(a,b,d,h){function u(){if("undefined"!==typeof h&&null!==h)return h;null===b&&(b="<null>");throw"Can not convert '"+b+"' to type '"+d+"'";}if(f.strEmpty(d))return b;var c;if(f.isObjectType(d)){if(null===b)return a?null:{};if(f.isObject(b))return b;c=typeof b;if("boolean"===c)return b?{value:!0}:{value:!1};if(f.isFunction(b.getTime)||"number"===c)return{value:b};if("string"===c)try{return JSON.parse(b)}catch(l){return{value:b}}}else if(f.isIntType(d)){if(null===
b)return a?null:0;c=typeof b;if("boolean"===c)return b?1:0;if(f.isFunction(b.getTime))return b.getTime();if("number"===c||"object"===c)c="string",b=b.toString();if("string"===c){if(f.strEmpty(b))return a?null:0;a=f.tryParseInt(b,!0);if(a.ok)return a.value}}else{if(f.isStringType(d)){if(null===b)return a?null:"";c=typeof b;return"string"===c?b:"boolean"===c?b?"true":"false":f.isFunction(b.getTime)?f.toUSDateTimeString(b):b.toString()}if(f.isRealType(d)){if(null===b)return a?null:0;c=typeof b;if("boolean"===
c)return b?1:0;if(f.isFunction(b.getTime))return b.getTime();if("number"===c||"object"===c)c="string",b=b.toString();if("string"===c){if(f.strEmpty(b))return a?null:0;a=parseFloat(b);if(!isNaN(a))return a}}else{if(f.isBoolType(d))return b?!0:!1;if(f.isDateType(d)){if(null===b)return a?null:u();if("number"===typeof b)return new Date(Math.round(b));if(f.strEmpty(b)&&a)return null;a=Date.parse(b);if(!isNaN(a))return new Date(a)}}}return u()};f.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};
f.strAsBool=function(a,b){if("undefined"===typeof a||null===a)return"undefined"===typeof b?!1:b;a=a.toString();return f.strOneOf(a,["true","t","yes","1"])};f.strDefault=function(a,b){return"undefined"===typeof a||null===a?"undefined"===typeof b||null===b?"":b:a.toString()};f.strEmptyDefault=function(a,b){return f.strEmpty(a)?"undefined"===typeof b||null===b?"":b:a.toString()};f.nlsNameDefault=function(a,b){return f.strEmptyDefault("undefined"===typeof a||null===a?null:a.n,b)};f.nlsDescrDefault=function(a,
b){return f.strEmptyDefault("undefined"===typeof a||null===a?null:a.d,b)};f.nlsNameOrDescrDefault=function(a,b){var d=null;"undefined"!==typeof a&&null!==a&&(d=a.n,f.strEmpty(d)&&(d=a.d));return f.strEmptyDefault(d,b)};f.nlsDescrOrNameDefault=function(a,b){var d=null;"undefined"!==typeof a&&null!==a&&(d=a.d,f.strEmpty(d)&&(d=a.n));return f.strEmptyDefault(d,b)};f.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};f.strLTrim=function(a){return a.replace(/^\s+/,"")};f.strRTrim=function(a){return a.replace(/\s+$/,
"")};f.strTrunc=function(a,b,d){if(!a||a.length<=b)return a;d=d||"...";return a.substr(0,b-d.length)+d};f.strCaps=function(a,b){if(f.strEmpty(a))return a;for(var d,h="",u=!1,c=0;c<a.length;c++)d=a[c]," "===d||"."===d?(u=!0,h+=d):(h=u||0===c?h+d.toUpperCase():h+(b?d.toLowerCase():d),u=!1);return h};f.joinPathSegs=function(){if(0===arguments.length)return"";for(var a="",b=!0,d=0;d<arguments.length;d++){var h=arguments[d];h&&(h=(b?WAVE.strLTrim(h):h.replace(/^[\/\\\s]+/,"")).replace(/[\/\\\s]+$/,""),
WAVE.strEmpty(h)||(b||(a+="/"),a+=h,b=!1))}return a};f.mapCurrencyISOToSymbol=function(a,b){a=f.strDefault(a,"");a=a.toUpperCase();switch(a){case "CAD":case "USD":case "MXN":return"$";case "RUB":return"\u20bd";case "EUR":return"\u20ac";case "GBP":return"\u00a3";default:return f.strDefault(b,"?")}};var z="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");f.siNum=function(a,b){"undefined"===typeof b&&(b=2);if(0===a)return a.toFixed(b);var d=a;0>a&&(d=-d);for(var h=0,u=d.toFixed(b)+z[h+8];1E3<=d;)d/=
1E3,h++;for(;1>d;)d*=1E3,h--;u=Math.pow(10,b);for(d=Math.round(d*u)/u;1E3<=d;)d/=1E3,h++;for(;1>d;)d*=1E3,h--;0>a&&(d=-d);return u=d.toFixed(b)+z[h+8]};f.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};f.strStartsWith=function(a,b,d){return d?a.slice(0,b.length)===b:a.slice(0,b.length).toLowerCase()===b.toLowerCase()};f.strEndsWith=function(a,b,d){return d?a.slice(-b.length)===b:a.slice(-b.length).toLowerCase()===b.toLowerCase()};f.strEnsureEnding=
function(a,b){return a+(a.slice(-b.length)===b?"":b)};f.strContains=function(a,b,d){return d?-1<a.indexOf(b):-1<a.toLowerCase().indexOf(b.toLowerCase())};f.strSame=function(a,b){if("undefined"===typeof a||"undefined"===typeof b||null===a||null===b)return!1;WAVE.isString(a)||(a=a.toString());WAVE.isString(b)||(b=b.toString());return f.strTrim(a).toLowerCase()===f.strTrim(b).toLowerCase()};f.strOneOf=function(a,b,d){if(null===a||null===b||!f.isArray(b))return!1;d||(d="|");a=d+f.strTrim(a).toLowerCase()+
d;return 0<=(d+b.join(d)+d).toLowerCase().indexOf(a)};var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};f.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return c[a]})};f.strHTMLTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,h){return f.strEscapeHTML(b[h])})};f.strTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,h){return b[h]})};f.strHTMLTemplateFun=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,
function(a,h){return f.strEscapeHTML(b(a,h))})};f.strTemplateFun=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,b)};f.strIsEMail=function(a){if(f.strEmpty(a))return!1;var b=a.indexOf("@");if(1>b||b===a.length-1||0<=a.indexOf("@",b+1))return!1;var d=a.lastIndexOf(".");if(!(d>b+2&&d+2<=a.length))return!1;for(d=0;d<a.length;d++)if(b=a[d],"."!==b&&"@"!==b&&"-"!==b&&"_"!==b&&!f.isValidScreenNameLetterOrDigit(b))return!1;return!0};f.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=
a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
f.isValidScreenNameLetterOrDigit=function(a){return f.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};f.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};f.strIsScreenName=function(a){if(f.strEmpty(a))return!1;a=f.strTrim(a);if(0===a.length)return!1;for(var b=!1,d,h=0;h<a.length;h++)if(d=a[h],0===h){if(!f.isValidScreenNameLetter(d))return!1}else if(f.isValidScreenNameSeparator(d)){if(b)return!1;b=!0}else{if(!f.isValidScreenNameLetterOrDigit(d))return!1;b=!1}return!b};f.strNormalizeUSPhone=
function(a){if(f.strEmpty(a))return"";a=f.strTrim(a);if(0===a.length)return"";if(f.strStartsWith(a,"+",!0))return a;for(var b=!1,d=!1,h="",u="",c="",l,g=0;g<a.length;g++)if(l=a[g],b||"("!==l||0!==h.length)if(b&&")"===l)b=!1;else{b&&3===h.length&&(b=!1);if(0<u.length&&!d){if("x"===l||"X"===l||"."===l&&6<u.length){d=!0;continue}var e=a.substring(g).toUpperCase();if(f.strStartsWith(e,"EXT",!1)&&7<=u.length){d=!0;g+=2;continue}if(f.strStartsWith(e,"EXT.",!1)&&7<=u.length){d=!0;g+=3;continue}}f.charIsAZLetterOrDigit(l)&&
(b?h+=l:d?c+=l:u+=l)}else b=!0;for(;7>u.length;)u+="?";0===h.length&&(10<=u.length?(h=u.substring(0,3),u=u.substring(3)):h="???");7<u.length&&0===c.length&&(c=u.substring(7),u=u.substring(0,7));u=u.substring(0,3)+"-"+u.substring(3);0<c.length&&(c="x"+c);return"("+h+") "+u+c};f.DATE_TIME_FORMATS={LONG_DATE:"LongDate",SHORT_DATE:"ShortDate",LONG_DATE_TIME:"LongDateTime",SHORT_DATE_TIME:"ShortDateTime",TRAN_DATE_TIME:"TranDateTime",SHORT_DAY_MONTH:"ShortDayMonth",SHORT_TIME:"ShortTime",HOURS:"Hours"};
var k="January February March April May June July August September October November December".split(" ");f.dateTimeToString=function(a,b,d){function h(a){return("0"+a.toString()).slice(-2)}function u(a){return f.strLocalize(d,"date","",k[a])}function c(){return h(e.getMonth()+1)}function l(){return h(e.getDate())}function g(){return h(e.getHours())}if("undefined"===typeof a||null===a)return"";b=WAVE.strDefault(b,f.DATE_TIME_FORMATS.LONG_DATE);var e=WAVE.isString(a)?new Date(a):a;switch(b){case f.DATE_TIME_FORMATS.LONG_DATE:return u(e.getMonth())+
" "+l()+", "+e.getFullYear();case f.DATE_TIME_FORMATS.SHORT_DATE:return c()+"/"+l()+"/"+e.getFullYear();case f.DATE_TIME_FORMATS.LONG_DATE_TIME:return u(e.getMonth())+" "+l()+", "+e.getFullYear()+" "+g()+":"+h(e.getMinutes())+":"+h(e.getSeconds());case f.DATE_TIME_FORMATS.SHORT_DATE_TIME:return c()+"/"+l()+"/"+e.getFullYear()+" "+g()+":"+h(e.getMinutes());case f.DATE_TIME_FORMATS.TRAN_DATE_TIME:return c()+"/"+l()+"/"+e.getFullYear()+" "+g()+":"+h(e.getMinutes())+":"+h(e.getSeconds());case f.DATE_TIME_FORMATS.SHORT_DAY_MONTH:return c()+
"/"+l();case f.DATE_TIME_FORMATS.SHORT_TIME:return g()+":"+h(e.getMinutes());case f.DATE_TIME_FORMATS.HOURS:return g()}};f.toISODateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"};f.toUSDateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())+" "+b(a.getHours())+":"+b(a.getMinutes())+
":"+b(a.getSeconds())};f.toUSDateString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())};f.toSeconds=function(a){var b=0,d=a.match(/(\d+)\s*d/),h=a.match(/(\d+)\s*h/),c=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);d&&(b+=86400*parseInt(d[1]));h&&(b+=3600*parseInt(h[1]));c&&(b+=60*parseInt(c[1]));a&&(b+=parseInt(a[1]));return b};f.content=function(a){return f.strStartsWith(a,"###WV")?f.markup(a.slice(5)):f.strStartsWith(a,"###HTML")?a.slice(7):
f.strEscapeHTML(a)};f.markup=function(){function a(a){return"_"===a||"A"<=a&&"Z">=a||"a"<=a&&"z">=a}function b(a){a=a.substr(1).split(".");var b={},d;for(d in a)b[a[d]]=0;a=[];for(var c in b)a.push("wv-markup-"+c.toLowerCase());return a.join(" ")}var d={" ":"&nbsp;","!":"&#33;","#":"&#35;",$:"&#36;","*":"&#42;","<":"&lt;","=":"&#61;",">":"&gt;","{":"&#123;","}":"&#125;"};return function(h){function c(a){for(var b;t>a&&"undefined"!==typeof(b=v.pop());)l+="</li></"+b+">",t--;0!==t&&(l+="</li><li>")}
function g(a){l+="</dd>";a||(l+="</dl>")}for(var l="",e=0,f=[],n=[],t=0,q,k,v=[],E,I=0,r=h.length;I<r;I++){var C=h.charAt(I),H=h.charAt(I+1);switch(C){case "\r":"\n"===H&&(I++,H=h.charAt(I+1));case "\n":C="\n";break;case "<":C="&lt;";break;case ">":C="&gt;";break;case "&":if(";"!==h.charAt(I+2))break;var m=d[H];"undefined"!==typeof m&&(C=m);I+=2}switch(e){case 0:case 2:case 11:case 16:switch(C){case "\n":2===e?l+="</p>":(11===e&&c(0),16===e&&g(!1));e=0;break;case "{":2===e?l+=" ":(11===e&&c(0),16===
e&&g(!1),l+="<p>");f.push(1);e=3;n.push(l);l=C;break;case "!":2===e?(e=1,l+=" "+C):(11===e&&c(0),16===e&&g(!1),e=7,n.push(l),l=C);break;case "#":case "*":2===e?(e=1,l+=" "+C):(16===e&&g(!1),q=C,e=9,n.push(l),l=C);break;case "$":2===e?(e=1,l+=" "+C):(16===e&&g(!0),E=16===e,e=12,n.push(l),l=C);break;default:2===e?l+=" ":(11===e&&c(0),16===e&&g(!1),l+="<p>"),e=1,l+=C}break;case 1:switch(C){case "\n":e=2;break;case "{":f.push(e);e=3;n.push(l);l=C;break;default:l+=C}break;case 3:switch(C){case "\n":l+=
" ";break;case "{":f.push(e);e=3;n.push(l);l=C;break;case "}":e=4;l=l.substr(1);break;default:l+=C}break;case 4:switch(C){case ".":if(a(H)){e=5;n.push(l);l=C;break}default:e=f.pop(),l=n.pop()+l,I--}break;case 5:l+=C;"."===H?e=6:"_"===H||"-"===H||"A"<=H&&"Z">=H||"a"<=H&&"z">=H||"0"<=H&&"9">=H||(e=f.pop(),l='<span class="'+b(l)+'">'+n.pop()+"</span>",l=n.pop()+l);break;case 6:switch(C){case ".":if(a(H)){e=5;l+=C;break}default:e=f.pop(),l='<span class="'+b(l)+'">'+n.pop()+"</span>.",l=n.pop()+l}break;
case 7:if("\n"===C){l=n.pop()+"<p>"+l;e=1;I--;break}if("!"===C&&6>l.length)l+=C;else switch(t=l.length,l=n.pop()+"<h"+t+">",e=8,C){case "{":f.push(e);e=3;n.push(l);l=C;break;default:l+=C}break;case 8:switch(C){case "\n":e=0;l+="</h"+t+">";t=0;break;case "{":f.push(e);e=3;n.push(l);l="{";break;default:l+=C}break;case 9:if("\n"===C){l=n.pop()+"<p>"+l;e=1;I--;break}if(C===q)l+=C;else{e=10;H=l.length;l=n.pop();t===H&&q!==k&&c(0);if(t===H)l+="</li><li>";else if(t<H)for(;t<H;t++)switch(q){case "#":l+="<ol><li>";
v.push("ol");break;case "*":l+="<ul><li>",v.push("ul")}else c(H);switch(C){case "{":f.push(e);e=3;n.push(l);l=C;break;default:l+=C}break}break;case 10:switch(C){case "\n":k=q;e=11;break;case "{":f.push(e);e=3;n.push(l);l="{";break;default:l+=C}break;case 12:if("\n"===C||"="===C){l=n.pop()+(E?"</dl>":"")+"<p>"+l;e=1;I--;break}e=13;switch(C){case "{":f.push(e);e=3;n.push(l);l=C;break;default:l+=C}break;case 13:if("\n"===C){l=n.pop()+(E?"</dl>":"")+"<p>"+l;e=1;I--;break}switch(C){case "{":f.push(e);
e=3;n.push(l);l=C;break;case "=":e=14;n.push(l);l=C;break;default:l+=C}break;case 14:if("\n"===C){l="<p>"+n.pop()+l;l=n.pop()+(E?"</dl>":"")+l;e=1;I--;break}l="<dt>"+n.pop().substr(1)+"</dt><dd>";l=(E?n.pop():n.pop()+"<dl>")+l;e=15;switch(C){case "{":f.push(e);e=3;n.push(l);l=C;break;default:l+=C}break;case 15:switch(C){case "\n":e=16;break;case "{":f.push(e);e=3;n.push(l);l="{";break;default:l+=C}break;default:throw"WAVE.markup(state)";}}for(f.push(e);"undefined"!==typeof(e=f.pop());)switch(e){case 0:break;
case 1:case 2:l+="</p>";break;case 14:l=n.pop()+l;case 12:case 13:E&&n.push(n.pop()+"</dl>");case 9:case 7:l="<p>"+l+"</p>";case 3:case 4:l=n.pop()+l;break;case 8:l+="</h"+t+">";break;case 10:case 11:c(0);break;case 15:case 16:g(!1);break;default:throw"WAVE.markup(last.state)";}return l}}();f.isParentOf=function(a,b){if(f.isFunction(a.contains))try{return a.contains(b)}catch(h){return!1}for(var d=b;;){d=d.parentNode;if(null===d)return!1;if(d===a)return!0}};f.styleOf=function(a,b){return"undefined"===
typeof a||null===a||f.strEmpty(b)||!f.isFunction(window.getComputedStyle)?"":window.getComputedStyle(a,null).getPropertyValue(b)};f.removeElem=function(a){a=f.id(a);return null!==a?(a.parentNode.removeChild(a),!0):!1};f.removeChildren=function(a){for(;;){var b=a.lastChild;if(b)a.removeChild(b);else break}};f.addClass=function(a,b){"undefined"===typeof a||null===a||f.strEmpty(b)||(f.removeClass(a,b),a.className+=" "+b)};f.removeClass=function(a,b){"undefined"===typeof a||null===a||f.strEmpty(b)||"undefined"===
typeof a.className||(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g"),""))};f.fullHieght=function(a){if("undefined"!==typeof a&&null!==a)return a.clientHeight+parseFloat(f.styleOf(a,"margin-top"))+parseFloat(f.styleOf(a,"margin-bottom"))+parseFloat(f.styleOf(a,"padding-top"))+parseFloat(f.styleOf(a,"padding-bottom"))+parseFloat(f.styleOf(a,"border-top-width"))+parseFloat(f.styleOf(a,"border-bottom-width"))};f.fullWidth=function(a){if("undefined"!==typeof a&&null!==a)return a.clientWidth+
parseFloat(f.styleOf(a,"margin-left"))+parseFloat(f.styleOf(a,"margin-right"))+parseFloat(f.styleOf(a,"padding-left"))+parseFloat(f.styleOf(a,"padding-right"))+parseFloat(f.styleOf(a,"border-left-width"))+parseFloat(f.styleOf(a,"border-right-width"))};f.addEventHandler=function(a,b,d,h){"undefined"!==typeof a&&null!==a&&(f.isFunction(a.addEventListener)?a.addEventListener(b,d,!0===h):f.isFunction(a.attachEvent)?a.attachEvent("on"+b,d):a["on"+b]=d)};f.removeEventHandler=function(a,b,d,h){"undefined"!==
typeof a&&null!==a&&(f.isFunction(a.removeEventListener)?a.removeEventListener(b,d,!0===h):f.isFunction(a.detachEvent)?a.detachEvent("on"+b,d):a["on"+b]=null)};f.id=function(a){return document.getElementById(a)};f.ce=function(a){return"svg"===a?WAVE.SVG.createRoot():document.createElement(a)};f.ctn=function(a){return document.createTextNode(a)};f.body=function(){return document.getElementsByTagName("body")[0]};f.getRadioGroupValue=function(a){a=document.getElementsByName(a);for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value};
f.LOCALIZER={eng:{},rus:{},deu:{},fra:{},esp:{},allLanguageISOs:function(){var a=[],b;for(b in f.LOCALIZER)f.has(f.LOCALIZER,b)&&3===b.length&&a.push(b);return a}};f.strLocalize=function(a,b,d,h){if(4>arguments.length||f.strEmpty(a)||f.strEmpty(h))return h;f.strEmpty(b)&&(b="--ANY-SCHEMA--");f.strEmpty(d)&&(d="--ANY-FIELD--");var c=f.LOCALIZER;if(!c.hasOwnProperty(a))return h;c=c[a];if(c.hasOwnProperty(b))c=c[b];else{if(!c.hasOwnProperty("--ANY-SCHEMA--"))return h;c=c["--ANY-SCHEMA--"]}if(c.hasOwnProperty(d))c=
c[d];else{if(!c.hasOwnProperty("--ANY-FIELD--"))return h;c=c["--ANY-FIELD--"]}return c.hasOwnProperty(h)?c[h]:h};f.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};f.setCookie=function(a,b){var d=a+"="+escape(b)+"; path=/";document.cookie=d};f.deleteCookie=function(a){f.setCookie(a,null,{expires:-1})};var e={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),
iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),
OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};e.iOS=e.iPhone||e.iPod||e.iPad;e.Mobile=e.iOS||e.Android||e.OperaMini||e.OperaMobi||e.BlackBerry||e.WebOS||e.IEMobile||e.WinPhone||e.Silk;e.WebKit=e.Chrome||e.Safari;f.Platform=e;f.ajaxCall=function(a,b,d,h,c,e,l,g){p(a,b,d,h,c,e,l,g)};f.ajaxGet=function(a,b,d,h,c){p("GET",a,null,b,d,h,c)};f.ajaxGetJSON=function(a,b,d,h,c){p("GET",a,b,d,h,c,f.CONTENT_TYPE_JSON,f.CONTENT_TYPE_JSON_UTF8)};f.ajaxPost=function(a,
b,d,h,c,e,l){p("POST",a,b,d,h,c,e,l)};f.ajaxPostJSON=function(a,b,d,h,c){p("POST",a,b,d,h,c,f.CONTENT_TYPE_JSON,f.CONTENT_TYPE_JSON_UTF8)};f.ajaxPatch=function(a,b,d,h,c){p("PATCH",a,null,b,d,h,c)};f.ajaxPatchJSON=function(a,b,d,h,c){p("PATCH",a,b,d,h,c,f.CONTENT_TYPE_JSON,f.CONTENT_TYPE_JSON_UTF8)};f.onReady=function(a){f.isFunction(a)&&("loading"!==document.readyState?a():f.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",a):f.isFunction(document.attachEvent)&&
document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&a()}))};f.copyToClipboard=function(a){if("undefined"!==typeof a&&null!==a){var b,d=!1;if(f.isString(a)){if(f.strEmpty(a))return;d=!0;b=document.createElement("p");b.style.border="0";b.style.padding="0";b.style.margin="0";b.style.position="absolute";b.style.left="-9999px";b.style.top="-9999px";b.setAttribute("readonly","");b.innerHTML=a;document.body.appendChild(b)}else b=a;var h;try{f.selectElement(b),h=document.execCommand("copy")}catch(c){h=
!1}d&&document.body.removeChild(b);return h}};f.selectElement=function(a){var b,d;document.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(a),b.select()):window.getSelection&&(d=window.getSelection(),b=document.createRange(),b.selectNodeContents(a),d.removeAllRanges(),d.addRange(b))};f.getScrollBarWidth=function(){var a=document.createElement("div");a.style.height="100px";a.style.position="absolute";a.style.top="-10000px";a.style.width="100px";a.style.overflow="scroll";
document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;document.body.removeChild(a);return b};f.setCookie=function(a,b,d){d=d||{};var h=d.expires;if("number"===typeof h&&h){var c=new Date;c.setTime(c.getTime()+1E3*h);h=d.expires=c}h&&h.toUTCString&&(d.expires=h.toUTCString());b=encodeURIComponent(b);a=a+"="+b;for(var e in d)a+="; "+e,b=d[e],!0!==b&&(a+="="+b);document.cookie=a};f.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0};f.EventManager={ANY_EVENT:"*",eventBind:function(a,b){if(f.strEmpty(a)||!b)return!1;var d=m(this,a);if(f.inArray(d,b))return!1;d.push(b);return!0},eventUnbind:function(a,b){if(f.strEmpty(a)||!b)return!1;var d=m(this,a);return f.arrayDelete(d,b)},eventClear:function(a){if(f.strEmpty(a))return this["@!WAVE EVENT FUN LIST"]={},!0;a=m(this,a);f.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(f.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;
var b=Array.prototype.slice.call(arguments,1);b.splice(0,0,this);var d=m(this,a),h;for(h in d)d[h].apply(this,b);b.splice(0,0,a);d=m(this,"*");for(h in d)d[h].apply(this,b);d=y(this);for(h in d){var c=d[h],e=c.eventNotify;WAVE.isFunction(e)&&e.apply(c,b)}return!0},eventSinkBind:function(a){if(null===a)return!1;var b=y(this);if(f.inArray(b,a))return!1;b.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var b=y(this);return f.arrayDelete(b,a)},eventSinkClear:function(){this["@!WAVE EVENT SINK LIST"]=
[]},eventSinks:function(){return y(this)}};var g={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_TESTNUMBER:"wvUTestNumber",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},t=[],v={},r=!1,q=0;g.run=function(a,b,d){r||(r=!0,setTimeout(B,1E3));f.strEmpty(a)&&(a="Unspecified");
var h=null;a in v?h=v[a]:(h=g.DIV_AREA_PREFIX+f.genAutoincKey("UtestingArea"),v[a]=h);var c=f.id(h);c||(c=document.createElement("div"),c.id=h,c.className=g.CSS_CLASS_AREA,document.body.appendChild(c),c.innerHTML="<h2>"+a+"</h2>",c.STAT_NAME=a,c.STAT_TOTAL_TESTS=0,c.STAT_FAILED_TESTS=0);a="";try{t=[],q++,c.STAT_TOTAL_TESTS+=1,d()}catch(e){c.STAT_FAILED_TESTS+=1,a=e}d=!f.strEmpty(a);var w=g.DIV_TEST_PREFIX+f.genAutoincKey("UtestingCase"),h=document.createElement("div");h.id=w;h.className=d?g.CSS_CLASS_ERROR:
g.CSS_CLASS_OK;b="<div class='"+g.CSS_CLASS_TESTTITLE+"'><span class='"+g.CSS_CLASS_TESTNUMBER+"'>"+q+"</span>&nbsp;"+b+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(d?"FAILED":"PASSED")+"</div>";d&&(b+="&nbsp;&nbsp;Error: "+a);if(0<t.length){b+="<pre>";for(var l in t)b+=" "+t[l];b+="</pre>"}h.innerHTML=b;c.appendChild(h)};g.testingStarted=function(){return r};g.log=function(a){t.push("  &gt; "+a+"\n")};g.logi=function(a){t.push(a)};g.assertTrue=function(a,b){f.strEmpty(b)&&(b="Assertion not true");if(!a)throw b;
};g.assertFalse=function(a,b){f.strEmpty(b)&&(b="Assertion not false");if(a)throw b;};f.UTest=g;var n={EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,b,d,h){return Math.sqrt(Math.pow(a-d,2)+Math.pow(b-h,2))},distancePoints:function(a,b){return n.distance(a.x(),a.y(),
b.x(),b.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,b,d,h){a=Math.atan2(h-b,d-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,b){return n.azimuthRad(a.x(),a.y(),b.x(),b.y())},azimuthDeg:function(a,b,d,h){return n.azimuthRad(a,b,d,h)/6.28318531*360},azimuthDegPoints:function(a,b){return n.azimuthDeg(a.x(),a.y(),b.x(),b.y())},azimuthOfRadix:function(a,b,d,h,c){2>c&&(c=2);a=n.azimuthRad(a,b,d,h);a=n.wrapAngle(a,
3.14159265/c);return Math.floor(a/6.28318531*c)},azimuthOfRadixPoints:function(a,b,d){return n.azimuthOfRadix(a.x(),a.y(),b.x(),b.y(),d)},toRectXY:function(a,b,d,h){return new n.Rectangle(new n.Point(a,b),new n.Point(d,h))},toRectWH:function(a,b,d,h){return new n.Rectangle(new n.Point(a,b),new n.Point(a+d,b+h))},overlapAreaRect:function(a,b){var d=a.topLeft(),h=b.topLeft();return n.overlapAreaWH(d.x(),d.y(),a.width(),a.height(),h.x(),h.y(),b.width(),b.height())},overlapAreaWH:function(a,b,d,h,c,e,
l,g){a=l>=d?a<=c?a+d-c:a+d>=c+l?c+l-a:d:c<=a?c+l-a:c+l>=a+d?a+d-c:l;b=g>=h?b<=e?b+h-e:b+h>=e+g?e+g-b:h:e<=b?e+g-b:e+g>=b+h?b+h-e:g;0>a&&(a=0);0>b&&(b=0);return a*b},overlapAreaXY:function(a,b,d,h,c,e,l,g){return n.overlapAreaWH(a,b,d-a,h-b,c,e,l-c,g-e)},lineIntersectsRect:function(a,b,d,h,c,e,l,g){g=e-g;l-=c;c=-(g*c+l*e);e=g*a+l*b+c;var f=0===e?0:0<e?1:-1;e=g*a+l*h+c;if((0===e?0:0<e?1:-1)!==f)return!0;e=g*d+l*b+c;if((0===e?0:0<e?1:-1)!==f)return!0;e=g*d+l*h+c;return(0===e?0:0<e?1:-1)!==f?!0:!1},intersectionLengthRectLineXY:function(a,
b,d,h,c,e,l,g){return n.lineIntersectsRect(a,b,d,h,c,e,l,g)?n.distance(c<a?a:c>d?d:c,e<b?b:e>h?h:e,l<a?a:l>d?d:l,g<b?b:g>h?h:g):0},wrapAngle:function(a,b){b%=6.28318531;0>b&&(b=6.28318531+b);return(a+b)%6.28318531},mapDirectionToAngle:function(a){switch(a){case n.MapDirection.North:return 1.5707963275;case n.MapDirection.South:return 4.7123889825;case n.MapDirection.East:return 0;case n.MapDirection.West:return 3.141592655;case n.MapDirection.NorthEast:return.78539816375;case n.MapDirection.NorthWest:return 2.35619449125;
case n.MapDirection.SouthEast:return 5.49778714625;case n.MapDirection.SouthWest:return.625*6.28318531;default:return 0}},angleToMapDirection:function(a){a=n.wrapAngle(a,0);return 0<=a&&.392699081875>a?n.MapDirection.East:.392699081875<=a&&1.178097245625>a?n.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?n.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?n.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?n.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?n.MapDirection.SouthWest:
a>=6.28318531*11/16&&5.105088064375>a?n.MapDirection.South:5.105088064375<=a&&a<6.28318531*15/16?n.MapDirection.SouthEast:n.MapDirection.East},perimeterViolationArea:function(a,b){var d=0,h=0;b.left()<a.left()?d=a.left()-b.left():b.right()>a.right()&&(d=b.right()-a.right());b.top()<a.top()?h=a.top()-b.top():b.bottom()>a.bottom()&&(h=b.bottom()-a.bottom());return d*b.height()+h*b.width()},findRayFromRectangleCenterSideIntersection:function(a,b){var d=new n.Point(a.left()+a.width()/2,a.top()+a.height()/
2),h=a.width()>a.height()?a.width():a.height();100>h&&(h=100);var c=new n.PolarPoint(h,b),h=c.toPoint(),e=0!==h.x()?h.y()/h.x():0,l=0,g=0,h=[],l=d.x()+(0!==e?(a.top()-d.y())/e:0),g=a.top();l>=a.left()&&l<=a.right()&&h.push(new n.Point(l,g));l=d.x()+(0!==e?(a.bottom()-d.y())/e:0);g=a.bottom();l>=a.left()&&l<=a.right()&&h.push(new n.Point(l,g));l=a.right();g=d.y()+e*(a.right()-d.x());g>=a.top()&&g<=a.bottom()&&h.push(new n.Point(l,g));l=a.left();g=d.y()+e*(a.left()-d.x());g>=a.top()&&g<=a.bottom()&&
h.push(new n.Point(l,g));e=new n.Point(1E6,1E6);l=1E6;c=c.toPoint();c.offset(d.x(),d.y());for(var f in h)d=h[f],g=n.distancePoints(d,c),g<l&&(e=d,l=g);return e},rotateRectAroundCircle:function(a,b,d,h,c,e){h/=2;c/=2;a+=Math.cos(e)*(h+d);b+=Math.sin(e)*(c+d);return new n.toRectXY(a-h,b-c,a+h,b+c)},getBBox:function(a){if(!a)return null;var b=a.length;if(0===b)return null;for(var d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=0;g<b;g++){var f=
a[g],t=f.x,f=f.y;t<d&&(d=t);t>h&&(h=t);f<c&&(c=f);f>e&&(e=f)}return n.toRectXY(d,c,h,e)},Point:function(a,b){var d=a;this.x=function(a){"undefined"!==typeof a&&(d=a);return d};var h=b;this.y=function(a){"undefined"!==typeof a&&(h=a);return h};this.offset=function(a,b){d+=a;h+=b}}};n.Point.prototype.toPolarPoint=function(a){var b=n.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new n.PolarPoint(b,a)};n.Point.prototype.isEqual=function(a){return this.x()===
a.x()&&this.y()===a.y()};n.Point.prototype.toString=function(){return"("+this.x().toString()+" , "+this.y().toString()+")"};n.PolarPoint=function(a,b){function d(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var h=a;this.radius=function(a){"undefined"!==typeof a&&(h=a);return h};var c=d(b);this.theta=function(a){"undefined"!==typeof a&&(c=d(a));return c};this.toPoint=function(){return new n.Point(h*Math.cos(c),h*Math.sin(c))}};n.PolarPoint.prototype.isEqual=function(a){return this.radius()===
a.radius()&&this.theta()===a.theta()};n.PolarPoint.prototype.toString=function(){return"("+this.radius().toString()+" , "+n.radToDeg(this.theta()).toString()+"\u00b0)"};n.Rectangle=function(a,b){var d=this,h=a,c=b;this.corner1=function(a){"undefined"!==typeof a&&(h=a);return h};this.corner2=function(a){"undefined"!==typeof a&&(c=a);return c};this.topLeft=function(){var a=h.x(),b=c.x();b<a&&(a=b);var d=h.y(),b=c.y();b<d&&(d=b);return new n.Point(a,d)};this.bottomRight=function(){var a=h.x(),b=c.x();
b>a&&(a=b);var d=h.y(),b=c.y();b>d&&(d=b);return new n.Point(a,d)};this.width=function(){return Math.abs(h.x()-c.x())};this.height=function(){return Math.abs(h.y()-c.y())};this.left=function(){var a=h.x(),b=c.x();b<a&&(a=b);return a};this.right=function(){var a=h.x(),b=c.x();b>a&&(a=b);return a};this.top=function(){var a=h.y(),b=c.y();b<a&&(a=b);return a};this.bottom=function(){var a=h.y(),b=c.y();b>a&&(a=b);return a};this.centerPoint=function(){return new n.Point(d.left()+d.width()/2,d.top()+d.height()/
2)};this.square=function(){return d.width()*d.height()};this.contains=function(a){var b=d.topLeft(),h=d.bottomRight(),c=a.x();a=a.y();return c>=b.x()&&c<=h.x()&&a>=b.y()&&a<=h.y()}};n.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};n.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};n.vectorizeBalloon=
function(a,b,d){var h=[],c=new n.Point(a.left()+a.width()/2,a.top()+a.height()/2),e=b.toPolarPoint(c),g=n.findRayFromRectangleCenterSideIntersection(a,n.wrapAngle(e.theta(),-d/2));d=n.findRayFromRectangleCenterSideIntersection(a,n.wrapAngle(e.theta(),+d/2));h.push(new n.Point(a.left(),a.top()));h.push(new n.Point(a.right(),a.top()));h.push(new n.Point(a.right(),a.bottom()));h.push(new n.Point(a.left(),a.bottom()));h.push(g);h.push(b);h.push(d);h.sort(function(a,b){var d=a.toPolarPoint(c),h=b.toPolarPoint(c);
return d.theta()>h.theta()?-1:1});return h};f.Geometry=n;f.Walkable={wSelect:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c;return{reset:function(){d.reset()},moveNext:function(){if(!d.moveNext())return!1;c=a(d.current());return!0},current:function(){return c}}}};WAVE.extend(d,WAVE.Walkable);return d},wSelectMany:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c,e;return{reset:function(){for(d.reset();d.moveNext();){var b=d.current();if(null!==b){c=(a?a(b):
b).getWalker();break}}},moveNext:function(){if(c&&c.moveNext())return e=c.current(),!0;for(;d.moveNext();){var b=d.current();if(null!==b&&(c=(a?a(b):b).getWalker(),c.moveNext()))return e=c.current(),!0}return!1},current:function(){return e}}}};WAVE.extend(d,WAVE.Walkable);return d},wWhere:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){for(;d.moveNext();)if(a(d.current()))return!0;return!1},current:function(){return d.current()}}}};
WAVE.extend(d,WAVE.Walkable);return d},wAt:function(a){for(var b=this.getWalker(),d=-1;b.moveNext();)if(d++,d===a)return b.current();return null},wFirst:function(a){for(var b=this.getWalker();b.moveNext();)if(a){if(a(b.current()))return b.current()}else return b.current();return null},wFirstIdx:function(a){for(var b=this.getWalker(),d=-1;b.moveNext();)if(d++,a(b.current()))return d;return-1},wCount:function(a){for(var b=this.getWalker(),d=0;b.moveNext();)a?a(b.current())&&d++:d++;return d},wDistinct:function(a){var b=
this,d={getWalker:function(){var d=b.getWalker();return new function(){function b(c){return a?a(c,d.current()):c===d.current()}var c=[],e=WAVE.arrayWalkable(c);this.reset=function(){d.reset();c.splice(0,c.length)};this.moveNext=function(){for(;d.moveNext();)if(-1===e.wFirstIdx(b))return c.push(d.current()),!0;return!1};this.current=function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wConcat:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c=null;return{reset:function(){d.reset();
c=null},moveNext:function(){if(null===c){if(d.moveNext())return!0;c=a.getWalker()}return c.moveNext()},current:function(){return null===c?d.current():c.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wExcept:function(a,b){var d=this,c={getWalker:function(){function c(a){return b?b(h.current(),a):a===h.current()}var h=d.getWalker();return{reset:function(){h.reset()},moveNext:function(){for(;h.moveNext();)if(-1===a.wFirstIdx(c))return!0;return!1},current:function(){return h.current()}}}};WAVE.extend(c,
WAVE.Walkable);return c},wGroup:function(a,b){var d=this,c={getWalker:function(){return new function(){var c=d.wDistinct(function(b,d){return a(b)===a(d)}).getWalker();this.reset=function(){c.reset()};this.moveNext=function(){return c.moveNext()};this.current=function(){return{k:a(c.current()),v:d.wWhere(function(b){return a(b)===a(c.current())}).wSelect(function(a){return b(a)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wGroupIntoObject:function(){var a={};this.wEach(function(b){a[b.k]=b.v.wToArray()});
return a},wGroupIntoArray:function(a,b){var d=[];this.wEach(function(a){d.push({k:a.k,v:a.v.wToArray()})});return d},wGroupAggregate:function(a,b){var d=this,c={getWalker:function(){var b=d.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()},current:function(){var d=b.current();return{k:d.k,v:d.v.wAggregate(function(b,c){return a(d.k,b,c)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wOrder:function(a){var b=this.wToArray();a||(a=function(a,b){return a<b?-1:a>b?
1:0});b.sort(a);return WAVE.arrayWalkable(b)},wTake:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return new function(){var b=0;this.reset=function(){d.reset();b=0};this.moveNext=function(){if(!(d.moveNext()&&b<a))return!1;b++;return!0};this.current=function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wTakeWhile:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){return d.moveNext()&&a(d.current())?
!0:!1},current:function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wSkip:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return new function(){var b=-1;this.reset=function(){d.reset();b=-1};this.moveNext=function(){for(;d.moveNext();)if(b++,b>=a)return!0;return!1};this.current=function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wAny:function(a){var b=this.getWalker();if(!a)return b.moveNext();for(;b.moveNext();)if(a(b.current()))return!0;
return!1},wAll:function(a){var b=this.getWalker();if(!a)return!b.moveNext();for(;b.moveNext();)if(!a(b.current()))return!1;return!0},wMin:function(a){a||(a=function(a,b){return a<b});var b=this.getWalker();if(!b.moveNext())return null;for(var d=b.current();b.moveNext();)a(b.current(),d)&&(d=b.current());return d},wMax:function(a){a||(a=function(a,b){return a>b});var b=this.getWalker();if(!b.moveNext())return null;for(var d=b.current();b.moveNext();)a(b.current(),d)&&(d=b.current());return d},wAggregate:function(a,
b){var d=b;this.wEach(function(b){d=a(d,b)});return d},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,d){return a+d},a)},wEqual:function(a,b){var d=this.getWalker(),c=a.getWalker();do{var e=d.moveNext(),g=c.moveNext();if(!e&&!g)return!0;if(e!==g)return!1;e=d.current();g=c.current();if(!b){if(e!==g)return!1}else if(!b(e,g))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),b=[];a.moveNext();)b.push(a.current());return b},wEach:function(a){for(var b=
this.getWalker(),d=0;b.moveNext();)a(b.current(),d++);return this},wWMA:function(a){var b=this;"undefined"===typeof a&&(a=.5);var d={getWalker:function(){var d=b.getWalker(),c=null,e={s:-1,a:0};return{reset:function(){c=null;e={s:-1,a:0};d.reset()},moveNext:function(){if(!d.moveNext())return!1;e.s=d.current().s;var b=d.current().a;e.a=0===e.s?b:(1-a)*b+a*c;c=e.a;return!0},current:function(){return e},samplingRate:function(){return d.samplingRate?d.samplingRate():2}}}};WAVE.extend(d,WAVE.Walkable);
return d},wHarmonicFrequencyFilter:function(a,b){var d=this;"undefined"===typeof a&&(a=1);"undefined"===typeof b&&(b=1);1.0001>a&&(a=1.0001);1E-4>b&&(b=1E-4);var c={getWalker:function(){var c=d.getWalker(),h=0,e={s:-1,a:0},g=0,f=0;return{reset:function(){f=g=h=0;e={s:-1,a:0};c.reset()},moveNext:function(){if(!c.moveNext())return!1;e.s=c.current().s;var d=c.current().a,n=d-f;f=d;g+=(n-b*h)/a;g*=.98;e.a=h+g;h=e.a;return!0},current:function(){return e},samplingRate:function(){return c.samplingRate?c.samplingRate():
2}}}};WAVE.extend(c,WAVE.Walkable);return c},wConstLinearSampling:function(a){var b=this,d={getWalker:function(){a=a||1;var d=b.getWalker(),c=!1,e=null,g=a/2,f=0,n,t,q,k=[],v={};return new function(){this.reset=function(){k.splice(0,k.length);f=0;c=!1;e=null;d.reset()};this.moveNext=function(){function b(a,d){for(var c=0;c<k.length;c++){var E=k[c].s;if(E>a&&E<=d)return!0}return!1}function E(){if(d.moveNext())return e=d.current().s,!0;c=!0;return!1}function I(a,b){for(var d=0,c=0,E=0;E<k.length;E++){var e=
k[E];e.s>a&&e.s<=b&&(d+=e.a,c++)}return d/c}function r(a){for(;E();)if(d.current().s>=a){k.push(d.current());break}else k.push(d.current())}if(!f){if(!E())return!1;k.push(d.current());n=d.current().s;t=n-g;q=n+g;r(q);v.s=f++;var m=I(-Number.MAX_VALUE,q);v.a=m;return!0}n+=a;t=n-g;q=n+g;if(c&&e<t)return!1;v.s=f++;(function(a,b){for(;1<k.length&&k[0].s<a&&k[1].s<b;)k.shift()})(t,q);if(b(t,q))return v.a=I(t,q),!0;r(q);if(b(t,q))return v.a=I(t,q),!0;var m=k[0],H=k[1],H=(H.a-m.a)/(H.s-m.s);v.a=H*n+(m.a-
H*m.s);return!0};this.current=function(){return v}}}};WAVE.extend(d,WAVE.Walkable);return d},wSineGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():2),t=a.p||0;2>f&&(f=2);var k=6.28318531/f*c,q=0,v=t,r={},d=b.getWalker();return new function(){this.reset=function(){q=0;v=t;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;r.s=q++;r.a=e*Math.sin(v)+g+d.current().a;
v=n.wrapAngle(v,k);return!0};this.current=function(){return r};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wSawGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():2),t=a.p||0,q=a.s||.9;2>f&&(f=2);var k=1/3.14159265/q,v=1/3.14159265/(q-1),r=1-2*q/(q-1),m=6.28318531/f*c,E=0,I=t,U={},d=b.getWalker();return new function(){this.reset=function(){E=
0;I=t;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;U.s=E++;U.a=e*(I<6.28318531*q?k*I+-1:v*I+r)+g+d.current().a;I=n.wrapAngle(I,m);return!0};this.current=function(){return U};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wSquareGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():2),t=a.p||0,q=a.s||.9;2>f&&(f=2);var k=-2/3.14159265/
(1-q),v=1-3.14159265*k*q,r=2/3.14159265/(1-q),m=-1-3.14159265*r*(1+q),E=6.28318531/f*c,I=0,U=t,C={},d=b.getWalker();return new function(){this.reset=function(){I=0;U=t;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;C.s=I++;C.a=e*(3.14159265>U?U<3.14159265*q?1:k*U+v:U<3.14159265+3.14159265*q?-1:r*U+m)+g+d.current().a;U=n.wrapAngle(U,E);return!0};this.current=function(){return C};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wRandomGen:function(a){var b=
this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c="undefined"===typeof a.a?1:a.a,e=a.r||(b.samplingRate?b.samplingRate():2);2>e&&(e=2);var g=0,f={},d=b.getWalker();return new function(){this.reset=function(){d.reset();g=0};this.moveNext=function(){if(!d.moveNext())return!1;f.s=g++;f.a=d.current().a+2*c*(Math.random()-.5);return!0};this.current=function(){return f};this.samplingRate=function(){return e}}}};WAVE.extend(d,WAVE.Walkable);return d}};f.signalConstSrc=function(a){function b(a){var b=
a.a||0,d=a.qty,c=a.r||2;2>c&&(c=2);var e=0,g={};this.reset=function(){e=0};this.moveNext=function(){if(d&&e>=d)return!1;g.s=e;g.a=b;e++;return!0};this.current=function(){return g};this.samplingRate=function(){return c}}a=a||{};var d={getWalker:function(){return new b(a)}};WAVE.extend(d,WAVE.Walkable);return d};f.arrayWalkable=function(a){var b=function(){var b=-1;this.reset=function(){b=-1};this.moveNext=function(){return++b<a.length};this.current=function(){return 0>b||b>=a.length?null:a[b]}},d=
{getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,WAVE.Walkable);return d};f.groupWalkable=function(a){var b=function(){var b=-1,d=null;this.reset=function(){b=-1;d=null};this.moveNext=function(){if(++b<a.length){var c=a[b];d={k:c.k,v:WAVE.arrayWalkable(c.v)};return!0}return!1};this.current=function(){return d}},d={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,WAVE.Walkable);return d};f.SVG=function(){var a={createRoot:function(){return document.createElementNS("http://www.w3.org/2000/svg",
"svg")},createCircle:function(b,d,c,e){e=e||{};e.cx=b;e.cy=d;e.r=c;return a.createShape("circle",e)},createRect:function(b,d,c,e,g){g=g||{};g.x=b;g.y=d;g.width=c;g.height=e;return a.createShape("rect",g)},createLine:function(b,d,c,e,g){g=g||{};g.x1=b;g.y1=d;g.x2=c;g.y2=e;return a.createShape("line",g)},createPath:function(b){return a.createShape("path",b)},createText:function(b,d,c,e){e=e||{};e.x=d;e.y=c;d=a.createShape("text",e);b=document.createTextNode(b);d.appendChild(b);return d},createGroup:function(b){return a.createShape("g",
b)},createMarker:function(a,d){var c=this.createShape("marker",a),e;for(e in d)c.appendChild(d[e]);return c},createDefs:function(a){var d=this.createShape("defs"),c;for(c in a)d.appendChild(a[c]);return d},createUse:function(b,d,c){d=a.createShape("use",{x:d,y:c});d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return d},createClipPath:function(b,d,c){c=c||{};c.id=b;b=a.createShape("clipPath",c);for(var e in d)b.appendChild(d[e]);return b},createShape:function(a,d){var c=document.createElementNS("http://www.w3.org/2000/svg",
a),e;for(e in d)try{c.setAttribute(e,d[e])}catch(g){console.error(g)}return c}};return a}();f.genRndKey=function(a,b){var d="";f.intValidPositive(a)||(a=8);for(f.strEmpty(b)&&(b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");d.length<a;)d+=b.charAt(f.rnd(b.length));return d};var x={};f.genAutoincKey=function(a,b){var d=0;f.strEmpty(a)&&(a="Unspecified");f.intValidPositive(b)||(b=1);a in x&&(d=x[a]);var c=d;x[a]=d+b;return c};f.rnd=function(){var a=0,b=100;1===arguments.length?b=arguments[0]:2===arguments.length&&
(a=arguments[0],b=arguments[1]);return a+Math.floor(Math.random()*(b-a+1))};f.EVT_SWIPE_LEFT="wv-swipe-left";f.EVT_SWIPE_RIGHT="wv-swipe-right";f.EVT_SWIPE_UP="wv-swipe-up";f.EVT_SWIPE_DOWN="wv-swipe-down";f.Swipe=function(a){var b=this,d=null,c=null;WAVE.extend(b,WAVE.EventManager);WAVE.addEventHandler(document,"touchstart",function(a){d=a.touches[0].clientX;c=a.touches[0].clientY});WAVE.addEventHandler(document,"touchmove",function(a){if(d&&c){var e=d-a.touches[0].clientX;a=c-a.touches[0].clientY;
Math.abs(e)>Math.abs(a)?0<e?b.eventInvoke(f.EVT_SWIPE_LEFT,{phase:f.EVT_PHASE_AFTER}):b.eventInvoke(f.EVT_SWIPE_RIGHT,{phase:f.EVT_PHASE_AFTER}):0<a?b.eventInvoke(f.EVT_SWIPE_UP,{phase:f.EVT_PHASE_AFTER}):b.eventInvoke(f.EVT_SWIPE_DOWN,{phase:f.EVT_PHASE_AFTER});c=d=null}});return b};return f}();
WAVE.RecordModel=function(){var p={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",ScriptType:null,DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1,Config:null},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",
EVT_RECORD_LOAD:"record-load",EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_NLS:"nls",CTL_TP_SCRIPT:"script",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",CTL_TP_ERROR_REC:"error-rec",CTL_TP_ERROR_SUMMARY:"error-summary",CTL_TP_CHAIN_SELECTOR:"chain-selector",
CTL_TP_MARKDOWN:"markdown",KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm",DATA_RECVIEW_ID_ATTR:"data-wv-rid",DATA_FIELD_NAME_ATTR:"data-wv-fname",
DATA_CTL_TP_ATTR:"data-wv-ctl"},m=[];p.records=function(){return WAVE.arrayShallowCopy(m)};p.isDirty=function(){for(var p in m)if(m[p].isGUIModified())return!0;return!1};p.Record=function(y,B){if(!y)throw"Record.ctor(need id+fieldFunc or initObject)";var f=this,z=!1;WAVE.extend(f,WAVE.EventManager);this.eventInvoke(p.EVT_RECORD_LOAD,p.EVT_PHASE_BEFORE);var c=null,k=null,e="unspecified",g="",t="";WAVE.isObject(y)&&y.fields?(c=y.ID,k=y.ISOLang,y.__FormMode&&(e=y.__FormMode),y.__CSRFToken&&(g=y.__CSRFToken),
y.__Roundtrip&&(t=y.__Roundtrip)):(c=y.toString(),y=null);var v=WAVE.strEmpty(c)?WAVE.genRndKey(16):c,r=WAVE.strEmpty(k)?"eng":k,q=[],n=!1,x=null;this.ID=function(){return v};this.ISOLang=function(){return r};this.formMode=function(){return e};this.csrfToken=function(){return g};this.roundtrip=function(){return t};this.loaded=function(){return z};this.fields=function(){return WAVE.arrayShallowCopy(q)};this.data=function(a,d){var c={},f;for(f in q){var n=q[f];a&&!n.isModified()&&!n.isGUIModified()||
!d&&!n.stored()||(c[n.name()]=n.value())}WAVE.strEmpty(e)||"unspecified"===e||(c.__FormMode=e);WAVE.strEmpty(g)||(c.__CSRFToken=g);WAVE.strEmpty(t)||(c.__Roundtrip=t);return c};this.fieldByName=function(a){if(WAVE.strEmpty(a))return null;for(var d in q){var c=q[d];if(WAVE.strSame(c.name(),a))return c}return null};this.allValidationErrors=function(){var a=[];null!==x&&a.push(x);for(var d in q){var c=q[d].validationError();null!==c&&a.push(c)}return a};this.allValidationErrorStrings=function(){var a=
"",d=this.allValidationErrors(),c;for(c in d)a+=d[c].toString()+"\n";return a};this.validate=function(){n=!1;x=null;var a=n=!0,d;for(d in q)q[d].validate()||(a=!1);if(a)try{f.eventInvoke(p.EVT_VALIDATE)}catch(c){x=c,a=!1}f.eventInvoke(p.EVT_VALIDATED);return a};this.validated=function(){return n};this.validationError=function(){return x};this.valid=function(){return n&&null===x&&this.fieldsValid()};this.setExternalValidationError=function(a,d){WAVE.strEmpty(d)||(x=d,n=!1)};this.fieldsValidated=function(){for(var a in q)if(!q[a].validated())return!1;
return!0};this.fieldsValid=function(){for(var a in q)if(!q[a].valid())return!1;return!0};this.isModified=function(){for(var a in q)if(q[a].isModified())return!0;return!1};this.isGUIModified=function(){for(var a in q)if(q[a].isGUIModified())return!0;return!1};this.resetModified=function(){for(var a in q){var d=q[a];d.resetModified();d.resetGUIModified()}return!1};this.resetSchema=function(){for(var a in q)q[a].resetSchema()};this.applyDefaultValue=function(a){for(var d in q)q[d].applyDefaultValue(a)};
this.latchAllEvents=function(a){this.eventInvocationSuspendCount+=a;for(var d in q)q[d].eventInvocationSuspendCount+=a};this.resetRecord=function(a){a&&f.latchAllEvents(1);try{n=!1,x=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{a&&f.latchAllEvents(-1)}for(var d in q)a=q[d],a.eventInvoke(p.EVT_FIELD_RESET,a)};this.Field=function(a){function d(){n=!1;x=null;y=!1;z=null}function c(a,b){f.eventInvoke(p.EVT_VALIDATION_DEFINITION_CHANGE,l,a,b);l.eventInvoke(p.EVT_VALIDATION_DEFINITION_CHANGE,
a,b)}function e(a,b){f.eventInvoke(p.EVT_INTERACTION_CHANGE,l,a,b);l.eventInvoke(p.EVT_INTERACTION_CHANGE,a,b)}var g=!1;if(!WAVE.isObject(a))throw"Field.ctor(fieldDef must be a map)";if(WAVE.strEmpty(a.Name))throw"Field def must have a name";if(WAVE.strEmpty(a.Type))throw"Field def must have a type";a.Key=WAVE.strAsBool(a.Key,p.FIELDDEF_DEFAULTS.Key);a.Stored=WAVE.strAsBool(a.Stored,p.FIELDDEF_DEFAULTS.Stored);a.Required=WAVE.strAsBool(a.Required,p.FIELDDEF_DEFAULTS.Required);a.Applicable=WAVE.strAsBool(a.Applicable,
p.FIELDDEF_DEFAULTS.Applicable);a.Enabled=WAVE.strAsBool(a.Enabled,p.FIELDDEF_DEFAULTS.Enabled);a.ReadOnly=WAVE.strAsBool(a.ReadOnly,p.FIELDDEF_DEFAULTS.ReadOnly);a.Visible=WAVE.strAsBool(a.Visible,p.FIELDDEF_DEFAULTS.Visible);a.Password=WAVE.strAsBool(a.Password,p.FIELDDEF_DEFAULTS.Password);a.Marked=WAVE.strAsBool(a.Marked,p.FIELDDEF_DEFAULTS.Marked);a.DeferValidation=WAVE.strAsBool(a.DeferValidation,p.FIELDDEF_DEFAULTS.DeferValidation);var l=this;WAVE.extend(l,WAVE.EventManager);q.push(l);var t=
"fld"+a.Name;f[t]=l;f.eventInvoke(p.EVT_FIELD_LOAD,l,p.EVT_PHASE_BEFORE);WAVE.propStrAsObject(a,"LookupDict");WAVE.propStrAsObject(a,"Lookup");var k=WAVE.clone(a);WAVE.extend(k,p.FIELDDEF_DEFAULTS,!0);var v=null,r=!1,m=!1,y=!1,z=null;this.record=function(){return f};this.loaded=function(){return g};this.drop=function(){if(!f[t])return!1;this.eventInvoke(p.EVT_FIELD_DROP,p.EVT_PHASE_BEFORE);f.eventInvoke(p.EVT_FIELD_DROP,l,p.EVT_PHASE_BEFORE);WAVE.arrayDelete(q,this);delete f[t];f.eventInvoke(p.EVT_FIELD_DROP,
l,p.EVT_PHASE_AFTER);this.eventInvoke(p.EVT_FIELD_DROP,p.EVT_PHASE_AFTER);return!0};this.schemaDef=function(){return a};this.name=function(){return k.Name};this.type=function(){return k.Type};this.isTypeLogical=function(){return WAVE.strOneOf(k.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(k.LookupDict).length};this.key=function(){return k.Key};this.stored=function(){return k.Stored};this.about=function(){var a=k.Description;WAVE.strEmpty(a)&&(a=k.Name);return a};
this.inferControlType=function(){return this.isTypeLogical()?p.CTL_TP_CHECK:this.isLookupDict()?4<Object.keys(k.LookupDict).length?p.CTL_TP_COMBO:p.CTL_TP_RADIO:64<k.Size?p.CTL_TP_TEXTAREA:p.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=k.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[p.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){k=WAVE.clone(a);WAVE.extend(k,p.FIELDDEF_DEFAULTS,!0);d();c(null,null);e(null,null)};this.validate=function(){function a(b,
d){return WAVE.strTemplate(WAVE.strLocalize(f.ISOLang(),"RMField","error",b),d)}y=!0;z=null;try{if(k.Required&&(null===v||WAVE.strEmpty(v.toString())))throw a("Field '@f@' must have a value",{f:this.about()});if(null!==v&&!WAVE.strEmpty(v.toString())){var b=k.MinValue;if(null!==b)try{if(v<b)throw 1;}catch(d){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var c=k.MaxValue;if(null!==c)try{if(v>c)throw 1;}catch(d){throw a("Field '@f@' value can not be greater than '@b@'",
{f:this.about(),b:c});}var e=k.Size;if(null!==e&&0<e&&v.toString().length>e)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:e});e=k.MinSize;if(null!==e&&0<e&&v.toString().length<e)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:e});var g=Object.keys(k.LookupDict),h=WAVE.isSimpleKeyStringMap(k.LookupDict);if(0<g.length&&h){var n=WAVE.convertScalarType(!1,v,"string","<unconvertible>");if(!WAVE.strOneOf(n,g))throw a("Field '@f@' value '@v@' is not allowed",
{f:this.about(),v:n});}if(k.Kind===p.KIND_EMAIL&&!WAVE.strIsEMail(v))throw a("Field '@f@' must be a valid e-mail address",{f:this.about()});if(k.Kind===p.KIND_SCREENNAME&&!WAVE.strIsScreenName(v))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}l.eventInvoke(p.EVT_VALIDATE)}catch(d){z=d}l.eventInvoke(p.EVT_VALIDATED);return null===z};this.validationError=function(){return z};this.setExternalValidationError=function(a,
b){WAVE.strEmpty(b)||(z=b,y=!1)};this.required=function(a){if("undefined"===typeof a||a===k.Required)return k.Required;k.Required=a;d();c("required",a)};this.value=function(a,b){if("undefined"===typeof a)return v;var c=v,e=WAVE.convertScalarType(!0,a,k.Type,k.DefaultValue),g=WAVE.isSame(c,e);if(b)var h=e,e=this.preProcessValueFromGUI(e),g=g&&WAVE.isSame(h,e);if(g)return v;f.eventInvoke(p.EVT_DATA_CHANGE,p.EVT_PHASE_BEFORE,l,c,e);this.eventInvoke(p.EVT_DATA_CHANGE,p.EVT_PHASE_BEFORE,c,e);v=e;r=!0;
b&&(m=!0);k.DeferValidation?d():this.validate();this.eventInvoke(p.EVT_DATA_CHANGE,p.EVT_PHASE_AFTER,c,e);f.eventInvoke(p.EVT_DATA_CHANGE,p.EVT_PHASE_AFTER,l,c,e);return v};this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),k.Kind===p.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),k.Case===p.CASE_UPPER?a=a.toUpperCase():k.Case===p.CASE_LOWER?a=a.toLowerCase():k.Case===p.CASE_CAPS?a=WAVE.strCaps(a,!1):k.Case===p.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));
return a};this.isNull=function(){return null===v};this.displayValue=function(){return null===v?"":WAVE.isDateType(k.Type)?k.Kind===p.KIND_DATE?WAVE.toUSDateString(v):WAVE.toUSDateTimeString(v):v.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(k.DefaultValue);return v};this.valid=function(){return null===z};this.validated=function(){return y};this.validationError=function(){return z};this.isModified=function(){return r};this.resetModified=
function(){var a=r;r=!1;e("modified",!1);return a};this.isGUIModified=function(){return m};this.resetGUIModified=function(){var a=m;m=!1;e("guimodified",!1);return a};this.isEnabled=function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===k.Kind)return k.Kind;k.Kind=a;e("kind",a)};this.case=function(a){if("undefined"===typeof a||a===k.Case)return k.Case;k.Case=a;WAVE.isStringType(k.Type)&&this.value(v,!1)};this.applicable=function(a){if("undefined"===
typeof a||a===k.Applicable)return k.Applicable;k.Applicable=a;e("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===k.Enabled)return k.Enabled;k.Enabled=a;e("enabled",a)};this.readonly=function(a){if("undefined"===typeof a||a===k.ReadOnly)return k.ReadOnly;k.ReadOnly=a;e("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===k.Visible)return k.Visible;k.Visible=a;e("visible",a)};this.password=function(a){if("undefined"===typeof a||a===k.Password)return k.Password;
k.Password=a;e("password",a)};this.deferValidation=function(a){if("undefined"===typeof a||a===k.DeferValidation)return k.DeferValidation;k.DeferValidation=a;d();c("defervalidation",a)};this.minValue=function(a){if("undefined"===typeof a||a===k.MinValue)return k.MinValue;k.MinValue=a;d();c("minvalue",a)};this.maxValue=function(a){if("undefined"===typeof a||a===k.MaxValue)return k.MaxValue;k.MaxValue=a;d();c("maxvalue",a)};this.minSize=function(a){if("undefined"===typeof a||a===k.MinSize)return k.MinSize;
k.MinSize=a;d();c("minsize",a)};this.size=function(a){if("undefined"===typeof a||a===k.Size)return k.Size;k.Size=a;d();c("size",a)};this.controlType=function(a){if("undefined"===typeof a||a===k.ControlType)return k.ControlType;k.ControlType=a;e("controltype",a)};this.scriptType=function(a){if("undefined"===typeof a||a===k.ScriptType)return k.ScriptType;k.ScriptType=a;e("scripttype",a)};this.defaultValue=function(a){if("undefined"===typeof a||a===k.DefaultValue)return k.DefaultValue;k.DefaultValue=
a;d();c("defaultvalue",a)};this.lookupDict=function(a){if("undefined"===typeof a)return k.LookupDict;null===a&&(a={});if(WAVE.isSame(k.DefaultValue,a))return k.LookupDict;k.LookupDict=a;d();c("lookupDict",a)};this.hint=function(a){if("undefined"===typeof a||a===k.Hint)return k.Hint;k.Hint=a;e("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===k.Marked)return k.Marked;k.Marked=a;e("marked",a)};this.description=function(a){if("undefined"===typeof a||a===k.Description)return k.Description;
k.Description=a;e("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===k.Placeholder)return k.Placeholder;k.Placeholder=a;e("placeholder",a)};this.config=function(a){if("undefined"===typeof a||a===k.Config)return k.Config;if(!WAVE.isObject(a))throw"RecordView.config(val: must be object)";k.Config=a;d();c("config",null);e("config",null)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};g=!0;f.eventInvoke(p.EVT_FIELD_LOAD,l,p.EVT_PHASE_AFTER)};
if(y){for(var a in y.fields)c=y.fields[a],k=new this.Field(c.def),c.hasOwnProperty("val")&&k.value(c.val),c.hasOwnProperty("errorText")&&k.setExternalValidationError(WAVE.strDefault(c.error),c.errorText),k.resetModified();y.hasOwnProperty("errorText")&&this.setExternalValidationError(WAVE.strDefault(y.error),y.errorText)}else WAVE.isFunction(B)&&B.apply(f);z=!0;m.push(this);this.eventInvoke(p.EVT_RECORD_LOAD,p.EVT_PHASE_AFTER)};p.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};
p.RecordView=function(m,B,f,z){if(WAVE.strEmpty(m))throw"RecordView.ctor(id: must specify)";if(!WAVE.isObject(B))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(f)||(f=WAVE.RecordModel.GUI);var c=f,k=this,e=[],g=null;this.ID=function(){return m};this.record=function(){return B};this.gui=function(){return c};this.rootElement=function(){return g};this.destroyViews=function(){for(;0<e.length;)e[0].destroy()};var t=null;this.buildViews=function(){g=null;this.destroyViews();for(var c=document.getElementsByTagName("form"),
e=0,f=c.length;e<f;e++){var k=c[e],x=k.getAttribute(p.DATA_RECVIEW_ID_ATTR);if(WAVE.strSame(m,x)){g=k;break}}if(null===g)for(c=document.getElementsByTagName("div"),e=0,f=c.length;e<f;e++)if(k=c[e],x=k.getAttribute(p.DATA_RECVIEW_ID_ATTR),WAVE.strSame(m,x)){g=k;break}if(null===g)throw"No 'form' or 'div' element could be found with record binding '"+p.DATA_RECVIEW_ID_ATTR+"' annotation";c=WAVE.arrayShallowCopy(g.getElementsByTagName("div"));e=0;for(f=c.length;e<f;e++)k=c[e],x=k.getAttribute(p.DATA_FIELD_NAME_ATTR),
WAVE.strEmpty(x)||("#"===x?new this.FieldView(k,null):(x=B.fieldByName(x),null!==x&&new this.FieldView(k,x)));WAVE.strEmpty(B.formMode())&&WAVE.strEmpty(B.csrfToken())&&WAVE.strEmpty(B.roundtrip())||(null===t&&(t=document.createElement("div"),t.style.display="none",g.appendChild(t)),c="",WAVE.strEmpty(B.formMode())||(c+="<input type='hidden' name='__FormMode' value='"+B.formMode()+"'>"),WAVE.strEmpty(B.csrfToken())||(c+="<input type='hidden' name='__CSRFToken' value='"+B.csrfToken()+"'>"),WAVE.strEmpty(B.roundtrip())||
(c+="<input type='hidden' name='__Roundtrip' value='"+B.roundtrip()+"'>"),t.innerHTML=c)};this.views=function(){return WAVE.arrayShallowCopy(e)};this.FieldView=function(g,f){if(!g)throw"FieldView.ctor(div: element must be passed)";if(null!==f&&!WAVE.isObject(f))throw"FieldView.ctor(fld: must be Record.Field)";var t=this;e.push(t);null!==f?f.eventSinkBind(this):B.eventSinkBind(this);var n="";null!==f&&(n="fld"+f.name(),k[n]=t);this.eventNotify=function(e,a,b){WAVE.strOneOf(e,[WAVE.RecordModel.EVT_DATA_CHANGE,
WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof b&&(b=""),b!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(null!==f&&(g.style.visibility=f.visible()?"visible":"hidden"),c.eventNotifyFieldView(t,e,a,b)))};this.destroy=function(){g.innerHTML="";null!==f?f.eventSinkUnbind(this):B.eventSinkUnbind(this);WAVE.arrayDelete(e,this);null!==f&&delete k[n]};this.record=function(){return B};this.recView=function(){return k};
this.field=function(){return f};this.DIV=function(){return g};this.getOrInferControlType=function(){var c=g.getAttribute(p.DATA_CTL_TP_ATTR);return WAVE.strEmpty(c)?null===f?WAVE.RecordModel.CTL_TP_ERROR_REC:f.getOrInferControlType():c};(null===f||f.visible())&&c.buildFieldViewAnew(this)};z||this.buildViews()};return p}();
WAVE.Pay=function(){var p={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"AmEx",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Card"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,CARD_DECLINED:9,
MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(m,p,B){if(WAVE.strEmpty(m))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(B))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var f=this;this.providerName=function(){return m};WAVE.extend(f,WAVE.EventManager);try{p.initialize(B)}catch(z){throw new WAVE.Pay.ProviderInitError(z);}this.tokenize=
function(m,c){if(WAVE.strEmpty(m))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(c))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{p.tokenize(f,m,c)}catch(k){throw new WAVE.Pay.TokenizeError(k);}}},RequiredArgumentError:function(m,p,B){this.name="RequiredArgumentError";this.message=m+" requires argument '"+p+"'";this.inner=B}};p.RequiredArgumentError.prototype=Error.prototype;p.ProviderInitError=function(m){this.name="ProviderInitError";
var p="Critical error during provider setup";"undefined"===typeof m||WAVE.strEmpty(m.message)||(p+=": "+m.message);this.message=p;this.inner=m};p.ProviderInitError.prototype=Error.prototype;p.TokenizeError=function(m){this.name="TokenizeError";var p="Critical error during tokenization";"undefined"===typeof m||WAVE.strEmpty(m.message)||(p+=": "+m.message);this.message=p;this.inner=m};p.TokenizeError.prototype=Error.prototype;p.CardValidationError=function(m){this.name="CardValidationError";var p="Card is invalid";
"undefined"===typeof m||WAVE.strEmpty(m.message)||(p+=": "+m.message);this.message=p;this.inner=m};p.CardValidationError.prototype=Error.prototype;p.validateCardNumber=function(m){if(WAVE.strEmpty(m))return!1;m=m.replace(/\s+|-/g,"");return 10<=m.length&&16>=m.length&&p.checkLuhn(m)};p.checkLuhn=function(m){if(WAVE.strEmpty(m))return!1;var p=0,B=0,f=!1;m=m.replace(/\D/g,"");for(var z=m.length-1;0<=z;z--)B=m.charAt(z),B=parseInt(B,10),f&&9<(B*=2)&&(B-=9),p+=B,f=!f;return 0===p%10};p.validateCVC=function(m){return WAVE.strEmpty(m)?
!1:3<=m.length&&4>=m.length&&/^\d+$/.test(m)};p.validateExpirationDate=function(m,p){if(WAVE.strEmpty(m)||WAVE.strEmpty(p))return!1;2===p.length&&(p="20"+p);return/^\d+$/.test(m)&&/^\d+$/.test(p)&&1<=m&&12>=m&&4===p.length&&2015<p};p.getCardBrand=function(m){return WAVE.strEmpty(m)||!/^\d{2}/.test(m)?p.Brands.UNKNOWN:/^4/.test(m)?p.Brands.VISA:/^5[1-5]/.test(m)?p.Brands.MASTER_CARD:/^3[47]/.test(m)?p.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(m)?
p.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(m)?p.Brands.JCB:/^3[0689]/.test(m)?p.Brands.DINERS_CLUB:p.Brands.UNKNOWN};return p}();WAVE.GUI=function(){function p(a){if(0<k.length){var b=k[k.length-1];a=a.target;"undefined"===typeof a||null===a||WAVE.isParentOf(b,a)||(b.tabIndex=0,b.focus())}}function m(){n||WAVE.Platform.Mobile||(window.addEventListener("focus",p,!0),g=window.pageYOffset||document.documentElement.scrollTop,r=document.body.style.top,t=document.body.style.position,v=document.body.style.overflowY,q=document.body.style.paddingRight,document.body.parentElement.offsetHeight>window.innerHeight&&(n=!0,document.body.style.position=
"fixed",document.body.style.paddingRight=q+WAVE.getScrollBarWidth()+"px",document.body.style.overflow="hidden",document.body.style.top=-g+"px"))}function y(){n&&!WAVE.Platform.Mobile&&(window.removeEventListener("focus",p,!0),document.body.style.top=r,document.body.style.position=t,document.body.style.overflowY=v,document.body.style.paddingRight=q,document.documentElement.scrollTop=document.body.scrollTop=g,n=!1)}function B(a,b){if(a===b)return!0;if("undefined"===typeof a||"undefined"===typeof b)return!1;
WAVE.isObject(a)||(a={url:a});WAVE.isObject(b)||(b={url:b});if(a.url===b.url)if(WAVE.has(a,"clip")){if(WAVE.has(b,"clip"))return a.left|0===b.left|0&&a.right|0===b.right|0&&a.bottom|0===b.bottom|0&&a.top|0===b.top|0}else if(!WAVE.has(b,"clip"))return!0;return!1}function f(a,b,d,c){WAVE.isObject(a)||(a={url:a});a.url=WAVE.strDefault(function(a){return 0===a.indexOf("$")&&WAVE.isObject(c)?c[a.substr(1)]:a}(WAVE.strDefault(a.url)));var e=new Image;e.onerror=function(){a.error=!0;"undefined"!==typeof d&&
d.apply(e,arguments)};if(WAVE.has(a,"clip")){var g=a.clip,f=g.left|0,h=g.top|0,k=(g.right|0)-f,l=(g.bottom|0)-h,n=document.createElement("canvas");n.width=k;n.height=l;e.onload=function(){a.load=!0;a.width=k;a.height=l;n.getContext("2d").drawImage(this,f,h,k,l,0,0,k,l);"undefined"!==typeof b&&b.apply(n,arguments);delete a.img};a.element=n}else e.onload=function(){a.load=!0;a.width=this.width;a.height=this.height;"undefined"!==typeof b&&b.apply(e,arguments)},a.element=e;e.src=a.url;a.free=function(){a.element.parentNode&&
a.element.parentNode.removeChild(a.element);delete a.element;delete a.error;delete a.load;delete a.img;delete a.width;delete a.height;delete a.free};return a}function z(a,b,d,c,e){function g(e,f){function h(b){b.preventDefault();var c=b.pageX;b=b.pageY;var g=e-c,k=f-b;"undefined"!==typeof d&&d.call(a,e,f);a.scrollLeft+=g;a.scrollTop+=k;e=c;f=b}function k(b){b.preventDefault();var c=b.touches;b=c[0].pageX;var c=c[0].pageY,g=e-b,h=f-c;"undefined"!==typeof d&&d.call(a,e,f);a.scrollLeft+=g;a.scrollTop+=
h;e=b;f=c}function l(b){"undefined"!==typeof c&&c.call(a,b.pageX,b.pageY);t()}function n(b){"undefined"!==typeof c&&c.call(a,e,f);t()}function t(){document.removeEventListener("mousemove",h,!1);document.removeEventListener("touchmove",k,!1);document.removeEventListener("mouseup",l,!1);document.removeEventListener("touchend",n,!1)}"undefined"!==typeof b&&b.call(a,e,f);document.addEventListener("mousemove",h,!1);document.addEventListener("touchmove",k,!1);document.addEventListener("mouseup",l,!1);document.addEventListener("touchend",
n,!1)}a.addEventListener("mousedown",function(a){0===a.button&&(e&&a.preventDefault(),g(a.pageX,a.pageY))},!1);a.addEventListener("touchstart",function(a){var b=a.touches;1===b.length&&(e&&a.preventDefault(),g(b[0].pageX,b[0].pageY))},!1)}var c={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_HEADER:"wvDialogHeader",CLS_DIALOG_BODY:"wvDialogBody",CLS_DIALOG_FOOTER:"wvDialogFooter",CLS_DIALOG_CONFIRM_FOOTER:"wvConfirmDialogFooter",
CLS_DIALOG_CONFIRM_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",
EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor",
EVT_PS_EDITOR_UPDATED:"editor-updated",CLS_PS_DIV_LANGS_CONTAINER:"wvPSLangsContainer",CLS_PS_BTN_ADD:"wvPSBtnAdd",CLS_PS_BTN_DEL:"wvPSBtnDel",CLS_PS_BTN_RAW:"wvPSBtnRaw",CLS_PS_BTN_CLEAR:"wvPSBtnClear",CLS_PS_DIV_LANG_NAME:"wvPSLangLabel",CLS_PS_LANG_SELECTOR:"wvPSLangSelector",CLS_PS_TEXTAREA_RAW_EDITOR:"wvPSTextareaRawEditor",CLS_PS_LABEL_CONTAINER:"wvPSLabelContainer",CLS_PS_INPUT_CONTAINER:"wvPSInputContainer",CLS_TABS_ACTIVE_TAB:"wvTabsActive",CLS_TABS_UL:"wvTabsUl",CLS_TABS_CONTENT_DIV:"wvTabsContentDiv",
CLS_TABS_CONTENT_DIV_HIDDEN:"wvTabsContentDivHidden",CLS_TABS_CONTENT_DIV_SHOWN:"wvTabsContentDivShown",CLS_TABS_CONTENT_CONTAINER:"wvTabsContentContainer",CLS_TABS_UL_CONTAINER:"wvTabsUlContainer",CLS_TABS_LI_DISABLED:"wvTabDisabled",EVT_TABS_TAB_CHANGED:"wv-active-tab-changed",EVT_TABS_TAB_ADD:"wv-tab-add",EVT_TABS_TAB_REMOVE:"wv-tab-remove",EVT_MULTI_LINE_TEXT_UPDATED:"wv-multiline-updated",CLS_OBJECT_EDITOR_NODE_CONTAIER:"wvObjEditNode",CLS_OBJECT_EDITOR_ARRAY_ITEM:"wvObjEditItem",CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR:"wvObjEditItemSeparator",
CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"wvObjEditArrDiv",CLS_OBJECT_EDITOR_OBJECT_CONTAIER:"wvObjEditObjDiv",CLS_OBJECT_EDITOR_INPUT_CONTAIER:"wvObjEditInputDiv",EVT_OBJECT_EDITOR_UPDATED:"wv-objectEditor-updated",EVT_OBJECT_EDITOR_VALIDATION_ERROR:"wv-objectEditor-validation-error",EVT_OBJECT_EDITOR_VALIDATION_SUCCESS:"wv-objectEditor-validation-success",CLS_IMAGE_BOX_LOADING:"wvImageBox_loading",CLS_IMAGE_BOX_ERROR:"wvImageBox_error",CLS_IMAGE_BOX_WIDER:"wvImageBox_wider",CLS_IMAGE_BOX_HIGHER:"wvImageBox_higher",
CLS_IMAGE_VIEW:"wvImageView",CLS_IMAGE_VIEW_ZOOM:"wvImageView_zoom",CLS_IMAGE_VIEW_IMAGE:"wvImageView_image",CLS_GALLERY:"wvGallery",CLS_GALLERY_PREV:"wvGallery_prev",CLS_GALLERY_NEXT:"wvGallery_next",CLS_GALLERY_DISABLED:"wvGallery_disabled",CLS_GALLERY_LIST:"wvGallery_list",CLS_GALLERY_ITEM:"wvGallery_item",CLS_GALLERY_THUMBNAIL:"wvGallery_thumbnail",CLS_GALLERY_CONTENT:"wvGallery_content",CLS_GALLERY_IMAGE:"wvGallery_image",CLS_GALLERY_SELECTED:"wvGallery_selected",CLS_GALLERY_SIMPLE_THUMBNAILS:"wvGallerySimple_thumbnails",
CLS_GALLERY_SIMPLE_PREVIEW:"wvGallerySimple_preview",EVT_GALLERY_ADD:"wv-gallery-add",EVT_GALLERY_REMOVE:"wv-gallery-remove",EVT_GALLERY_CHANGE:"wv-gallery-change",CLS_DETAILS:"wvDetails",CLS_DETAILS_TITLE:"wvDetailsTitle",CLS_DETAILS_TITLE_SHOWN:"wvDetailsTitleShown",CLS_DETAILS_TITLE_HIDDEN:"wvDetailsTitleHidden",CLS_DETAILS_CONTENT:"wvDetailsContent",CLS_DETAILS_CONTENT_VISIBLE:"wvDetailsContentVisible",CLS_DETAILS_CONTENT_HIDDEN:"wvDetailsContentHidden",CLS_DETAILS_MODAL:"wvDetailsModal",CLS_CHAIN_SELECTOR:"wvChainSelector",
CLS_CS_DIV_INFO:"wvChainSelectorInfo",CLS_CS_DIV_NAME:"wvChainSelectorName",CLS_CS_DIV_DESCR:"wvChainSelectorDescription",CLS_CS_DIV_COMBO_WRAP:"wvChainSelectorComboWrap",CLS_CS_DIV_ARROW:"wvChainSelectorComboArrow",EVT_CHAIN_SELECTOR_UPDATED:"chain-selector-updated",EVT_DETAILS_SHOW:"wv-details-show",EVT_DETAILS_HIDE:"wv-details-hide",CLS_SELECT_MODE_MULTI:"wvMulti",CLS_SELECT_MODE_SINGLE:"wvSingle",CLS_SELECT_CONTAINER:"wvSelectContainer",CLS_SELECT_COMBOBOX:"wvSelectCombobox",CLS_SELECT_DROPDOWN:"wvSelectDropdown",
CLS_SELECT_DROPDOWN_SHOWN:"wvShown",CLS_SELECT_DROPDOWN_HIDDEN:"wvHidden",CLS_SELECT_DISPLAY:"wvSelectDisplay",CLS_SELECT_ARROW:"wvSelectArrow",CLS_SELECT_AUTOCOMPETE:"wvSelectAutocomplete",CLS_SELECT_AUTO_CONTAINER:"wvSelectAutoContainer",CLS_SELECT_CHOICES_CONTAINER:"wvSelectChoicesContainer",EVT_SELECT_CHANGE:"wv-select-change",EVT_SELECT_OPEN:"wv-select-opan",EVT_SELECT_CLOSE:"wv-select-close",EVT_SELECT_SELECT:"wv-select-select",EVT_SELECT_UNSELECT:"wv-select-unselect",SELECT_MODES:{Single:0,
Multi:1}},k=[],e=!1;c.dirty=function(a){if("undefined"===typeof a)return e;e=a};c.isDirty=function(){return e||null!==c.currentDialog()};c.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(a){c.SUPPRESS_UNLOAD_CHECK||!c.isDirty()&&!WAVE.RecordModel.isDirty()||((a||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};var g=0,t=null,v=null,r=null,q=null,n=!1,x=0;c.toast=function(a,b,d){var e=
{};WAVE.intValidPositive(d)||(d=2500);var g=document.createElement("div");b=WAVE.strEmpty(b)?"":"_"+b;g.className=c.CLS_TOAST+b;g.style.zIndex=1E6;g.innerHTML=a;g.style.left=0;document.body.appendChild(g);a=Math.round(g.offsetWidth/2);g.style.left="50%";g.style.marginLeft=-a+"px";x++;1<x&&(g.style.marginLeft=-(a+4*x)+"px",g.style.marginTop=-(4*x)+"px");var f=!1;e.close=function(){if(f)return!1;document.body.removeChild(g);x--;return f=!0};e.closed=function(){return f};setTimeout(function(){e.close()},
d);return e};c.curtainOn=function(a,b,d){if(!d)try{document.activeElement.blur()}catch(e){}d=document.createElement("div");b=WAVE.strAsBool(b,!0);d.style.backgroundColor="rgba(127,127,127,0.45)";d.className=c.CLS_CURTAIN;WAVE.strEmpty(a)||(d.className+=" "+a);d.style.position="fixed";d.style.left="0";d.style.top="0";d.style.width="100%";d.style.height="100%";d.style.zIndex=5E5+k.length;d.mbu=b;document.body.appendChild(d);k.push(d);b&&m();return d};c.curtainOff=function(){if(0!==k.length){var a=k[k.length-
1];document.body.removeChild(a);WAVE.arrayDelete(k,a);!0===a.mbu&&y()}};c.isCurtain=function(){return 0<k.length};c.Dialog=function(a){function b(a,d,c){WAVE.isObject(d)?a.appendChild(d):a.innerHTML=WAVE.strDefault(d,c)}function d(){if(0!==q||0!==v){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0===q?p.offsetWidth:Math.round(q/100*a),e=0===v?p.offsetHeight:Math.round(v/
100*b);p.style.width=0===q?"auto":c+"px";p.style.left=Math.round(a/2-p.offsetWidth/2)+"px";a=Math.round(b/2-p.offsetHeight/2);0>a&&(a=0);p.style.top=a+"px";p.style.width=0===q?"auto":c-2*p.offsetLeft+"px";p.style.height=0===q?"auto":e-(p.offsetTop+p.offsetLeft)+"px"}}function e(a){WAVE.isParentOf(p,a.target)||h.close()}function g(a){27===a.keyCode&&h.close()}function f(){G&&clearTimeout(G);G=setTimeout(function(){d();G=null},500)}WAVE.isObject(a)||(a={});var h=this,l=WAVE.isFunction(a.onShow)?a.onShow:
function(){},n=WAVE.isFunction(a.onClose)?a.onClose:function(){return!0},t=WAVE.strAsBool(a.closeOnClickOutside,!1),T=WAVE.strAsBool(a.closeOnEscape,!0),q=WAVE.intValidPositive(a.widthpct)?a.widthpct:0,v=WAVE.intValidPositive(a.heightpct)?a.heightpct:0,r=WAVE.strAsBool(a.preventScroll,!0),ba=a.header,ta=a.body,xa=a.footer,u=null,p=null,X=null,w=null,x=null;WAVE.extend(h,WAVE.EventManager);100<q&&(q=100);100<v&&(v=100);u=document.createElement("div");u.__DIALOG=this;u.className=c.CLS_DIALOG_BASE+" "+
WAVE.strDefault(a.cls);u.style.position="fixed";u.style.zIndex=5E5+k.length;document.body.appendChild(u);k.push(u);p=document.createElement("div");p.className=c.CLS_DIALOG_CONTENT;u.appendChild(p);X=document.createElement("div");X.className=c.CLS_DIALOG_HEADER;b(X,ba,"Dialog");p.appendChild(X);w=document.createElement("div");w.className=c.CLS_DIALOG_BODY;b(w,ta,"&nbsp;");p.appendChild(w);x=document.createElement("div");x.className=c.CLS_DIALOG_FOOTER;b(x,xa,"");p.appendChild(x);var G=null,D=c.DLG_UNDEFINED;
this.result=function(){return D};this.close=function(a){"undefined"===typeof a&&(a=c.DLG_CANCEL);if(D!==c.DLG_UNDEFINED)return D;if(!n(this,a))return c.DLG_UNDEFINED;D=a;document.body.removeChild(u);WAVE.arrayDelete(k,u);WAVE.removeEventHandler(window,"resize",f);r&&y();t&&WAVE.removeEventHandler(window,"click",e);T&&WAVE.removeEventHandler(window,"keyup",g);h=l=n=x=w=X=p=u=u.__DIALOG=null;this.eventInvoke(c.EVT_DIALOG_CLOSE,a);return a};this.ok=function(){this.close(c.DLG_OK)};this.cancel=function(){this.close(c.DLG_CANCEL)};
this.title=function(a){if("undefined"===typeof a||null===a)return X.innerHTML;X.innerHTML=a;d()};this.content=function(a){if("undefined"===typeof a||null===a)return w.innerHTML;$(w).html(a);d()};this.baseDIV=function(){return u};this.headerDIV=function(){return X};this.bodyDIV=function(){return w};this.footerDIV=function(){return x};this.widthpct=function(a){if("undefined"===typeof a||a===q)return q;q=a;d()};this.widthpct=function(a){if("undefined"===typeof a||a===v)return v;v=a;d()};this.adjustBounds=
function(){d()};WAVE.addEventHandler(window,"resize",f);(function(){t&&setTimeout(function(){WAVE.addEventHandler(window,"click",e)},1);T&&WAVE.addEventHandler(window,"keyup",g);l(h)})();d();r&&m();return h};c.showConfirmationDialog=function(a,b,d,e,g){function f(a,b){return WAVE.strHTMLTemplate('<button class="@btnClass@" onclick="WAVE.GUI.currentDialog().close(\'@result@\');">@label@</button>',{btnClass:c.CLS_DIALOG_CONFIRM_BUTTON+" "+h,result:b,label:a})}WAVE.isObject(g)||(g={});WAVE.isArray(d)||
(d=[]);b=WAVE.strDefault(b,"Please confirm");var h=WAVE.strDefault(g.btnCls),k=WAVE.strDefault(g.footerCls),l="",n="",t="",q="";WAVE.inArray(d,c.DLG_YES)&&(l=f("Yes",c.DLG_YES));WAVE.inArray(d,c.DLG_NO)&&(n=f("No",c.DLG_NO));WAVE.inArray(d,c.DLG_OK)&&(t=f("OK",c.DLG_OK));WAVE.inArray(d,c.DLG_CANCEL)&&(q=f("Cancel",c.DLG_CANCEL));b="<div>"+b+"<div>";k='<div class="'+c.CLS_DIALOG_CONFIRM_FOOTER+" "+k+'">'+l+n+t+q+"</div>";new c.Dialog({header:WAVE.strDefault(a,"Confirmation"),body:b,footer:k,cls:WAVE.strDefault(g.cls),
onShow:function(a){},onClose:e})};c.currentDialog=function(){for(var a=k.length-1;0<=a;a--)if("undefined"!==typeof k[a].__DIALOG)return k[a].__DIALOG;return null};c.PuzzleKeypad=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||WAVE.strEmpty(a.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var b=this;WAVE.extend(b,WAVE.EventManager);var d=WAVE.genRndKey(4),e=a.DIV,g=WAVE.strEmpty(a.Help)?"Please enter the following security information by touching the symbols below":
a.Help,f=WAVE.strEmpty(a.Question)?"":a.Question,h=a.Answer||[],k=a.Image,l=null,n=null,t=null,q=null,v=null,m=null;this.destroy=function(){e.innerHTML=""};this.value=function(){return h};this.jsonValue=function(){return JSON.stringify(h)};this.help=function(a){if("undefined"===typeof a)return g;g=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;l.innerHTML=g};this.question=function(a){if("undefined"===typeof a)return f;f=WAVE.strEmpty(a)?"":a;n.innerHTML=
f};this.image=function(a){if("undefined"===typeof a)return k;k=WAVE.strEmpty(a)?"":a;m.src=k+"&req="+WAVE.genRndKey()};(function(){var ba="pzl_"+d+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),r={hid:"divHelp_"+ba,qid:"divQuestion_"+ba,tid:"tbValue_"+ba,bid:"btnClear_"+ba,iid:"img_"+ba,pid:"plhd_"+ba,help:g,question:f,img:k+"&req="+WAVE.genRndKey(),clear:WAVE.strDefault(a.Clear,"Clear"),placeholder:WAVE.strDefault(a.Placeholder,"\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7"),
symbol:WAVE.strDefault(a.InputSymbol,"*")};(function(a,b){var d=a;WAVE.isString(d)&&(d=WAVE.id(d));var c=WAVE.ce("div"),e=WAVE.ce("div");e.setAttribute("id",b.hid);e.setAttribute("class","wvPuzzleHelp");var g=WAVE.ce("div");g.innerText="Protect yourself from fraud!";g.setAttribute("class","wvPuzzleHeader");e.appendChild(g);g=WAVE.ce("div");g.innerText=b.help;g.setAttribute("class","wvPuzzleBody");e.appendChild(g);c.appendChild(e);e=WAVE.ce("div");e.innerText=b.question;e.setAttribute("id",b.qid);
e.setAttribute("class","wvPuzzleQuestion");c.appendChild(e);e=WAVE.ce("div");e.setAttribute("class","wvPuzzleImg");g=WAVE.ce("img");g.setAttribute("id",b.iid);g.setAttribute("src",b.img);e.appendChild(g);c.appendChild(e);e=WAVE.ce("div");e.setAttribute("class","wvPuzzleControls");g=WAVE.ce("div");g.setAttribute("class","wvPuzzleInputs");var f=WAVE.ce("div");f.setAttribute("id",b.tid);f.setAttribute("class","wvInput hidden");g.appendChild(f);f=WAVE.ce("div");f.innerText=b.placeholder;f.setAttribute("id",
b.pid);f.setAttribute("class","wvPlaceholder");g.appendChild(f);e.appendChild(g);g=WAVE.ce("button");g.innerText=b.clear;g.setAttribute("id",b.bid);e.appendChild(g);c.appendChild(e);WAVE.isObject(d)&&d.appendChild(c);return c})(e,r);l=WAVE.id(r.hid);n=WAVE.id(r.qid);t=WAVE.id(r.tid);v=WAVE.id(r.bid);m=WAVE.id(r.iid);q=WAVE.id(r.pid);if(0<h.length){for(var xa in h)t.appendChild(function(a){WAVE.isString(a)&&(a=WAVE.id(a));var b=WAVE.ce("span");b.innerText=r.symbol;WAVE.isObject(a)&&a.appendChild(b);
return b}());WAVE.addClass(q,"hidden");WAVE.removeClass(t,"hidden");b.eventInvoke(c.EVT_PUZZLE_KEYPAD_CHANGE,h)}$(v).click(function(a){a.preventDefault();t.innerHTML="";h=[];WAVE.addClass(t,"hidden");WAVE.removeClass(q,"hidden");b.eventInvoke(c.EVT_PUZZLE_KEYPAD_CHANGE,h)});$(m).click(function(a){var d=$(this).offset();h.push({x:Math.round(a.pageX-d.left),y:Math.round(a.pageY-d.top)});t.appendChild(function(a){WAVE.isString(a)&&(a=WAVE.id(a));var b=WAVE.ce("span");b.innerText=r.symbol;WAVE.isObject(a)&&
a.appendChild(b);return b}());WAVE.addClass(q,"hidden");WAVE.removeClass(t,"hidden");b.eventInvoke(c.EVT_PUZZLE_KEYPAD_CHANGE,h)})})()};var a=function(a){function d(a){return ba.wFirst(function(b){return b.element===a})}function e(a){return m.wFirst(function(b){return b.name===a})}function g(a,b){var d=e(a);null===d?(d={name:a,cfg:b||{},elementInfos:[]},v.push(d)):b&&(d.cfg=b);return d}function f(a){var b=a.currentTarget,e=d(b);null!==e&&(a=e.ruler.onMouseMove(a),l(b,e.scopeInfos,a),b=WAVE.arrayWalkable(e.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
q.eventInvoke(c.EVT_RULER_MOUSE_MOVE,a,b))}function h(a){a=a.currentTarget;var b=d(a);null!==b&&(b.ruler.onMouseEnter(),n(a,b.scopeInfos),a=WAVE.arrayWalkable(b.scopeInfos).wSelect(function(a){return a.name}).wToArray(),q.eventInvoke(c.EVT_RULER_MOUSE_ENTER,a))}function k(a){var b=a.currentTarget,e=d(b);null!==e&&(e.ruler.onMouseLeave(a),t(b,e.scopeInfos),a=WAVE.arrayWalkable(e.scopeInfos).wSelect(function(a){return a.name}).wToArray(),q.eventInvoke(c.EVT_RULER_MOUSE_LEAVE,a))}function l(a,b,d){d=
{scope:null,masterRes:d};for(var c in b){var e=b[c];d.scope=e;for(var g in e.elementInfos){var f=e.elementInfos[g];if(a!==f.element)f.ruler.onScopeMouseMove(d)}}}function n(a,b){for(var d in b){var c=b[d],e;for(e in c.elementInfos){var g=c.elementInfos[e];if(a!==g.element)g.ruler.onScopeMouseEnter(c)}}}function t(a,b){for(var d in b){var c=b[d],e;for(e in c.elementInfos){var g=c.elementInfos[e];if(a!==g.element)g.ruler.onScopeMouseLeave(c)}}}var q=this;WAVE.extend(this,WAVE.EventManager);var v=[],
m=WAVE.arrayWalkable(v),r=[],ba=WAVE.arrayWalkable(r);this.set=function(a){var c=a.element,e=a.elementCfg;a=g(a.scopeName||"",a.scopeCfg);var l=d(c);if(null===l){var l={element:c,cfg:e||{},scopeInfos:[]},E=$(c);E.bind("mouseenter",h);E.bind("mouseleave",k);E.bind("mousemove",f);c=new b(c,e);l.ruler=c;r.push(l)}else e&&(l.cfg=e,l.ruler.cfg(e));c=l;-1===a.elementInfos.indexOf(c)&&a.elementInfos.push(c);-1===c.scopeInfos.indexOf(a)&&c.scopeInfos.push(a)};this.unset=function(a){var b=a.element,c=a.scopeName,
g=d(a.element);null!==g&&(c?(a=e(c),null!==a&&WAVE.arrayDelete(a.elements,g),WAVE.arrayDelete(g.scopes,a)):(WAVE.arrayWalkable(g.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,g)}),g.scopeInfos.splice(0,g.scopeInfos.length)),0===g.scopeInfos.length&&(b=$(b),b.unbind("mouseenter",h),b.unbind("mouseleave",k),b.unbind("mousemove",f),WAVE.arrayDelete(r,g)))};this.setScope=function(a,b){g(a,b)};this.mouseMove=function(a,b){var d=m.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();
l(null,d,a)};this.mouseEnter=function(a){var b=m.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();n(null,b)};this.mouseLeave=function(a){var b=m.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();t(null,b)}},b=function(a,b){function d(a,b,c){a=new WAVE.arrayWalkable([r,u,p,w,x,null,J,oa,G,D,null,F]);c?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}
function c(){v||(r=document.createElement("div"),r.id="WAVE_GUI_Ruler",r.innerHTML="Hint DIV",r.className=n,r.style.position="absolute",document.body.appendChild(r),w=f(!0),u=f(!0),G=f(!1),J=f(!1),p=f(!1),x=f(!1),oa=f(!0),D=f(!0),v=!0)}function e(){v&&(h(r),r=null,h(w),w=null,h(u),u=null,h(G),G=null,h(J),J=null,h(p),p=null,h(x),x=null,h(oa),oa=null,h(D),D=null,v=!1)}function g(){m&&(h(F),F=null,m=!1)}function f(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position=
"absolute";b.className=t;document.body.appendChild(b);return b}function h(a){null!==a&&document.body.removeChild(a)}var k=this,l=b||{};this.cfg=function(a){"undefined"!==typeof a&&a!==b&&(l=a);return l};var n=l.hintCls||"wvRulerHint",t=l.sightCls||"wvRulerSight",q=l.sightSize||8,v=!1,m=!1,r=null,u=null,p=null,w=null,x=null,J=null,oa=null,G=null,D=null,F=null;this.onMouseEnter=function(a){c()};this.onMouseLeave=function(a){e()};this.onMouseMove=function(b){g();c();var e;if(l.parentRc)e=l.parentRc;
else{var f=a.getBoundingClientRect();e=WAVE.Geometry.toRectWH(f.left,f.top,f.width,f.height)}var f=b.clientX-e.left(),h=b.clientY-e.top();r.style.left=b.clientX+"px";r.style.top=b.clientY+"px";var k=null,k=l.getTxt?l.getTxt({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY),divHint:r}):f+", "+h;r.innerHTML=k;for(var k=r.getBoundingClientRect(),k=WAVE.Geometry.toRectWH(k.left,k.top,k.width,k.height),n=b.clientX,t=b.clientY,v=e,m=null,T=k.square(),ba=Number.MAX_VALUE,H=0;H<2*Math.PI;H+=Math.PI/
4){var wa=WAVE.Geometry.rotateRectAroundCircle(n,t,20,k.width(),k.height(),H),W=WAVE.Geometry.overlapAreaRect(v,wa),W=T-W;if(0===W){m=wa;break}W<ba&&(ba=W,m=wa)}k=m.topLeft();r.style.left=k.x()+"px";r.style.top=k.y()+"px";k=b.clientX;n=b.clientY;t=k-q;t<e.left()&&(t=e.left());v=k+q;v>e.right()&&(v=e.right());m=n-q;m<e.top()&&(m=e.top());T=n+q;T>e.bottom()&&(T=e.bottom());u.style.left=e.left()+"px";u.style.width=t-e.left()+"px";u.style.top=n+"px";w.style.left=v+"px";w.style.width=e.right()-v+"px";
w.style.top=n+"px";p.style.top=e.top()+"px";p.style.height=m-e.top()+"px";p.style.left=k+"px";x.style.top=T+"px";x.style.height=e.bottom()-T+"px";x.style.left=k+"px";J.style.top=m+"px";J.style.height=T-m+"px";J.style.left=t+"px";G.style.top=m+"px";G.style.height=T-m+"px";G.style.left=v+"px";oa.style.left=t+"px";oa.style.width=v-t+"px";oa.style.top=m+"px";D.style.left=t+"px";D.style.width=v-t+"px";D.style.top=T+"px";f=l.getMasterInfo?l.getMasterInfo({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY)}):
{elementRcPoint:new WAVE.Geometry.Point(f,h),isInParentRc:!0};d(b.clientX,b.clientY,f.isInParentRc);return f};this.onScopeMouseEnter=function(a){m||(F=f(!1),m=!0)};this.onScopeMouseLeave=function(a){g()};this.onScopeMouseMove=function(a){e();m||(F=f(!1),m=!0);var b=k.getParentRc(),c,g,h;l.getSlaveInfo?(g=l.getSlaveInfo({masterRes:a.masterRes}),h=g.isInParentRc,c=g.clientPoint.x(),g=g.clientPoint.y()):(g=a.masterRes.elementRcPoint,h=!0,c=b.left()+g.x(),g=b.top()+g.y());d(c,g,a.masterRes.isInParentRc&&
h);F.style.top=b.top()+"px";F.style.height=b.height()+"px";F.style.left=c+"px"};this.getParentRc=function(){var b;l.parentRc?b=l.parentRc:(b=a.getBoundingClientRect(),b=WAVE.Geometry.toRectWH(b.left,b.top,b.width,b.height));return b}},d=null;c.rulerSet=function(b){null===d&&(d=new a);d.set(b)};c.rulerUnset=function(a){null!==d&&d.unset(a)};c.rulerSetScope=function(b,c){null===d&&(d=new a);d.setScope(b,c)};c.rulerMouseMove=function(a,b){null!==d&&d.mouseMove(a,b)};c.rulerMouseEnter=function(a){null!==
d&&d.mouseEnter(a)};c.rulerMouseLeave=function(a){null!==d&&d.mouseLeave(a)};c.rulerEventBind=function(b,c){null===d&&(d=new a);d.eventBind(b,c)};c.WindowConnector=function(a){a=a||{};var b=this,d=a.wnd||window,c=[],e=WAVE.arrayWalkable(c);this.connectedWindows=function(){return WAVE.arrayShallowCopy(c)};this.openWindow=function(a){var d=window.open(a||window.location.href);e.wEach(function(a){a.Connector.addWindow(d)});b.addWindow(d)};this.closeCurrentWindow=function(){e.wEach(function(a){a.Connector.removeWindow(d)})};
this.addWindow=function(a){c.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(c,a)};this.callWindowFunc=function(a){var d;e.wEach(function(b){b.closed?(d||(d=[]),d.push(b)):a(b)});if(d){var c=WAVE.arrayWalkable(d);c.wEach(function(a){b.removeWindow(a)});c.wEach(function(a){e.wEach(function(b){b.Connector.removeWindow(a)})})}};this.logMsg=function(a){console.log(a)};if(d.opener&&d.opener.Connector){b.addWindow(d.opener);a=d.opener.Connector.connectedWindows();for(var g in a){var f=a[g];
f!==d&&(f.closed||b.addWindow({window:f}))}}};c.connectorEnsure=function(a){a=a||window;a.Connector||(a.Connector=new c.WindowConnector({wnd:a}))};var h=0;c.Tree=function(a){function b(a,e){var g;n===c.TREE_SELECTION_SINGLE?(!0===e&&q.getDescendants().wEach(function(b){if(b.node!==a&&!0===b.node.selected()){var e={phase:c.EVT_PHASE_BEFORE,node:b.node,value:b.node.selected()};d(c.EVT_TREE_NODE_SELECTION,e);b.node.selected(!1,!0);b={phase:c.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};d(c.EVT_TREE_NODE_SELECTION,
b)}}),g={phase:c.EVT_PHASE_AFTER,node:a,value:e},d(c.EVT_TREE_NODE_SELECTION,g)):n===c.TREE_SELECTION_MULTI&&(g={phase:c.EVT_PHASE_AFTER,node:a,value:e},d(c.EVT_TREE_NODE_SELECTION,g))}function d(a,b){t||g.eventInvoke(a,b)}var e=function(a){a=a||{};var t=this;h++;var E="tvn_"+h,v=a.parent||null;if(null!==v&&v.tree()!==g)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return v};var m,r,u,p,w;this.__divChildren=function(){return null!==v?w:f};var x="undefined"!==typeof a.id?a.id.toString():
h.toString();this.id=function(){return x};var S="undefined"===typeof a.expandedContent?g.DEFAULT_NODE_EXPANDED_CONTENT:a.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return S;S=a;r&&(r.innerHTML=L?S:J)};var J="undefined"===typeof a.collapsedContent?g.DEFAULT_NODE_COLLAPSED_CONTENT:a.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return J;J=a;r&&(r.innerHTML=L?S:J)};this.path=function(){return null===v?"":v===q?x:v.path()+"/"+x};this.level=
function(){return null===v?-1:v===q?0:v.level()+1};this.html=function(a){if(null===v)return null;if("undefined"===typeof a)return p.innerHTML;var b={phase:c.EVT_PHASE_BEFORE,node:t,oldContent:p.innerHTML,newContent:a,abort:!1};d(c.EVT_TREE_NODE_CONTENT,b);!0!==b.abort&&(p.innerHTML=a,d(c.EVT_TREE_NODE_CONTENT,{phase:c.EVT_PHASE_AFTER,node:t,oldContent:p.innerHTML,newContent:a}))};var D=!1!==a.selectable;this.selectable=function(a){if("undefined"===typeof a)return D;D=a;F&&!a&&t.selected(!1)};var F=
!0===a.selected;this.selected=function(a,e){if(n===c.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return F;if(a!==F&&(D||!D&&!a)){if(!0!==e){var g={phase:c.EVT_PHASE_BEFORE,node:t,value:a,abort:!1};d(c.EVT_TREE_NODE_SELECTION,g);if(!0===g.abort)return}F=a;p.className=F?t.wvTreeNodeOwnSelected():t.wvTreeNodeOwn();!0!==e&&b(t,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return m.className;m.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return r.className;
r.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return u.className;u.className=a};var A=a.wvTreeNodeButtonExpanded||k.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(a){if("undefined"===typeof a)return A||k.wvTreeNodeButtonExpanded;a!==A&&(A=a,r.className=L?t.wvTreeNodeButtonExpanded():t.wvTreeNodeButtonCollapsed())};var aa=a.wvTreeNodeButtonCollapsed||k.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(a){if("undefined"===typeof a)return aa||
k.wvTreeNodeButtonCollapsed;a!==aa&&(aa=a,r.className=L?t.wvTreeNodeButtonExpanded():t.wvTreeNodeButtonCollapsed())};var va=a.wvTreeNodeOwn||k.wvTreeNodeOwn;this.wvTreeNodeOwn=function(a){if("undefined"===typeof a)return va||k.wvTreeNodeOwn;a!==va&&(va=a,p.className=F?t.wvTreeNodeOwnSelected():t.wvTreeNodeOwn())};var y=a.wvTreeNodeOwnSelected||k.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(a){if("undefined"===typeof a)return y||k.wvTreeNodeOwnSelected;a!==y&&(y=a,p.className=F?t.wvTreeNodeOwnSelected():
t.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return w.className;w.className=a};var la=a.childrenDisplayVisible||l;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return la;a!==la&&(la=a,L&&(w.style.display=la))};var pa=a.data;this.data=function(a){if("undefined"===typeof a)return pa;if(pa!==a){var b={phase:c.EVT_PHASE_BEFORE,node:t,oldData:pa,newData:a,abort:!1};d(c.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(pa=a,d(c.EVT_TREE_NODE_DATA,{phase:c.EVT_PHASE_AFTER,
node:t,oldData:pa,newData:a}))}};var L=!0===a.expanded;this.expanded=function(a){if("undefined"===typeof a)return L;if(null!==v&&L!==a){var b={phase:c.EVT_PHASE_BEFORE,node:t,value:a,abort:!1};d(c.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(L=a,r.className=L?t.wvTreeNodeButtonExpanded():t.wvTreeNodeButtonCollapsed(),r.innerHTML=a?S:J,w.style.display=a?la:"none",d(c.EVT_TREE_NODE_EXPANSION,{phase:c.EVT_PHASE_AFTER,node:t,value:a}))}};var K=[];this.children=function(){return WAVE.arrayShallowCopy(K)};
this.__children=function(){return K};this.tree=function(){return g};this.getDescendants=function(){return t.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(K).getWalker(),d=null,c=0,e=-1;this.reset=function(){b=WAVE.arrayWalkable(K).getWalker();c=0;e=-1};this.moveNext=function(){function g(){if(b.moveNext())return e++,c=1,!0;c=0;return!1}if(0===c)return g();if(1===c)if(d=b.current().__getDescendants(a+1).getWalker(),d.moveNext())c=2;else return g();
else if(2===c&&!d.moveNext())return g();return!0};this.current=function(){if(1===c)return{level:a,nodeNum:e,node:b.current()};if(2===c)return d.current()}},d={getWalker:function(){return new b},tree:g};WAVE.extend(d,WAVE.Walkable);return d};this.getChildIdx=function(a,b){return b?t.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),a)}):WAVE.arrayWalkable(K).wFirstIdx(function(b){return WAVE.strSame(b.id(),a)})};this.getChild=function(a,b){if(b){var d=t.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),
a)});return d?d.node:null}return WAVE.arrayWalkable(K).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){function b(a){return function(b){return b.id()===a}}if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var d=null,c=WAVE.arrayWalkable(K),e;for(e in a){d=c.wFirst(b(a[e]));if(null===d)return null;c=WAVE.arrayWalkable(d.__children())}return d};this.unveil=function(){var a=v;if(null!==a)for(;null!==
a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var b={phase:c.EVT_PHASE_BEFORE,parentNode:t,childNodeInit:a,abort:!1};d(c.EVT_TREE_NODE_ADD,b);if(!0!==b.abort)return a.parent=t,a=new e(a),K.push(a),null!==v&&(r.style.visibility="visible"),d(c.EVT_TREE_NODE_ADD,{phase:c.EVT_PHASE_AFTER,parentNode:t,childNode:a}),a};this.__removeChild=function(a){WAVE.arrayDelete(K,a);0===K.length&&null!==v&&(r.style.visibility="hidden")};this.remove=function(){if(null===
v)console.error("Root node couldn't be removed");else{var a={phase:c.EVT_PHASE_BEFORE,parentNode:v,childNode:t,abort:!1};d(c.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(m.parentNode.removeChild(m),v.__removeChild(t),d(c.EVT_TREE_NODE_REMOVE,{phase:c.EVT_PHASE_AFTER,parentNode:v,childNode:t}))}};this.removeAllChildren=function(){var a=WAVE.arrayShallowCopy(K),b;for(b in a)a[b].remove()};if(null!==v){var z={id:E,wvTreeNode:a.wvTreeNode||k.wvTreeNode,wvTreeNodeContent:a.wvTreeNodeContent||k.wvTreeNodeContent,
wvTreeNodeOwn:a.wvTreeNodeOwn||k.wvTreeNodeOwn,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||k.wvTreeNodeOwnSelected,wvTreeNodeChildren:a.wvTreeNodeChildren||k.wvTreeNodeChildren};z.wvTreeNodeButton=L?t.wvTreeNodeButtonExpanded():t.wvTreeNodeButtonCollapsed();var Q=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
z),M=v.__divChildren();m=document.createElement("div");m.id="root_"+E;m.className=z.wvTreeNode;m.innerHTML=Q;M.appendChild(m);u=WAVE.id("content_"+E);p=WAVE.id("own_"+E);w=WAVE.id("children_"+E);p.innerHTML=a.html;p.className=F?t.wvTreeNodeOwnSelected():t.wvTreeNodeOwn();$(p).click(function(){t.selected(!F)});a=!0===a.expanded;r=WAVE.id("exp_"+E);r.innerHTML=L?S:J;r.style.visibility="hidden";$(r).click(function(){t.expanded(!L)});w.style.display=a?la:"none"}};if("undefined"===typeof a||null===a||
"undefined"===typeof a.DIV||null===a.DIV)throw"Tree.ctor(init.DIV)";var g=this;WAVE.extend(g,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var f=a.DIV,k={wvTreeNode:a.wvTreeNode||c.CLS_TREE_NODE,wvTreeNodeButtonExpanded:a.wvTreeNodeButtonExpanded||c.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:a.wvTreeNodeButtonCollapsed||c.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:a.wvTreeNodeContent||c.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:a.wvTreeNodeOwn||
c.CLS_TREE_NODE_OWN,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||c.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:a.wvTreeNodeChildren||c.CLS_TREE_NODE_CHILDREN},l=a.childrenDisplayVisible||"block",n=a.treeSelectionType||c.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof n)return n;n=a};this.selectedNodes=function(a){if("undefined"===typeof a)return q.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";q.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var t=!0===a.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return t;t=a};var q=new e;this.root=function(){return q}};var u=0;c.ObjectInspector=function(a,b){function d(b){for(var c=b.target.getAttribute("objpath").split(/\//),e=a,g=0;g<c.length-1;g++)e=e[c[g]];e[c[c.length-1]]=b.target.value}
function e(a,b,c){var g=Object.keys(b),h,k;for(k in g){var l=g[k],t=b[l];if(null!==t&&"object"!==typeof t){var n="objinsp_edit_"+u++;h=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:n,key:l,val:t,objpath:c?c+"/"+l:l,cls:f});h=a.addChild({html:h});n=WAVE.id(n);n.objpath=h.path();n.addEventListener("input",d)}else h=a.addChild({html:l}),e(h,t,c?c+"/"+l:l)}}WAVE.extend(this,WAVE.EventManager);var g=
new c.Tree({DIV:b.div});b=b||{};var f=b.wvObjectInspectorEditor||c.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(a){if("undefined"===typeof a)return f;f=a};e(g.root(),a,"")};c.MultiLineTextBox=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"MultiLineTextBox.ctor(init.DIV)";if(WAVE.strEmpty(a.id))throw"MultiLineTextBox.ctor(init.id)";var b=this;WAVE.extend(b,WAVE.EventManager);var d=a.DIV,e=a.id,g=WAVE.strAsBool(a.addLabel,!0),f="shdw_div_"+
e,h=WAVE.strDefault(a.placeholder),k=WAVE.strAsBool(a.readonly,!1),l=WAVE.strAsBool(a.disabled,!1),t=WAVE.strDefault(a.value);a=WAVE.tryParseJSON(a.attrs).obj;d.innerHTML=WAVE.strHTMLTemplate("<div id='@shdwDivId@' style='position: fixed;visibility: hidden;height: auto;width: auto;'></div>"+(g?"<label for='@id@'>@placeholder@</label>":"")+"<textarea id='@id@' @disabled@ @readonly@ style='resize: none' placeholder='@placeholder@' title='@placeholder@'></textarea>",{shdwDivId:f,id:e,disabled:l?"disabled":
"",readonly:k?"readonly":"",placeholder:h});var n=WAVE.id(e),q=WAVE.id(f);n.onresize=function(){q.style.maxWidth=WAVE.styleOf(n,"width")};n.style.overflow="hidden";for(var v in a)n.setAttribute(v,a[v]);q.innerText=n.value=t;q.style.maxWidth=WAVE.styleOf(n,"width");q.style.font=WAVE.styleOf(n,"font");q.style.minHeight=WAVE.styleOf(n,"height");q.style.paddingTop=WAVE.styleOf(n,"padding-top");q.style.paddingRight=WAVE.styleOf(n,"padding-right");q.style.paddingBottom=WAVE.styleOf(n,"padding-bottom");
q.style.paddingLeft=WAVE.styleOf(n,"padding-left");q.style.wordWrap=WAVE.styleOf(n,"word-wrap");q.style.wordSpacing=WAVE.styleOf(n,"word-spacing");q.style.whiteSpace=WAVE.styleOf(n,"white-space");q.style.borderSpacing=WAVE.styleOf(n,"border-spacing");q.style.letterSpacing=WAVE.styleOf(n,"letter-spacing");q.style.lineHeight=WAVE.styleOf(n,"line-height");q.style.boxSizing=WAVE.styleOf(n,"box-sizing");q.style.border=WAVE.styleOf(n,"border");q.style.borderWidth=WAVE.styleOf(n,"border-width");q.style.borderRadius=
WAVE.styleOf(n,"border-radius");q.style.textIndent=WAVE.styleOf(n,"text-indent");var m=function(a){q.innerText=WAVE.strEmpty(a.value)?"W":a.value.replace(/\r\n|\r|\n/g,"\n ");a.style.height=q.clientHeight+"px"};n.onchange=function(a){m(this);q.style.maxWidth=WAVE.styleOf(n,"width");b.eventInvoke(c.EVT_MULTI_LINE_TEXT_UPDATED,{phase:c.EVT_PHASE_AFTER,target:a.target,value:this.value})};n.onkeydown=n.onkeyup=function(a){m(this)};m(n);return b};var w=0;c.PropSetEditor=function(a){function b(a,d){return WAVE.strLocalize(X,
"PSEditor","ps",WAVE.strDefault(A[a],d))}function d(){var a=[],b;for(b in J)WAVE.has(q,J[b])||a.push(J[b]);return a}function e(){n.innerHTML=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divEditorsContainerId@' class='@divEditorsContainerClass@'></div>"+(m||r?"":(u?"<input type='button' id='@btnAddId@' class='@btnAddClass@' value='@add@' />":"")+(p?"<input type='button' id='@btnRawId@' class='@btnRawClass@' value='@raw@' />":"")+(x?"<input type='button' id='@btnClearId@' class='@btnClearClass@' value='@clear@' />":
"")),{outerId:F.outputHiddenId,outerName:WAVE.strDefault(v,""),divEditorsContainerId:F.divEditorsContainerId,divEditorsContainerClass:c.CLS_PS_DIV_LANGS_CONTAINER,btnAddId:F.btnAddId,btnAddClass:G.addBtnCls,btnRawId:F.btnRawId,btnRawClass:G.rawBtnCls,btnClearId:F.btnClearId,btnClearClass:G.clearBtnCls,add:A.btnAdd,raw:A.btnRaw,clear:A.btnClear});m||r||!u||0!==d().length||(WAVE.id(F.btnAddId).disabled=!0);m||r||(u&&0<d().length&&(WAVE.id(F.btnAddId).onclick=function(){var a=this,b=d(),e="",g;for(g in b)e+=
"<option>"+b[g]+"</option>";var f="newIso_"+D;c.showConfirmationDialog(l()+A.addTitle,"<div>"+A.addBody+"</div><div><select class='"+c.CLS_PS_LANG_SELECTOR+"' id='"+f+"'>"+e+"</select></div>",[c.DLG_OK,c.DLG_CANCEL],function(d,e){if(e===c.DLG_OK){var g=WAVE.id(f).value;t.addLang(g);1===b.length&&(a.disabled=!0)}return!0},{btnCls:G.modalBtnCls});WAVE.id(f).focus()}),p&&(WAVE.id(F.btnRawId).onclick=function(){var a="raw"+D;c.showConfirmationDialog(l()+A.rawTitle,"<div>"+A.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+
c.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[c.DLG_OK,c.DLG_CANCEL],function(b,d){if(d===c.DLG_OK){var e=WAVE.id(a).value,g=WAVE.tryParseJSON(e);if(g.ok){if(WAVE.checkKeysUnique(g.obj))return c.toast(WAVE.strLocalize(X,"PSEditor","ps","JSON is valid, but some keys are duplicated"),"error"),!1;t.content(e)}else return c.toast(WAVE.strLocalize(X,"PSEditor","ps","Invalid JSON"),"error"),!1}return!0},{btnCls:G.modalBtnCls});WAVE.id(a).value=t.content();WAVE.id(a).focus()}),
x&&(WAVE.id(F.btnClearId).onclick=function(){c.showConfirmationDialog(l()+A.clearConfirmTitle,"<div>"+A.clearConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(a,b){b===c.DLG_OK&&t.clear();return!0},{btnCls:G.modalBtnCls})}))}function g(a){var b=D+"_"+a,d=WAVE.id(F.divEditorsContainerId),e=F.divDeleteButtonId+"_"+a,f=F.divLangNameId+"_"+a,h=F.divTextTemplateId+"_"+a;d.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate("<fieldset id='@langId@'><legend id='@isoLabelId@' class='@langClass@'></legend><div class='@textEditorsContainerClass@' id='@controlContainerId@'></div>"+
(!x||m||r?"":"<input type='button' id='@deleteButtonId@' class='@delCls@' value='@delText@'/>")+"</fieldset>",{langId:b,controlContainerId:h,deleteButtonId:e,isoLabelId:f,langClass:c.CLS_PS_DIV_LANG_NAME,labelContainerClass:c.CLS_PS_LABEL_CONTAINER,textEditorsContainerClass:c.CLS_PS_INPUT_CONTAINER,delCls:G.delBtnCls,disabled:r?"disabled":"",readonly:m?"readonly":"",delText:A.btnDel}));WAVE.id(f).innerText=a;(new c.ObjectEditor({DIV:WAVE.id(h),meta:{type:"object",schema:L},content:q[a],disabled:r,
readonly:m})).eventBind(c.EVT_OBJECT_EDITOR_UPDATED,function(b,d){q[a]=d;t.content(JSON.stringify(q),!1)});!x||m||r||(WAVE.id(e).onclick=function(){c.showConfirmationDialog(l()+A.delConfirmTitle+" : "+a.toUpperCase(),"<div>"+A.delConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(b,d){d===c.DLG_OK&&t.deleteLang(a);return!0},{btnCls:G.modalBtnCls})})}function f(){if(WAVE.isObject(q))for(var a in q)g(a)}function h(){for(;n.hasChildNodes();)n.removeChild(n.lastChild);e();f();k()}function k(){null!==
v&&(WAVE.id(F.outputHiddenId).value=t.content())}function l(){return WAVE.strEmpty(y)?"":y+": "}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"PropSetEditor.ctor(init.DIV)";var t=this;WAVE.extend(t,WAVE.EventManager);w++;var n=a.DIV,q=WAVE.memberClone(WAVE.tryParseJSON(a.content).obj),v=WAVE.strDefault(a.outputFormFieldName,null),m=WAVE.strAsBool(a.readonly,!1),r=WAVE.strAsBool(a.disabled,!1),p=WAVE.strAsBool(a.canRaw,!0),u=WAVE.strAsBool(a.canAdd,!0),x=WAVE.strAsBool(a.canDel,
!0),J=WAVE.mergeArrays(["eng"],a.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),X=WAVE.strDefault(a.local,"eng"),y=WAVE.strDefault(a.title),L=WAVE.get(a,"schema",{n:{type:"text",plh:"Name"},d:{type:"textarea",plh:"Description"}}),G=WAVE.get(a,"btnClasses",{});G.addBtnCls=WAVE.strDefault(G.addBtnCls,c.CLS_PS_BTN_ADD);G.delBtnCls=WAVE.strDefault(G.delBtnCls,c.CLS_PS_BTN_DEL);G.rawBtnCls=WAVE.strDefault(G.rawBtnCls,c.CLS_PS_BTN_RAW);G.clearBtnCls=WAVE.strDefault(G.clearBtnCls,
c.CLS_PS_BTN_CLEAR);G.modalBtnCls=WAVE.strDefault(G.modalBtnCls,"");var D="ps_"+w,F={btnAddId:"addLang_"+D,btnRawId:"rawEdit_"+D,btnClearId:"clearBtn_"+D,divTextTemplateId:"textTemplate_"+D,divEditorsContainerId:"divEditorsContainer_"+D,divDeleteButtonId:"deleteButtonId_"+D,inputId:"_inputId_"+D,divLangNameId:"islLabel_"+D,outputHiddenId:"hidden_"+D},A=WAVE.get(a,"texts",{});A.addTitle=b("add-title","Add New Language");A.addBody=b("add-body","");A.rawTitle=b("raw-title","Raw Edit");A.rawBody=b("raw-body");
A.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");A.clearConfirmBody=b("clear-confirm-body","Clear all language data?");A.delConfirmTitle=b("del-confirm-title","Confirm Delete");A.delConfirmBody=b("del-confirm-body");A.btnDel=b("btn-del","Delete");A.btnAdd=b("btn-add","Add");A.btnRaw=b("btn-raw","Edit Raw");A.btnClear=b("btn-clear","Clear");e();this.DIV=function(){return n};this.jsonContent=function(){return q};this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(q)?"":
JSON.stringify(q,null,2);var d=WAVE.tryParseJSON(a);if(d.ok){if(b=WAVE.strAsBool(b,!0))for(var e in q)WAVE.removeElem(D+"_"+e);q=WAVE.memberClone(d.obj);b&&f();k();t.eventInvoke(c.EVT_PS_EDITOR_UPDATED,q)}return a};this.title=function(a){if("undefined"===typeof a)return y;y=WAVE.strDefault(a)};this.enable=function(a){if("undefined"===typeof a)return!r;r=!0!==a;h();return a};this.readOnly=function(a){if("undefined"===typeof a)return m;m=!0===a;h();return a};this.canAdd=function(a){if("undefined"===
typeof a)return u;u=!0===a;h();return a};this.canDel=function(a){if("undefined"===typeof a)return x;x=!0===a;h();return a};this.canRaw=function(a){if("undefined"===typeof a)return p;p=!0===a;h();return a};this.addLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(WAVE.has(q,a))return!1;q[a]={};g(a);t.content(JSON.stringify(q));return!0};this.deleteLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(!WAVE.has(q,a))return!1;delete q[a];WAVE.removeElem(D+"_"+a);m||r||(WAVE.id(F.btnAddId).disabled=
!1);t.content(JSON.stringify(q));return!0};this.clear=function(){m||r||(WAVE.id(F.btnAddId).disabled=!1);t.content("{}")};h();return t};var l=0;c.ObjectEditor=function(a){function b(a,d){return WAVE.strLocalize(y,"ObjectEditor","objEd",WAVE.strDefault(D[a],d))}function d(a,b,e,g,h,k,l,t){a=a(f,e,g);a.ok?(t(),f.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:c.EVT_PHASE_AFTER,target:b})):(l(),f.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:c.EVT_PHASE_AFTER,target:b}));return a}
function e(){L=[];k.innerHTML=WAVE.strHTMLTemplate("<div id='@contId@'></div><div id='@buttonsId@'></div>",{contId:G.editorContainerId,buttonsId:G.buttonsContainerId});var a=WAVE.id(G.editorContainerId),b=WAVE.id(G.buttonsContainerId);if("array"===n){if(WAVE.isArray(m))for(var d=0;d<m.length;d++)g(d,a)}else for(d in q)new F(d,a);"array"!==n||!x||r||p||WAVE.isArray(m)&&!(m.length<J)||(a="add_"+h,b.insertAdjacentHTML("beforeend","<input type='button' value='"+D.btnAdd+"' id='"+a+"' class='"+A.addBtnCls+
"'/>"),WAVE.id(a).onclick=function(){WAVE.isArray(m)||(m=[]);m.push({});f.content(m,!0);f.validate()});u&&(b.insertAdjacentHTML("beforeend","<input type='button' value='"+D.btnRaw+"' id='"+G.btnRawId+"' class='"+A.addBtnCls+"'/>"),WAVE.id(G.btnRawId).onclick=function(){var a="raw"+h;c.showConfirmationDialog(D.rawTitle,"<div>"+D.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+c.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[c.DLG_OK,c.DLG_CANCEL],
function(b,d){if(d===c.DLG_OK){var e=WAVE.id(a).value,g=WAVE.tryParseJSON(e);if(g.ok){if("array"!==n&&WAVE.checkKeysUnique(g.obj))return c.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","JSON is valid, but some keys are duplicated"),"error"),!1;f.content(e,!0)}else return c.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","Invalid JSON"),"error"),!1}return!0},{btnCls:A.modalBtnCls});WAVE.id(a).value=f.content();WAVE.id(a).focus()})}function g(a,b){var d=WAVE.memberClone(t);d.type="object";for(var e in d.schema)d.schema[e].index=
a;var h=G.editorContainerId+"_"+a;e="del"+h;b.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(aa,{divCLS:c.CLS_OBJECT_EDITOR_ARRAY_ITEM,divId:h,BtnId:e,BtnCls:A.delBtnCls,delText:D.btnDel,arrSep:c.CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR}));d=new c.ObjectEditor({DIV:WAVE.id(h),content:m[a],meta:d,disabled:p,readonly:r});d.eventBind(c.EVT_OBJECT_EDITOR_UPDATED,function(b,d){m[a]=d;f.content(m)});d.eventBind(c.EVT_OBJECT_EDITOR_VALIDATION_ERROR,function(a,b){f.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_ERROR,
{phase:c.EVT_PHASE_AFTER,target:b.target})});d.eventBind(c.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,function(a,b){f.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:c.EVT_PHASE_AFTER,target:b.target})});var d=d.validators(),k;for(k in d)L.push(d[k]);!w||r||p||(WAVE.id(e).onclick=function(){c.showConfirmationDialog(D.delConfirmTitle,"<div>"+D.delConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(b,d){d===c.DLG_OK&&(m.splice(a,1),f.content(m,!0));return!0},{btnCls:A.modalBtnCls})})}if("undefined"===
typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"ObjectEditor.ctor(init.DIV)";var f=this;WAVE.extend(f,WAVE.EventManager);l++;var h="wvObjEditor_"+l,k=a.DIV,t=WAVE.get(a,"meta",{}),n=WAVE.strDefault(t.type,"text"),q=WAVE.get(t,"schema",{});WAVE.strDefault(t.plh);WAVE.mergeArrays([],t.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()});var v=t.dflt,m=WAVE.get(a,"content","undefined"!==typeof v?v:{}),r=WAVE.strAsBool(a.readonly,!1),p=WAVE.strAsBool(a.disabled,
!1),u=WAVE.strAsBool(a.canRaw,!1)&&!r&&!p,w=WAVE.strAsBool(a.canDel,!0)&&!r&&!p,x=WAVE.strAsBool(a.canAdd,!0)&&!r&&!p,J=WAVE.intValidPositive(t.maxLength)?t.maxLength:2,X=WAVE.strDefault(a.outputFormFieldName,""),y=WAVE.strDefault(a.local,"eng"),L=[],G={editorContainerId:"edit_cont_"+h,buttonsContainerId:"edit_buttons_"+h,inputId:"edit_input_"+h,outputHiddenId:"edit_conf_out_"+h,btnRawId:"edit_raw_"+h,btnDelId:"edit_del_"+h},D=WAVE.get(a,"texts",{});D.addTitle=b("add-title","Add New Language");D.addBody=
b("add-body","");D.rawTitle=b("raw-title","Raw Edit");D.rawBody=b("raw-body");D.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");D.clearConfirmBody=b("clear-confirm-body","Clear all language data?");D.delConfirmTitle=b("del-confirm-title","Confirm Delete");D.resetConfirmTitle=b("reset-confirm-title","Confirm Reset");D.delConfirmBody=b("del-confirm-body");D.resetConfirmBody=b("reset-confirm-body");D.btnDel=b("btn-del","Delete");D.btnAdd=b("btn-add","Add");D.btnRaw=b("btn-raw","Edit Raw");
D.btnClear=b("btn-clear","Clear");D.btnReset=b("btn-reset","Reset");D.required=b("err-meg","Required");var F=function(a,b){function e(){var b=qa();b.ok&&(m=WAVE.isObject(m)?m:{},m[a]=b.value,f.content(m))}var g=q[a],h=WAVE.get(g,"DIV",b),k=g.dflt,l=WAVE.get(m,a,k),t=WAVE.strDefault(g.type,"text");WAVE.get(g,"schema",{});var n=WAVE.strDefault(g.plh,""),v=WAVE.intValidPositiveOrZero(g.index)?g.index:-1,E=WAVE.mergeArrays([],g.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),
u=WAVE.isObject(g.items)?g.items:{},w=WAVE.strAsBool(g.disabled,p),H=WAVE.strAsBool(g.readonly,r),x=WAVE.strAsBool(g.canRaw,!1),xa=WAVE.strAsBool(g.canDel,!0),J=WAVE.strAsBool(g.canAdd,!0),X=WAVE.strAsBool(g.required,!1),A=WAVE.strDefault(g.cls),C=WAVE.strDefault(g.errMsg,X?D.required:""),I=WAVE.isFunction(g.showError)?g.showError:function(){WAVE.id(aa).innerText=C},S=WAVE.isFunction(g.hideError)?g.hideError:function(){WAVE.id(aa).innerText=""},F=WAVE.isFunction(g.validate)?g.validate:function(a,
b,d){a=!0;if(X){if("text"===t||"textarea"===t||"radio"===t||"combo"===t)a=!WAVE.strEmpty(b);if("array"===t||"multiple"===t)a=WAVE.isArray(b)&&0<b.length;if("object"===t||"ps"===t)a=WAVE.isObject(b)&&!WAVE.empty(b)}return{ok:a,value:b,index:d}},ta=a+G.editorContainerId,y=a+G.inputId,aa=ta+"_err",ka=null,z,ea,W,O,qa,ua;if("text"===t||"textarea"===t||"combo"===t||"check"===t)qa=function(){var a=WAVE.id(y);return d(F,a,"check"===t?a.checked:a.value,v,aa,C,I,S)};if("array"===t||"object"===t||"ps"===t)qa=
function(){return d(F,ka,ka.jsonContent(),v,aa,C,I,S)};if("radio"===t||"multiple"===t)qa=function(){W=document.getElementsByName(y);ea=W.length;ua=[];for(z=0;z<ea;z++)W[z].checked&&ua.push(W[z].value);return d(F,W,"multiple"===t?ua:0<ua.length?ua[0]:null,v,aa,C,I,S)};L.push(qa);var na="<div class='@nodeCont@'>"+(WAVE.strEmpty(n)?"":"<label class='@lblCls@' for='@labelFor@'>@plh@</label>")+"<div class='@errorDivCls@' id='@errorDivId@'></div><div id='@divId@' class='@ccCls@'></div></div>",B=w?"disabled":
"",R=H?"readonly":"";h.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(na,{nodeCont:c.CLS_OBJECT_EDITOR_NODE_CONTAIER+" "+A,labelFor:y,lblCls:X?"wvRequired":"",plh:n,errorDivCls:"wvError",errorDivId:aa,divId:ta,ccCls:"array"===t?c.CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"object"===t||"ps"===t?c.CLS_OBJECT_EDITOR_OBJECT_CONTAIER:c.CLS_OBJECT_EDITOR_INPUT_CONTAIER}));h=WAVE.id(ta);WAVE.id(aa);g={DIV:h,id:y,value:WAVE.strDefault(l),meta:g,content:l,disabled:w,readonly:H,addLabel:!1,placeholder:n,sets:E,
canRaw:x,canAdd:J,canDel:xa};if("textarea"===t)ka=new c.MultiLineTextBox(g),ka.eventBind(c.EVT_MULTI_LINE_TEXT_UPDATED,function(a,b){e()});else if("object"===t||"array"===t)ka=new c.ObjectEditor(g),ka.eventBind(c.EVT_OBJECT_EDITOR_UPDATED,function(a,b){e()});else if("ps"===t)ka=new c.PropSetEditor(g),ka.eventBind(c.EVT_PS_EDITOR_UPDATED,function(a,b){e()});else if("check"===t)h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='checkbox' placeholder='@plh@' title='@plh@' />",
{id:y,disabled:B,readonly:R,plh:n,value:WAVE.strDefault(l)}),k=WAVE.id(y),k.checked=WAVE.strAsBool(l,!1),k.onclick=function(a){e()};else if("multiple"===t){g="";for(O in u)k=y+"_+ "+O,g+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:k,name:WAVE.strDefault(u[O],O)}),g+=WAVE.strHTMLTemplate("<input type='checkbox' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:WAVE.isArray(l)&&WAVE.inArray(l,O)?"checked='checked'":"",name:y,value:O,id:k,disabled:B,
readonly:R});h.innerHTML=g;W=document.getElementsByName(y);ea=W.length;for(z=0;z<ea;z++)W[z].onclick=e}else if("radio"===t){g="";for(O in u)k=y+"_+ "+O,g+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:k,name:WAVE.strDefault(u[O],O)}),g+=WAVE.strHTMLTemplate("<input type='radio' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:l===O?"checked='checked'":"",name:y,value:O,id:k,disabled:B,readonly:R});h.innerHTML=g;W=document.getElementsByName(y);ea=W.length;
for(z=0;z<ea;z++)W[z].onclick=e}else if("combo"===t){g="<select id='@id@' @disabled@ @readonly@>";WAVE.strEmpty(k)&&(g+="<option value=''></option>");for(O in u)g+=WAVE.strHTMLTemplate("<option @selected@ value='@value@'>@text@</option>",{selected:l===O?"selected":"",value:O,text:WAVE.strDefault(u[O],O)});h.innerHTML=WAVE.strHTMLTemplate(g+"</select>",{id:y,name:WAVE.strDefault(n,O),disabled:B,readonly:H?"disabled":""});!WAVE.strEmpty(k)&&WAVE.strEmpty(m[a])&&(m[a]=k);WAVE.id(y).onchange=function(a){e()}}else"text"===
t&&(h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='text' placeholder='@plh@' title='@plh@' value='@value@'/>",{id:y,disabled:B,readonly:R,plh:n,value:WAVE.strDefault(l)}),WAVE.id(y).onchange=function(a){e()});qa()},A=WAVE.get(a,"btnClasses",{});A.addBtnCls=WAVE.strDefault(A.addBtnCls,c.CLS_PS_BTN_ADD);A.delBtnCls=WAVE.strDefault(A.delBtnCls,c.CLS_PS_BTN_DEL);A.rawBtnCls=WAVE.strDefault(A.rawBtnCls,c.CLS_PS_BTN_RAW);A.clearBtnCls=WAVE.strDefault(A.clearBtnCls,c.CLS_PS_BTN_CLEAR);
A.modalBtnCls=WAVE.strDefault(A.modalBtnCls,"");this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(m)?"":JSON.stringify(m,null,2);var d=WAVE.tryParseJSON(a);d.ok&&(m=d.obj,""!==X&&(WAVE.id(G.outputHiddenId).value=f.content()),f.eventInvoke(c.EVT_OBJECT_EDITOR_UPDATED,m),!0===b&&e());return a};this.jsonContent=function(){return m};this.maxLength=function(){return J};this.DIV=function(){return k};this.validate=function(){var a=[],b=!0,d;for(d in L){var c=L[d](),b=b&&c.ok;a.push(c)}return{ok:b,
result:a}};this.validators=function(){return L};var aa="<div class='@divCLS@' id='@divId@'></div>"+(!w||r||p?"":"<input type='button' id='@BtnId@' class='@BtnCls@' value='@delText@'/>")+"<div class='@arrSep@'></div>";e()};var J=0;c.Tabs=function(a){function b(a){for(var d=null,c=0;c<l.length;c++){var e=l[c];e.name()===a?(d=a,e.activate()):e.deactivate()}return d}function d(a){for(var b=0;b<l.length;b++)if(l[b].name()===a)return l[b];return null}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||
null===a.DIV)throw"Tabs.ctor(init.DIV)";var e=this;WAVE.extend(e,WAVE.EventManager);J++;var g="wvTabs_"+J,f=a.DIV,h=WAVE.styleOf(f,"display"),k=WAVE.strAsBool(a.unswitchable,!1),t=WAVE.strAsBool(a.parse,!1),l=WAVE.isArray(a.tabs)?a.tabs:[],n=0,q=function(a){n++;a=WAVE.isObject(a)?a:{};var b=this,d=WAVE.strDefault(a.title,n.toString()),k=WAVE.strDefault(a.content),t=WAVE.strAsBool(a.isHtml,!0),q=WAVE.strAsBool(a.isActive,!1),v=WAVE.strDefault(a.id,g+"_"+n),r=WAVE.strDefault(a.name,n.toString()),E=
WAVE.strAsBool(a.visible,!0),p=WAVE.strDefault(a.cls),u=WAVE.get(a,"cont",null),w=WAVE.get(a,"li",null),x;this.build=function(a,b){a&&(null===w&&(WAVE.id(m.ulTabsId).insertAdjacentHTML("beforeend","<li id='"+v+"'></li>"),w=WAVE.id(v)),w.innerText=d,w.onclick=function(){e.tabActive(r)},b&&(x=WAVE.styleOf(w,"display")));if(null===u){var g="content_"+v;WAVE.id(m.divContentContId).insertAdjacentHTML("beforeend","<div id='"+g+"' class='"+c.CLS_TABS_CONTENT_DIV+" "+p+"'></div>");u=WAVE.id(g);t?u.innerHTML=
k:u.innerText=k}w.style.display=E?x:"none";WAVE.addClass(u,E&&q?c.CLS_TABS_CONTENT_DIV_SHOWN:c.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(u,E&&q?c.CLS_TABS_CONTENT_DIV_HIDDEN:c.CLS_TABS_CONTENT_DIV_SHOWN)};this.activate=function(){q=!0;WAVE.addClass(u,c.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(u,c.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.addClass(w,c.CLS_TABS_ACTIVE_TAB)};this.deactivate=function(){q=!1;WAVE.addClass(u,c.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(u,c.CLS_TABS_CONTENT_DIV_SHOWN);
WAVE.removeClass(w,c.CLS_TABS_ACTIVE_TAB)};this.destroy=function(){return WAVE.removeElem(u.id)&&WAVE.removeElem(w.id)};this.name=function(){return r};this.tab=function(){return w};this.cont=function(){return u};this.isActive=function(a){if("undefined"===typeof a||null===a)return q;q=a};this.content=function(a){if("undefined"===typeof a||null===a)return k;k=a;t?u.innerHTML=k:u.innerText=k};this.title=function(a){if("undefined"===typeof a||null===a)return d;d=a;w.innerText=d};this.visible=function(a){if("undefined"===
typeof a||null===a)return E;E=!0===a;b.build(!1,!0);a=!0;for(var d=0,c=l.length;d<c;d++){var g=l[d];g.visible()&&l[d].name()!==r&&(q&&!E&&e.tabActive(g.name()),a=!1)}a?(h=WAVE.styleOf(f,"display"),f.style.display="none"):f.style.display=h};this.titleCtrl=function(){return w};this.contentCtrl=function(){return u};return b};for(a=0;a<l.length;a++)l[a]=new q(l[a]);var m={divTabsContId:"tabs_cont_"+g,divContentContId:"content_cont_"+g,ulTabsId:"ul_tabs_ "+g};this.DIV=function(){return f};this.tabs=function(){return l};
this.unswitchable=function(a){if("undefined"===typeof a)return k;k=!0===a;for(var b=0;b<l.length;b++){var d=l[b];k?l[b].isActive()||(d.tab().className+=" "+c.CLS_TABS_LI_DISABLED):WAVE.removeClass(d.tab(),c.CLS_TABS_LI_DISABLED)}return a};this.tabByName=function(a){return"undefined"===typeof a||null===a?null:d(a)};this.tabAdd=function(a){var b={phase:c.EVT_PHASE_BEFORE,tabControl:e,tabInit:a,abort:!1};e.eventInvoke(c.EVT_TABS_TAB_ADD,b);if(!0!==b.abort)return a=new q(a),b=d(a.name()),null!==b&&(b.destroy(),
l.splice(l.indexOf(b),1)),l.push(a),a.build(!0,!1),(a.isActive()||null===e.tabActive())&&e.tabActive(a.name()),e.eventInvoke(c.EVT_TABS_TAB_ADD,{phase:c.EVT_PHASE_AFTER,tabControl:e,tab:a}),a};this.tabDelete=function(a){if("undefined"===typeof a||null===a)return!1;for(var d=!1,g=0;g<l.length;g++)if(l[g].name()===a){var f=l[g],h={phase:c.EVT_PHASE_BEFORE,tabControl:e,tab:f,abort:!1};e.eventInvoke(c.EVT_TABS_TAB_REMOVE,h);if(!0===h.abort)return d;d=f.destroy();l.splice(g,1);f.isActive()&&0<l.length&&
b(l[0].name());break}e.eventInvoke(c.EVT_TABS_TAB_REMOVE,{phase:c.EVT_PHASE_AFTER,tabControl:e,name:a,ok:d});return d};this.tabActive=function(a){var d=null;if("undefined"===typeof a||null===a)for(a=0;a<l.length;a++){if(l[a].isActive()){d=l[a].name();break}}else k||e.tabActive()===a||(d=b(a),e.eventInvoke(c.EVT_TABS_TAB_CHANGED,a));return d};this.tabContent=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=d(a);if(null===c)return null;if("undefined"===typeof b)return c.content();
c.content(b);return b};this.tabTitle=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=d(a);if(null===c)return null;if("undefined"===typeof b)return c.title();c.title(b);return b};this.tabVisible=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=d(a);if(null===c)return null;if("undefined"===typeof b)return c.visible();b=!0===b;c.visible(b);return b};(function(){var a,d,e;if(t){l=[];var g=f.getElementsByTagName("li");a=0;for(d=
g.length;a<d;a++){var h=g[a];e={};e.title=h.innerText;e.name=WAVE.strDefault(h.getAttribute("data-tabs-name"));WAVE.strEmpty(e.name)&&(e.name=null);e.isHtml=WAVE.strAsBool(h.getAttribute("data-tabs-isHtml"),!0);e.isActive=WAVE.strAsBool(h.getAttribute("data-tabs-isActive"),!1);e.visible=WAVE.strAsBool(h.getAttribute("data-tabs-visible"),!0);e.cont=WAVE.id(WAVE.strDefault(h.getAttribute("data-tabs-contId")));e.li=h;l.push(new q(e))}}else f.innerHTML=WAVE.strHTMLTemplate("<div id='@divTabsId@' class='@ulContainer@'><ul id='@ulId@' class='@ulClass@'></ul></div><div id='@divContId@' class='@divClass@'></div>",
{divTabsId:m.divTabsContId,divContId:m.divContentContId,ulId:m.ulTabsId,ulClass:c.CLS_TABS_UL,divClass:c.CLS_TABS_CONTENT_CONTAINER,ulContainer:c.CLS_TABS_UL_CONTAINER});if(0!==l.length){d=null;g=!1;for(a=0;a<l.length;a++)e=l[a],e.isActive()&&e.visible()&&(g?e.isActive(!1):(d=e.name(),g=!0)),e.build(!0,!1);if(!g)for(a=0;a<l.length;){if(l[a].visible()){d=l[a].name();l[a].isActive(!0);break}a++}null!==d&&b(d)}})();return e};var Y=0;c.Details=function(a){function b(){B&&setTimeout(function(){f()},K);
z&&(WAVE.addEventHandler(window,"focus",d),setTimeout(function(){WAVE.addEventHandler(window,"mousemove",e)},1));A&&setTimeout(function(){WAVE.addEventHandler(window,"click",d,!0)},1);R&&setTimeout(function(){WAVE.addEventHandler(window,"scroll",f)},1);Z&&setTimeout(function(){WAVE.addEventHandler(window,"resize",f)},1)}function d(a){var b=a.target,c="modal"===N&&null!==M?M.baseDIV():q;(null!==M&&a.target===M.baseDIV()||!WAVE.isParentOf(c,b))&&f()}function e(a){a=a.target;WAVE.isParentOf(q,a)||WAVE.isParentOf(n,
a)||f()}function g(a){WAVE.strEmpty(m)||(x?n.innerHTML=a:n.innerText=a)}function f(){if(!V){var a={phase:c.EVT_PHASE_BEFORE,abort:!1};k.eventInvoke(c.EVT_DETAILS_HIDE,a);!0!==a.abort&&(g(m),G&&WAVE.addEventHandler(n,"click",h),F&&WAVE.removeEventHandler(n,"click",f),"modal"===N&&null!==M?M.close():(WAVE.addClass(q,c.CLS_DETAILS_CONTENT_HIDDEN),WAVE.removeClass(q,c.CLS_DETAILS_CONTENT_VISIBLE)),WAVE.removeEventHandler(window,"focus",d),WAVE.removeEventHandler(window,"click",d,!0),WAVE.removeEventHandler(window,
"mousemove",e),WAVE.addClass(n,c.CLS_DETAILS_TITLE_HIDDEN),WAVE.removeClass(n,c.CLS_DETAILS_TITLE_SHOWN),setTimeout(function(){V=!0;k.eventInvoke(c.EVT_DETAILS_HIDE,{phase:c.EVT_PHASE_AFTER})},1))}}function h(){if(V){var a={phase:c.EVT_PHASE_BEFORE,abort:!1};k.eventInvoke(c.EVT_DETAILS_SHOW,a);!0!==a.abort&&(g(v),G&&WAVE.removeEventHandler(n,"click",h),F&&WAVE.addEventHandler(n,"click",f),"modal"===N?(M=new c.Dialog({cls:c.CLS_DETAILS_CONTENT+" "+y,body:r,onShow:function(a){b();WAVE.strEmpty(u)||
WAVE.ajaxCall("GET",u,null,function(b){null!==w?(b=w(b),WAVE.strEmpty(b)||a.content(b)):a.content(b)},console.error,console.error,p,p)},header:L}),q=M.bodyDIV(),WAVE.id(l+"close").onclick=f):(WAVE.removeClass(q,c.CLS_DETAILS_CONTENT_HIDDEN),WAVE.addClass(q,c.CLS_DETAILS_CONTENT_VISIBLE),b()),V=!1,WAVE.addClass(n,c.CLS_DETAILS_TITLE_SHOWN),WAVE.removeClass(n,c.CLS_DETAILS_TITLE_HIDDEN),k.eventInvoke(c.EVT_DETAILS_SHOW,{phase:c.EVT_PHASE_AFTER}))}}if("undefined"===typeof a||null===a)throw"Details.ctor(init)";
var k=this;WAVE.extend(k,WAVE.EventManager);var l="wvDetails_"+Y++,t,n,q,m=WAVE.strDefault(a.title),v=WAVE.strDefault(a.altTitle,m),r=WAVE.strDefault(a.content),u=WAVE.strDefault(a.contentUrl),p=WAVE.strDefault(a.contentType),w=WAVE.isFunction(a.loadCallback)?a.loadCallback:null,x=WAVE.strAsBool(a.isTitleHtml,!0),J=WAVE.strAsBool(a.isContentHtml,!0),y=WAVE.strDefault(a.modalCls,c.CLS_DETAILS_MODAL),L="<div class='wvDetailsHeader'>"+WAVE.strDefault(a.modalTitle)+"</div><div class='wvCloseDetails' id='"+
l+"close'></div>",G=WAVE.strAsBool(a.showOnClick,!0),D=WAVE.strAsBool(a.showOnFocus,!1),F=WAVE.strAsBool(a.hideOnTitle,!0),A=WAVE.strAsBool(a.hideOnClick,!0),z=WAVE.strAsBool(a.hideOnFocus,!1),B=WAVE.strAsBool(a.hideOnTimer,!1),R=WAVE.strAsBool(a.hideOnScroll,!1),Z=WAVE.strAsBool(a.hideOnResize,!1),N=WAVE.strDefault(a.mode,"swap"),P=WAVE.tryParseInt(a.timeout),K=P.ok?P.value:0,ca=l+"_title",Q=l+"_content",M=null,V=!1;WAVE.has(a,"DIV")&&(t=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);WAVE.has(a,"titleCtrl")&&
(n=WAVE.isString(a.titleCtrl)?WAVE.id(a.titleCtrl):a.titleCtrl);WAVE.has(a,"contentCtrl")&&(q=WAVE.isString(a.contentCtrl)?WAVE.id(a.contentCtrl):a.contentCtrl);this.hide=function(){f()};this.show=function(){h()};this.toggle=function(){V?h():f()};this.content=function(a){if("undefined"===typeof a||null===a)return r;a=r=a;J?q.innerHTML=a:q.innerText=a};(function(){if("undefined"!==typeof t&&null!==t)if(WAVE.addClass(t,c.CLS_DETAILS),"modal"===N)n||(t.innerHTML=WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span>",
{titleId:ca,titleClass:c.CLS_DETAILS_TITLE}),n=WAVE.id(ca),g(m));else{t.innerHTML=WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span><div id='@contId@' class='@contClass@'></div>",{titleId:ca,titleClass:c.CLS_DETAILS_TITLE,contId:Q,contClass:c.CLS_DETAILS_CONTENT});n=WAVE.id(ca);q=WAVE.id(Q);var a=r;J?q.innerHTML=a:q.innerText=a}else if(null!==n&&null!==q)WAVE.addClass(n,c.CLS_DETAILS_TITLE),WAVE.addClass(q,c.CLS_DETAILS_CONTENT);else throw"Details.build(unacceptable init)";
g(m);G&&WAVE.addEventHandler(n,"click",h);D&&(WAVE.addEventHandler(n,"mouseover",h),WAVE.addEventHandler(n,"focus",h));f()})();return k};var R=0;c.ImageView=function(a,b){function d(a){if("undefined"!==typeof a&&(h.clear(!0),null!==a))return WAVE.isObject(a)&&WAVE.has(a,"element")?(a.error||k.appendChild(a.element),e(a)):a=f(a,function(){this.className=c.CLS_IMAGE_VIEW_IMAGE;h.clear()&&k.appendChild(this);e(a)},function(){e(a)},b),a}function e(a){if("undefined"!==typeof k)if(k.className=c.CLS_IMAGE_VIEW,
a.error)k.className+=" "+c.CLS_IMAGE_BOX_ERROR;else if(a.load){var b=g(k),b=b.x/b.y;a=(a.width|0)/(a.height|0);isNaN(a)||(k.className+=" "+(a>=b?c.CLS_IMAGE_BOX_WIDER:c.CLS_IMAGE_BOX_HIGHER))}else k.className+=" "+c.CLS_IMAGE_BOX_LOADING}function g(a){return{x:a.offsetWidth,y:a.offsetHeight}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={DIV:a});if(!WAVE.has(a,"DIV"))throw"ImageView.ctor(init.thumbnails)";R++;var h=this;WAVE.extend(h,WAVE.EventManager);var k=function(a){var b=document.createElement("div");
b.className=c.CLS_IMAGE_VIEW;a.appendChild(b);z(b,function(a,d){var e,f;h.image();e=b;var k=0;for(f=0;null!==e;)k+=e.offsetLeft,f+=e.offsetTop,e=e.offsetParent;e=k;var k=g(b),t=a-e-k.x/2,n=d-f-k.y/2,k=g(l.element),t=t*l.width/k.x,n=n*l.height/k.y;if(l.width>k.x||l.height>k.y)b.className+=" "+c.CLS_IMAGE_VIEW_ZOOM,k=b.scrollHeight,b.scrollLeft=t+b.scrollWidth/2-(a-e),b.scrollTop=n+k/2-(d-f)},void 0,e,!0);return b}(WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV),l;h.image=function(a){"undefined"!==typeof a&&
(l=d(a));return l};h.clear=function(a){a&&(k.innerHTML="");return""===k.innerHTML};h.image(a.image);window.addEventListener("resize",function(){e(h.image()||{})},!1);return h};var P=0;c.Gallery=function(a){function b(a){var c;if(d(a.id))c=p[a.id],c.update(a);else{c=new n.Item(a,n,v);c.order=a.order|0;a:{a=u;for(var g=c,f=e,h=0,k=a.length,l=-1,t=0;h<k;)if(l=(h+k)/2|0,t=f(a[l],g),0>t)h=l+1;else if(0<t)k=l;else{for(;l<k&&0===f(a[l],g);)l++;a=l;break a}a=h}m.insertBefore(c.element(),WAVE.has(u,a)?u[a].element():
null);u.splice(a,0,c);p[c.id()]=c}return c}function d(a){return"undefined"===typeof a?!1:WAVE.has(p,a)}function e(a,b){return a.order-b.order}function g(a){return{x:a.offsetWidth,y:a.offsetHeight}}function h(a){function b(a){return a}var d=Date.now(),c=setInterval(function(){var e=(Date.now()-d)/(+a.duration||1E3);1<e&&(e=1);var g=a.step((a.delta||b)(e))||!0;1!==e&&g||clearInterval(c)},+a.delay||10)}function k(a,b,d,c,e){var g=a.scrollLeft,f=a.scrollTop;h({duration:d,delta:c,step:function(d){a.scrollLeft=
g+b.x*d;a.scrollTop=f+b.y*d;e&&e.call(a,d)}})}function l(a,b,d){return function(){var e={evt:b,phase:c.EVT_PHASE_BEFORE,args:arguments,abort:!1};a.eventInvoke(b,e);if(!0!==e.abort){var g=d.apply(a,arguments);e.result=g;e.phase=c.EVT_PHASE_AFTER;delete e.abort;a.eventInvoke(b,e);return g}}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={thumbnails:a});if(!WAVE.has(a,"thumbnails"))throw"Gallery.ctor(init.thumbnails)";var t=WAVE.has(a,"urls");if(t&&!WAVE.isObject(a.urls))throw"Gallery.ctor(init.urls)";
P++;var n=this;WAVE.extend(n,WAVE.EventManager);n.urls=t?a.urls:{};var q,m=function(a){function b(){e.className=c.CLS_GALLERY_PREV+(0===m.scrollLeft&&0===m.scrollTop?" "+c.CLS_GALLERY_DISABLED:"");f.className=c.CLS_GALLERY_NEXT+(m.scrollLeft+m.clientWidth===m.scrollWidth&&m.scrollTop+m.clientHeight===m.scrollHeight?" "+c.CLS_GALLERY_DISABLED:"")}var d=document.createElement("ul"),e=document.createElement("div"),f=document.createElement("div");d.className=c.CLS_GALLERY_LIST;e.className=c.CLS_GALLERY_PREV;
f.className=c.CLS_GALLERY_NEXT;e.onclick=function(a){a.preventDefault();a=g(d.firstChild);k(d,{x:-a.x,y:-a.y},400,void 0,b)};f.onclick=function(a){a.preventDefault();a=g(d.firstChild);k(d,a,400,void 0,b)};z(d,void 0,b,b);a.appendChild(e);a.appendChild(d);a.appendChild(f);window.addEventListener("resize",b,!1);q=b;return d}(WAVE.isString(a.thumbnails)?WAVE.id(a.thumbnails):a.thumbnails),v=WAVE.isString(a.preview)?new c.ImageView(a.preview,n.urls):a.preview,r,u=[],p={},w=0;n.Item=function(a,b,d){function e(a){v.innerHTML=
"";v.className=c.CLS_GALLERY_THUMBNAIL+" "+c.CLS_IMAGE_BOX_LOADING;n=f(a,function(){this.className=c.CLS_GALLERY_IMAGE;this.id=c.CLS_GALLERY_IMAGE+l.id();v.appendChild(this);v.className=c.CLS_GALLERY_THUMBNAIL+" "+(this.width>=this.height?c.CLS_IMAGE_BOX_WIDER:c.CLS_IMAGE_BOX_HIGHER)},function(){v.className=c.CLS_GALLERY_THUMBNAIL+" "+c.CLS_IMAGE_BOX_ERROR},b.urls);q()}var g=w++,h=WAVE.isObject(a)&&WAVE.has(a,"id")?a.id:g;a.id=h;var k={},l=this;WAVE.extend(l,WAVE.EventManager);var t,n,m=document.createElement("li"),
v=document.createElement("div"),r=document.createElement("div");m.className=c.CLS_GALLERY_ITEM;r.className=c.CLS_GALLERY_CONTENT;v.className=c.CLS_GALLERY_THUMBNAIL;m.appendChild(v);m.appendChild(r);m.onclick=function(){b.current(h)};l.id=function(){return h};l.title=function(a){"undefined"!==typeof a&&k.title!==a&&(a=k.title=a,v.title=a);return WAVE.strDefault(k.title,h)};l.content=function(a,b){if("undefined"!==typeof a&&(k.content!==a||!!k.isText!==!!b)){var d=k.content=a;(k.isText=!!b)?r.innerText=
d:r.innerHTML=d}return WAVE.strDefault(k.content)};l.isText=function(){return!!k.isText};l.image=function(a){if("undefined"!==typeof a&&!B(k.image,a)){a=k.image=a;var b=!1;"undefined"!==typeof t&&(b=t===d.image(),WAVE.has(t,"free")&&t.free());t=a;b&&l.show()}return t};l.thumb=function(a){"undefined"===typeof a||B(k.thumb,a)||e(k.thumb=a);return n};l.data=function(a){"undefined"!==typeof a&&(k.data=a);return k.data};l.show=function(){t=d.image(t)};l.update=function(a){if(!WAVE.isObject(a)||WAVE.has(a,
"url"))a={image:a};if(!WAVE.has(a,"image"))throw"Gallery.Item.update(init.image)";if(a.id!==h)throw"Gallery.Item.update(init.id)";l.image(a.image);l.thumb(a.thumb||a.image);l.title(a.title);l.content(a.content,a.isText);l.data(a.data)};l.free=function(){m.parentNode&&m.parentNode.removeChild(m);d.image()===t&&t.element.parentNode&&t.element.parentNode.removeChild(t.element)};l.element=function(){return m};l.update(a);return l};var x=l(n,c.EVT_GALLERY_CHANGE,function(a){if(d(a))return a=p[a],"undefined"!==
typeof r&&(r.element().className=c.CLS_GALLERY_ITEM),a.element().className=c.CLS_GALLERY_ITEM+" "+c.CLS_GALLERY_SELECTED,a.show(),a});n.current=function(a){"undefined"!==typeof a&&(a=x(a),"undefined"!==typeof a&&(r=a));if("undefined"!==typeof r)return r.id()};n.has=d;n.get=function(a){return p[a]};var J=l(n,c.EVT_GALLERY_REMOVE,function(a){if(!d(a))return!0;p[a].free();u=u.filter(function(b){return b.id()!==a});delete p[a];return!0});n.remove=function(a){return d(a)?!!J(a):!0};n.images=function(){return u};
n.update=l(n,c.EVT_GALLERY_ADD,b);WAVE.each(a.images,b);q();return n};c.GallerySimple=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"GallerySimple.ctor(init.DIV)";var b=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV,d=document.createElement("div");d.className=c.CLS_GALLERY_SIMPLE_PREVIEW;a.preview=new c.ImageView({DIV:d},a.urls);a.thumbnails=document.createElement("div");a.thumbnails.className=c.CLS_GALLERY_SIMPLE_THUMBNAILS;b.appendChild(a.thumbnails);
b.appendChild(d);return c.Gallery.call(this,a)};var N=0;c.ChainSelector=function(a){function b(a){a=r.indexOf(a.target.parentNode);a=f().slice(0,a+1);g(a)}function d(a,e){if(v||m)return!1;var c=r.length,g=p.selectBodyId+c.toString(),f=WAVE.strHTMLTemplate("<div id='@divComboWrapId@' class='@divComboWrapCls@' @disabled@ @readonly@><select id='@selectBodyId@'><option value=''></option>",{divComboWrapId:p.divComboWrapId+c.toString(),divComboWrapCls:u.divComboWrapCls,selectBodyId:g,disabled:v?"":"disabled",
readonly:m?"readonly":""});a.wEach(function(a){f+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:a.id,selected:WAVE.strSame(a.id,e)?"selected":"",descr:a.val})});var f=f+WAVE.strHTMLTemplate("</select><div id='@divArrowId@' class='@divArrowCls@'></div></div>",{divArrowId:p.divArrowId+c.toString(),divArrowCls:u.divArrowCls}),h=WAVE.id(p.divInfoId),k=document.createElement("div");k.innerHTML=f;k=k.firstChild;l.insertBefore(k,h);r[c]=k;WAVE.addEventHandler(WAVE.id(g),
"change",b);return k}function e(a){if(v||m)return!1;for(var d=0;d<a;d++){var c=r.pop();if(!WAVE.exists(c))break;WAVE.removeEventHandler(WAVE.id(p.selectBodyId+r.length.toString()),"change",b);l.removeChild(c)}}function g(a){if(v||m)return!1;WAVE.exists(a)||(a=[""]);WAVE.isString(a)&&(a=a.split("."));if(!WAVE.isArray(a))return!1;var b=WAVE.arrayWalkable(n),f=null,l,q,u=!0;e(r.length-a.length);0>=r.length&&d(b,"");for(var w in a){l=a[w];if(WAVE.strSame(l,"")){e(r.length-w);f=b;break}if(null===b){u=
!1;e(r.length-w);break}f=b.wFirst(function(a){return WAVE.strSame(a.id,l)});if(null===f){u=!1;e(r.length-w);f=b;break}q=f;f=WAVE.exists(q.children)?WAVE.arrayWalkable(q.children):null;WAVE.exists(r[w])?(b=WAVE.id(p.selectBodyId+w.toString()),WAVE.strSame(b.value,l)||(e(r.length-w-1),b.value=l)):(e(r.length-w),d(b,l));b=f}WAVE.exists(f)&&d(f,"");a=WAVE.id(p.divNameId);w=WAVE.exists(q)?WAVE.strDefault(q.name,""):"";a.innerText=WAVE.strSame(w,"")?"":"Name: "+w;q=WAVE.exists(q)?WAVE.strDefault(q.descr,
""):"";WAVE.id(p.divDescrId).innerText=WAVE.strSame(q,"")?"":"Description: "+q;null!==t&&(WAVE.id(p.outputHiddenId).value=k.value());k.eventInvoke(c.EVT_CHAIN_SELECTOR_UPDATED,h());return u}function f(){var a=[],b;for(b in r){var d=WAVE.id(p.selectBodyId+b.toString());a.push(d.value)}return a}function h(){var a=f().join(".");0<a.length&&WAVE.strSame(a[a.length-1],".")&&(a=a.substring(0,a.length-1));return a}if(!WAVE.exists(a))throw"ChainSelector.ctor(init=null)";var k=this;WAVE.extend(k,WAVE.EventManager);
N++;var l;WAVE.has(a,"DIV")&&(l=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);var t=WAVE.strDefault(a.outputFormFieldName,null);WAVE.strDefault(a.description);var n=WAVE.has(a,"values")&&WAVE.exists(a.values)&&WAVE.isArray(a.values)?a.values:[],q=WAVE.strDefault(a.path,""),m=WAVE.strAsBool(a.readonly,!1),v=WAVE.strAsBool(a.disabled,!1),r=[],u=WAVE.get(a,"classes",{});u.divWrapCls=WAVE.strDefault(u.divWrapCls,c.CLS_CHAIN_SELECTOR);u.divInfoCls=WAVE.strDefault(u.divInfoCls,c.CLS_CS_DIV_INFO);u.divNameCls=
WAVE.strDefault(u.divNameCls,c.CLS_CS_DIV_NAME);u.divDescrCls=WAVE.strDefault(u.divDescrCls,c.CLS_CS_DIV_DESCR);u.divComboWrapCls=WAVE.strDefault(u.divComboWrapCls,c.CLS_CS_DIV_COMBO_WRAP);u.divArrowCls=WAVE.strDefault(u.divArrowCls,c.CLS_CS_DIV_ARROW);a="cs_"+N;var p={divInfoId:"divInfo_"+a,divNameId:"divName_"+a,divDescrId:"divDescr_"+a,divComboWrapId:"divComboWrap_"+a+"_",selectBodyId:"selectBodyId"+a+"_",divArrowId:"divArrow_"+a+"_",outputHiddenId:"hidden_"+a};this.navigate=function(a){return g(a)};
this.path=function(){return f()};this.value=function(){return h()};(function(){if(WAVE.exists(l)){WAVE.addClass(l,u.divWrapCls);var a=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divInfoId@' class='@divInfoCls@'><div id='@divNameId@' class='@divNameCls@'></div><div id='@divDescrId@' class='@divDescrCls@'></div></div>",{outerId:p.outputHiddenId,outerName:WAVE.strDefault(t,""),divInfoId:p.divInfoId,divInfoCls:u.divInfoCls,divNameId:p.divNameId,divNameCls:u.divNameCls,
divDescrId:p.divDescrId,divDescrCls:u.divDescrCls});l.innerHTML=a;g(q)}})();return k};var L=0;c.Select=function(a,b){function d(a,b,e){a=document.createElement(a);a.id=b;WAVE.strEmpty(e)||(a.className=e);return a}function e(){var a={phase:c.EVT_PHASE_BEFORE,sender:w,abort:!1,refresh:!0};w.eventInvoke(c.EVT_SELECT_CLOSE,a);!0!==a.abort&&(null!==K&&(clearTimeout(K),K=null),!0===a.refresh&&(ya([M],""),A.value=""),P=!1,WAVE.addClass(R,c.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.removeClass(R,c.CLS_SELECT_DROPDOWN_SHOWN),
WAVE.removeEventHandler(window,"click",h),a.result=!1,a.phase=c.EVT_PHASE_AFTER,delete a.abort,w.eventInvoke(c.EVT_SELECT_CLOSE,a))}function g(){var a={phase:c.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(c.EVT_SELECT_OPEN,a);!0!==a.abort&&(P=!0,WAVE.addClass(R,c.CLS_SELECT_DROPDOWN_SHOWN),WAVE.removeClass(R,c.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.addEventHandler(window,"click",h),a.result=!0,a.phase=c.EVT_PHASE_AFTER,delete a.abort,w.eventInvoke(c.EVT_SELECT_OPEN,a))}function f(a){if("undefined"===
typeof a||null===a)a=!P;!0===a?g():e()}function h(a){WAVE.isParentOf(B,a.target)||e()}function l(a,b){return-1<a.value().toUpperCase().indexOf(b.toUpperCase())?!0:!1}function t(a,b){for(var d=0;d<a.length;d++){var e=a[d];if(null!==e){var c=e.children();if(0!==c.length||null!==e.value())0<c.length?t(c,b):e.visible(l(e,b))}}}function n(a){var b={phase:c.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(c.EVT_SELECT_UNSELECT,b);if(!0!==b.abort){if(Q===c.SELECT_MODES.Single)V={},fa=[];else{delete V[a.id()];
var d=fa.indexOf(a.id());-1<d&&fa.splice(d,1)}a.destroyView();Y.value=w.value();b.result=Y.value;b.phase=c.EVT_PHASE_AFTER;delete b.abort;w.eventInvoke(c.EVT_SELECT_UNSELECT,b)}}function q(a){var b={phase:c.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(c.EVT_SELECT_SELECT,b);if(!0!==b.abort){if(Q===c.SELECT_MODES.Single&&0<fa.length&&fa[0]!==a.id()){var d=V[fa[0]];d.isSelected(!1);d.destroyView();V={};fa=[]}V[a.id()]=a;fa.push(a.id());a.renderSelection(D,function(){a.isSelected(!1);n(a)});Y.value=
w.value();b.result=Y.value;b.phase=c.EVT_PHASE_AFTER;delete b.abort;w.eventInvoke(c.EVT_SELECT_SELECT,b)}}function m(a,b){if(b.phase!==c.EVT_PHASE_BEFORE){var d=b.sender.isSelected();Q===c.SELECT_MODES.Single?!d&&b.sender.isSelected(!0)&&(f(),q(b.sender)):d?b.sender.isSelected(!1)&&n(b.sender):b.sender.isSelected(!0)&&q(b.sender)}}function v(){M.eventUnbind(c.EVT_SELECT_CHOICE_CLICK,m);M.destroy();M=null}function r(a){var b="undefined"===typeof a||null===a;b&&null!==M?v():(fa=[],V={},null!==M&&v(),
b||(M=new x({data:a,DIV:N,builder:J,disable:ca}),M.eventBind(c.EVT_SELECT_CHOICE_CLICK,m)))}function u(a,b){var d=a.children(),e=d.length;if(0===e){if(a.trySetValue(b))return q(a),!0}else{for(var c=!1,g=0;g<e;g++)var f=u(d[g],b),c=c&&f;return c}}if(!WAVE.exists(a))throw"Select.ctor(init=null)";if(WAVE.strEmpty(a.DIV))throw"Select.ctor(init.DIV=null)";var p=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV;if(null===p)throw"Select.ctor(DIV=null)";var w=this,x=WAVE.isFunction(b)?b:c.Choice,J=WAVE.isFunction(a.choiceBuilder)?
a.choiceBuilder:null,y=null,z=WAVE.strDefault(a.formName),B=null,G=null,D=null,F=null,A=null,R=null,Y=null,Z=null,N=null,P=!1,ra=WAVE.strAsBool(a.autocomlete,!0),K=null,ca=WAVE.strAsBool(a.disable),Q=c.SELECT_MODES.Multi===a.mode?c.SELECT_MODES.Multi:c.SELECT_MODES.Single,M=null,V={},fa=[];WAVE.isFunction(a.match);var ya=WAVE.isFunction(a.filter)?a.filter:t,Na=WAVE.isFunction(a.updateData)?a.updateData:r,Oa=[9,16,17,18,19,20,27,37,38,39,40],ma="select_"+L++,Pa=ma+"_container",Da=ma+"_combobox",Ra=
ma+"_display",Sa=ma+"_autocomplete",Ta=ma+"_dropdown",Ua=ma+"_selection",Va=ma+"_autoContainer",Wa=ma+"_choicesContainer";WAVE.extend(w,WAVE.EventManager);w.selected=function(){return V};w.mode=function(){return Q};w.value=function(a){if("undefined"===typeof a){a="";for(var b in V)a+=V[b].key()+";";return a.slice(0,-1)}b=a.toString();if(null!==M){M.resetSelection();a=0;for(var d=fa.length;a<d;a++)V[fa[a]].destroyView();fa=[];V={};if(Q===c.SELECT_MODES.Single)u(M,b);else for(b=b.split(";"),a=0,d=b.length;a<
d;a++)u(M,b[a])}};w.data=function(a){if("undefined"===typeof a)return a;y=a;r(y)};w.updateData=function(a){Na(a)};w.filter=function(a){ya([M],"undefined"===typeof a?A.value:a)};w.hasChoice=function(){return null!==M};w.latchAllEvents=function(a){w.eventInvocationSuspendCount+=a;null!==M&&M.latchAllEvents(a)};(function(){var b=a.data;if("undefined"!==typeof b&&null!==b)if(WAVE.isString(b))if(b=WAVE.tryParseJSON(b),b.ok)y=b.obj;else throw"Select.ctor(init.data invalid JSON)";else y=a.data})();(function(){B=
d("div",Pa,c.CLS_SELECT_CONTAINER+" "+(Q===c.SELECT_MODES.Multi?c.CLS_SELECT_MODE_MULTI:c.CLS_SELECT_MODE_SINGLE));p.appendChild(B);Y=d("input",Ua);Y.type="hidden";B.appendChild(Y);WAVE.strEmpty(z)||(Y.name=z);G=d("div",Da,c.CLS_SELECT_COMBOBOX);B.appendChild(G);D=d("div",Ra,c.CLS_SELECT_DISPLAY);G.appendChild(D);F=document.createElement("div");F.className=c.CLS_SELECT_ARROW;G.appendChild(F);WAVE.addEventHandler(F,"click",function(){f()});R=d("div",Ta,c.CLS_SELECT_DROPDOWN+" "+c.CLS_SELECT_DROPDOWN_HIDDEN);
R.style.zIndex=5E5+k.length+1;B.appendChild(R);Z=d("div",Va,c.CLS_SELECT_AUTO_CONTAINER);R.appendChild(Z);N=d("div",Wa,c.CLS_SELECT_CHOICES_CONTAINER);R.appendChild(N);ra&&(A=d("input",Sa,c.CLS_SELECT_AUTOCOMPETE),A.placeholder="Start enter..",Q===c.SELECT_MODES.Single?Z.appendChild(A):G.appendChild(A),WAVE.addEventHandler(A,"keyup",function(a){-1<Oa.indexOf(a.keyCode)||(null!==K&&(clearTimeout(K),K=null),K=setTimeout(function(){ya([M],A.value);P||g()},800))}),WAVE.addEventHandler(A,"click",g));r(y)})();
return w};c.CLS_SELECT_CHOICE="wvChoice";c.CLS_SELECT_CHOICE_DISABLED="wvChoiceDisabled";c.CLS_SELECT_CHOICE_SELECTED="wvSelected";c.CLS_SELECT_CHOICE_PARENT="wvChoiceParent";c.CLS_SELECT_CHOICE_PARENT_LABELED="wvChoiceParentLabeled";c.CLS_SELECT_CHOICE_LABEL="wvChoiceLabel";c.CLS_SELECT_CHOICE_VALUE_BOX="wvChoiceValueBox";c.CLS_SELECT_CHOICE_UNSELECT="wvChoiseUnselect";c.EVT_SELECT_CHOICE_SELECTED="wv-choice-selected";c.EVT_SELECT_CHOICE_UNSELECTED="wv-choice-unselected";c.EVT_SELECT_CHOICE_CLICK=
"wv-choise-choice-click";var Z=0;c.Choice=function(a){function b(){if(!J)return!1;var a={phase:c.EVT_PHASE_BEFORE,sender:r,abort:!1};r.eventInvoke(c.EVT_SELECT_CHOICE_UNSELECTED,a);if(!0===a.abort)return!1;J=!1;WAVE.removeClass(A,c.CLS_SELECT_CHOICE_SELECTED);a.result=!1;a.phase=c.EVT_PHASE_AFTER;delete a.abort;r.eventInvoke(c.EVT_SELECT_CHOICE_UNSELECTED,a);return!0}function d(a,e){var g;if(0<p.length){for(var f=0,h=p.length;f<h;f++)g=WAVE.strEmpty(e)?g&&p[f].isSelected(a):g||p[f].trySetValue(e);
return g}if(!0!==a&&WAVE.strEmpty(e))return b();J?g=!1:(g={phase:c.EVT_PHASE_BEFORE,sender:r,abort:!1},r.eventInvoke(c.EVT_SELECT_CHOICE_SELECTED,g),!0===g.abort?g=!1:((J="undefined"===typeof e?!0:z===e)&&WAVE.addClass(A,c.CLS_SELECT_CHOICE_SELECTED),g.result=J,g.phase=c.EVT_PHASE_AFTER,delete g.abort,r.eventInvoke(c.EVT_SELECT_CHOICE_SELECTED,g),g=J));return g}function e(a,b){if(!0!==w){var d={phase:c.EVT_PHASE_BEFORE,sender:r,abort:!1};r.eventInvoke(c.EVT_SELECT_CHOICE_CLICK,d);!0!==d.abort&&(d.phase=
c.EVT_PHASE_AFTER,delete d.abort,r.eventInvoke(c.EVT_SELECT_CHOICE_CLICK,d))}}function g(a,b){r.eventInvoke(c.EVT_SELECT_CHOICE_SELECTED,b)}function f(a,b){r.eventInvoke(c.EVT_SELECT_CHOICE_UNSELECTED,b)}function h(a,b){r.eventInvoke(c.EVT_SELECT_CHOICE_CLICK,b)}function k(a){a.eventBind(c.EVT_SELECT_CHOICE_SELECTED,g);a.eventBind(c.EVT_SELECT_CHOICE_UNSELECTED,f);a.eventBind(c.EVT_SELECT_CHOICE_CLICK,h);p.push(a)}function l(a,b){var d=new c.Choice({data:a,DIV:b,builder:ra});k(d)}function t(a){pa(a,
r)}function n(){A=document.createElement("div");A.id=K;u.appendChild(A);WAVE.addEventHandler(A,"click",t);A.className=w?c.CLS_SELECT_CHOICE_DISABLED:c.CLS_SELECT_CHOICE;null!==N&&WAVE.addClass(A,N)}function q(a,b){n();D=A.innerHTML=b;z=a}function m(a,b){if("undefined"!==typeof a&&null!==a)if(WAVE.isString(a))q(a,a);else if(WAVE.isArray(a)){A=document.createElement("div");A.id=K;A.className=c.CLS_SELECT_CHOICE_PARENT;u.appendChild(A);for(var d=0;d<a.length;d++)l(a[d],A)}else if(WAVE.isObject(a)){var e=
Object.keys(a),g;if(1===e.length)d=e[0],e=a[d],WAVE.isString(e)||!WAVE.isMapOrArray(e)?q(d,e.toString()):(A=document.createElement("div"),A.id=K,A.className=c.CLS_SELECT_CHOICE_PARENT+" "+c.CLS_SELECT_CHOICE_PARENT_LABELED,u.appendChild(A),g=document.createElement("div"),g.className=c.CLS_SELECT_CHOICE_LABEL,g.innerHTML=d,A.appendChild(g),l(e,A));else for(d in A=document.createElement("div"),A.id=K,A.className=c.CLS_SELECT_CHOICE_PARENT+" "+c.CLS_SELECT_CHOICE_PARENT_LABELED,u.appendChild(A),a)g=
document.createElement("div"),g.className=c.CLS_SELECT_CHOICE_LABEL,g.innerHTML=d,A.appendChild(g),e=a[d],l(e,A)}else q(a.toString(),a.toString())}function v(){WAVE.removeEventHandler(R,"click",P);WAVE.removeElem(ca.unselect);WAVE.removeElem(ca.valueBox);P=null;y=!1}var r=this,u=a.DIV,p=[],w=WAVE.strAsBool(a.disable,!1),x=!0,J=!1,y=!1,L=a.data,z=WAVE.strEmpty(a.key)?null:a.key,D=WAVE.strEmpty(a.value)?null:a.value,B=null,A=null,R=null,Y=null,N=WAVE.strDefault(a.cls),P=null,pa=WAVE.isFunction(a.onclick)?
a.onclick:e,ra=a.builder,K="wv_choice_"+Z++,ca={unselect:K+"_unselect",valueBox:K+"_value"};WAVE.extend(r,WAVE.EventManager);r.disable=function(a){if("undefined"===typeof a||null===a)return null===w&&(w=0<p.length),w;w=WAVE.strAsBool(a,!0)};r.isSelected=function(a){return"undefined"===typeof a||null===a?J:d(a)};r.trySetValue=function(a){return"undefined"===typeof a||null===a?!1:d(null,a)};r.resetSelection=function(){if(0===p.length)d(!1);else for(var a=0,b=p.length;a<b;a++)p[a].resetSelection()};
r.visible=function(a){if("undefined"===typeof a||null===a)return x;if("undefined"===typeof a||null===a)a=!x;!0===a?x||(x=!0,A.style.display=null===Y?"block":Y):x&&(x=!1,null===Y&&(Y=WAVE.styleOf(A,"display")),A.style.display="none")};r.disable=function(){};r.id=function(){return K};r.key=function(){return z};r.value=function(){return D};r.children=function(){return p};r.elem=function(){return A};r.addChild=function(a){k(a)};r.renderSelection=function(a,b){if(J&&!0!==y&&"undefined"!==typeof a&&null!==
a){var d=WAVE.strHTMLTemplate("<div>@value@</div><div class='@clsUnselect@' id='@idUnselect@'>",{value:D,clsUnselect:c.CLS_SELECT_CHOICE_UNSELECT,idUnselect:ca.unselect});B=document.createElement("div");B.className=c.CLS_SELECT_CHOICE_VALUE_BOX;B.innerHTML=d;B.id=ca.valueBox;a.appendChild(B);R=WAVE.id(ca.unselect);P=function(){b(r)};y=!0;WAVE.addEventHandler(R,"click",P)}};r.destroyView=function(){v()};r.destroy=function(){v();WAVE.removeEventHandler(A,"click",t);WAVE.removeElem(K);r.eventUnbind(c.EVT_SELECT_CHOICE_SELECTED,
g);r.eventUnbind(c.EVT_SELECT_CHOICE_UNSELECTED,f);r.eventUnbind(c.EVT_SELECT_CHOICE_CLICK,h);for(var a=0;a<p.length;a++)p[a].destroy()};r.latchAllEvents=function(a){r.eventInvocationSuspendCount+=a;for(var b=0,d=p.length;b<d;b++)p[b].eventInvocationSuspendCount+=a};WAVE.isFunction(ra)?(n(),ra(r,L,A)):m(L,u);return r};return c}();
WAVE.RecordModel.GUI=function(){function p(a){var b=WAVE.genAutoincKey("__wv.rmgui");return"_"+a.recView().ID()+"_"+b}function m(a){var b=a.target;a=b.value;b=b.__fieldView.field();try{b.setGUIValue(a)}catch(e){WAVE.GUI.toast(WAVE.strHTMLTemplate("Wrong value for field '@about@'. Please re-enter or undo",{about:b.about()}),"error")}}function y(a){a=a.target;var b=a.value,e=a.__fieldView.field();e.readonly()?x(a.__fieldView):e.value(b,!0)}function B(a){a=a.target;var b=a.checked,e=a.__fieldView.field();
WAVE.id(a.__hiddenId).value=b?"true":"false";e.readonly()?x(a.__fieldView):e.value(b,!0)}function f(a){a=a.target;var b=a.__fieldView.field(),e=b.value();b.readonly()?a.value!==e&&(a.value=e):b.value(a.value,!0)}function z(a,b,e){WAVE.isString(a)&&(a=WAVE.id(a));var c=WAVE.ce("div"),g=WAVE.ce("div");g.setAttribute("id",b);c.appendChild(g);b=WAVE.ce("div");b.setAttribute("id",e);c.appendChild(b);WAVE.isObject(a)&&a.appendChild(c);return c}function c(a,b){WAVE.removeChildren(a);var e=a;WAVE.isString(e)&&
(e=WAVE.id(e));var c=WAVE.ce("nfx"),g=WAVE.ce("div");g.innerText=b.error;g.setAttribute("class",b.ec);c.appendChild(g);g=WAVE.ce("label");g.innerText=b.about;g.setAttribute("class",b.cls);c.appendChild(g);WAVE.isObject(e)&&e.appendChild(c);return c}function k(a){var e=a.field(),g=a.DIV(),f=WAVE.get(a,"@#$CHAIN_SELECTOR_GEN_ID$#@",null);null===f&&(f=p(a),a["@#$CHAIN_SELECTOR_GEN_ID$#@"]=f);a="divCS_"+f;var k="labelCont_"+f,t=WAVE.id(k),f=WAVE.id(a),n=e.validationError();if(null===t||null===f)z(g,k,
a),t=WAVE.id(k),f=WAVE.id(a);c(t,{ec:b.CLS_ERROR,error:n,about:e.about(),cls:(e.required()?b.CLS_REQ:"")+" "+(e.isGUIModified()?b.CLS_MOD:"")});g=e.lookupDict();g=WAVE.exists(g)?g.values:[];a=e.isNull()?"":e.value();(new WAVE.GUI.ChainSelector({DIV:f,outputFormFieldName:e.name(),classes:{divArrowCls:b.CLS_COMBO_ARROW,divComboWrapCls:b.CLS_COMBO_WRAP},path:a,disable:e.isEnabled()?!1:!0,readonly:e.readonly(),values:g})).eventBind(WAVE.GUI.EVT_CHAIN_SELECTOR_UPDATED,function(a,b){e.value(b,!0)})}function e(a){var e=
a.field(),g=a.DIV(),f=WAVE.get(a,"@#$PS_EDITOR_GEN_ID$#@",null);null===f&&(f=p(a),a["@#$PS_EDITOR_GEN_ID$#@"]=f);var k="divps_"+f,t="labelCont_"+f,n=WAVE.id(t),f=WAVE.id(k),q=e.validationError();if(null===n||null===f)z(g,t,k),n=WAVE.id(t),f=WAVE.id(k);c(n,{ec:b.CLS_ERROR,error:q,about:e.about(),cls:(e.required()?b.CLS_REQ:"")+" "+(e.isGUIModified()?b.CLS_MOD:"")});g=e.isNull()?"":e.value();k=WAVE.get(a,"@#$PS_EDITOR$#@",null);null===k&&(k=new WAVE.GUI.PropSetEditor({DIV:f,outputFormFieldName:e.name(),
langs:WAVE.LOCALIZER.allLanguageISOs(),content:g,disable:e.isEnabled()?!1:!0,readonly:e.readonly(),title:e.about()}),a["@#$PS_EDITOR$#@"]=k,k.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(a,b){e.value(b,!0)}))}function g(a,b){var e=a;WAVE.isString(e)&&(e=WAVE.id(e));var c=WAVE.ce("div"),g=WAVE.ce("div");g.innerText=b.error;g.setAttribute("class",b.ec);c.appendChild(g);g=WAVE.ce("div");g.setAttribute("id",b.id);g.setAttribute("class",b.cls);c.appendChild(g);g=WAVE.ce("input");g.setAttribute("id",
b.hId);g.setAttribute("type","hidden");g.setAttribute("name",b.name);g.setAttribute("value","");c.appendChild(g);WAVE.isObject(e)&&e.appendChild(c);return c}function t(a){if(!a.PUZZLE){var e=a.field(),c=a.DIV(),f=p(a),k="divPuzzle"+f,f="hiddenPuzzle"+f,t=e.validationError();g(c,{ec:b.CLS_ERROR,error:t,id:k,cls:b.CLS_PUZZLE,hId:f,name:e.name()});var c=e.value(),k=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(k),Image:WAVE.strDefault(c.Image,""),Help:WAVE.strDefault(c.Help,""),Question:WAVE.strDefault(c.Question,
"")}),n=WAVE.id(f);n.value=JSON.stringify(e.value());k.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){e.value().Answer=a.value();n.value=JSON.stringify(e.value())});a.PUZZLE=k}}function v(a,b){var e=a;WAVE.isString(e)&&(e=WAVE.id(e));var c=WAVE.ce("textarea");c.setAttribute("id",b.id);c.setAttribute("name",b.name);c.addEventListener("change",b.handler,!1);c.setAttribute("style","width:100%;height:100%;max-width:100%;max-height:100%;");WAVE.isObject(e)&&e.appendChild(c);return c}function r(a){function e(a){c.setGUIValue(a.target.value)}
var c=a.field(),g=a.DIV(),f=WAVE.get(a,"@#$MD_EDITOR_GEN_ID$#@",null);null===f&&(f=p(a),a["@#$MD_EDITOR_GEN_ID$#@"]=f);var k=c.validationError();if(a.__ve&&!k){var t=a.__ve.parentNode;t&&t.removeChild(a.__ve);a.__ve=null}if(!a.__tabs||k&&!a.__ve){var n="mde_text"+f,q="divMDETextContainer"+f,m="mde_preview"+f,t="tMDEText"+f,r="tMDEPreview"+f;WAVE.removeChildren(g);var x=(c.required()?b.CLS_REQ:"")+" "+(c.isGUIModified()?b.CLS_MOD:""),f=function(a){WAVE.isString(a)&&(a=WAVE.id(a));var b=WAVE.ce("label");
b.innerText=c.about();b.setAttribute("for",n);b.setAttribute("class",x);WAVE.isObject(a)&&a.appendChild(b);return b}();g.appendChild(f);null!==k&&(f=function(a){WAVE.isString(a)&&(a=WAVE.id(a));var d=WAVE.ce("div");d.innerText=k;d.setAttribute("class",b.CLS_ERROR);WAVE.isObject(a)&&a.appendChild(d);return d}(),g.appendChild(f),a.__ve=f);f=WAVE.ce("div");g.appendChild(f);g=new WAVE.GUI.Tabs({DIV:f,tabs:[{name:t,title:"Text",content:function(a){WAVE.isString(a)&&(a=WAVE.id(a));var b=WAVE.ce("div"),
d=WAVE.ce("div");d.setAttribute("id",q);d.setAttribute("style","height:100%;");b.appendChild(d);WAVE.isObject(a)&&a.appendChild(b);return b}().innerHTML},{name:r,title:"Preview",content:function(a){WAVE.isString(a)&&(a=WAVE.id(a));var b=WAVE.ce("div"),d=WAVE.ce("div");d.setAttribute("id",m);b.appendChild(d);WAVE.isObject(a)&&a.appendChild(b);return b}().innerHTML,isHtml:!0}]});a.__tabs=g;v(q,{id:n,name:c.name(),handler:e}).innerText=c.value();g.eventBind(WAVE.GUI.EVT_TABS_TAB_CHANGED,function(a,b){b===
r&&a.tabContent(r,WAVE.markup(WAVE.id(n).value))})}}function q(a,b){var e=a;WAVE.isString(e)&&(e=WAVE.id(e));var c=WAVE.ce("div");c.innerText=b.error;c.setAttribute("class",b.ec);WAVE.isObject(e)&&e.appendChild(c);return c}function n(a,e){var c=a.record(),g=a.DIV();if(e){var c=c.allValidationErrors(),f;for(f in c){var k=c[f];null!==k&&q(g,{ec:b.CLS_ERROR,error:k})}}else f=c.validationError(),null!==f&&q(g,{ec:b.CLS_ERROR,error:f})}function x(d){var c=b.getControlType(d);if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_CHECK)){a(d,
c);var g=d.field(),q=d.DIV(),l="chk"+p(d),v=g.validationError();WAVE.removeChildren(q);var x=b.CLS_ERROR,z=g.name(),P=WAVE.strAsBool(g.value())?"true":"false",N=g.about(),L=(g.required()?b.CLS_REQ:"")+" "+(g.isGUIModified()?b.CLS_MOD:""),Z=g.isEnabled()?"":"disabled",E=g.readonly()?"readonly":"",I=g.required()?"required":"",U=WAVE.strAsBool(g.value())?"checked":"",C=B,H=q;WAVE.isString(H)&&(H=WAVE.id(H));var sa=WAVE.ce("div");if(v){var ea=WAVE.ce("div");ea.innerText=v;ea.setAttribute("class",x);sa.appendChild(ea)}var na=
WAVE.ce("input");na.setAttribute("id","h_"+l);na.setAttribute("type","hidden");na.setAttribute("value",P);na.setAttribute("name",z);sa.appendChild(na);var O=WAVE.ce("label");O.innerText=N;O.setAttribute("for",l);O.setAttribute("class",L);sa.appendChild(O);var S=WAVE.ce("input");S.setAttribute("id",l);S.setAttribute("type","checkbox");S.disabled=Z;S.readOnly=E;S.required=I;S.checked=U;S.__fieldView=d;S.__hiddenId="h_"+l;S.addEventListener("change",C,!1);sa.appendChild(S);WAVE.isObject(H)&&H.appendChild(sa)}else if(WAVE.strSame(c,
WAVE.RecordModel.CTL_TP_CHAIN_SELECTOR))a(d,c),k(d);else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_RADIO)){a(d,c);var T=d.field(),W=d.DIV(),ab=T.lookupDict(),wa=Object.keys(ab),ba=T.validationError(),ta=p(d);WAVE.removeChildren(W);var xa=T.about(),ka=(T.required()?b.CLS_REQ:"")+" "+(T.isGUIModified()?b.CLS_MOD:""),ua=b.CLS_ERROR,X=T.name(),qa=T.isEnabled()?"":"disabled",oa=T.readonly()?"readonly":"",G=T.required()?"required":"",D=T.value(),F=W;WAVE.isString(F)&&(F=WAVE.id(F));var A=WAVE.ce("fieldset"),
aa=WAVE.ce("legend");aa.innerText=xa;aa.setAttribute("class",ka);A.appendChild(aa);if(ba){var va=WAVE.ce("div");va.innerText=ba;va.setAttribute("class",ua);A.appendChild(va)}for(var bb in wa){var la=wa[bb],pa=ab[la],ra="rbt"+ta+"_"+bb,K=WAVE.ce("input");K.setAttribute("id",ra);K.setAttribute("name",X);K.setAttribute("type","radio");K.disabled=qa;K.readOnly=oa;K.setAttribute("value",la);K.required=G;K.checked=WAVE.strSame(la,D)?"checked":"";K.__fieldView=d;K.addEventListener("change",y,!1);A.appendChild(K);
var ca=WAVE.ce("label");ca.innerText=pa;ca.setAttribute("for",ra);A.appendChild(ca)}WAVE.isObject(F)&&F.appendChild(A)}else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_NLS))a(d,c),e(d);else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_COMBO)){a(d,c);var Q=d.field(),M=d.DIV(),V="cbo"+p(d),fa="lbl"+V,ya=Q.validationError();WAVE.removeChildren(M);var Na=Q.about(),Oa=(Q.required()?b.CLS_REQ:"")+" "+(Q.isGUIModified()?b.CLS_MOD:""),ma=b.CLS_ERROR,Pa=Q.name(),Da=Q.value(),Ra=Q.isEnabled()?"":"disabled",Sa=Q.readonly()?
"readonly":"",Ta=WAVE.strEmpty(Q.placeholder())?"":Q.placeholder(),Ua=Q.required()?"required":"",Va=b.CLS_COMBO_WRAP,Wa=f,pb=Q.lookupDict(),db=Object.keys(Q.lookupDict()),ob=b.CLS_COMBO_ARROW,za=M;WAVE.isString(za)&&(za=WAVE.id(za));var Ea=WAVE.ce("div"),Fa=WAVE.ce("label");Fa.innerText=Na;Fa.setAttribute("for",V);Fa.setAttribute("class",Oa);Ea.appendChild(Fa);if(ya){var Xa=WAVE.ce("div");Xa.innerText=ya;Xa.setAttribute("class",ma);Ea.appendChild(Xa)}var Ga=WAVE.ce("div");Ga.setAttribute("class",
Va);var ha=WAVE.ce("select");ha.setAttribute("id",V);ha.setAttribute("name",Pa);ha.disabled=Ra;ha.readOnly=Sa;ha.setAttribute("value",Da);ha.setAttribute("placeholder",Ta);ha.required=Ua;ha.__fieldView=d;ha.addEventListener("change",Wa,!1);var eb=WAVE.ce("option");eb.setAttribute("value","");ha.appendChild(eb);for(var qb in db){var Ya=db[qb],Ha=WAVE.ce("option");Ha.innerText=pb[Ya];Ha.setAttribute("value",Ya);Ha.selected=WAVE.strSame(Ya,Da)?"selected":"";ha.appendChild(Ha)}Ga.appendChild(ha);var Qa=
WAVE.ce("div");Qa.setAttribute("id",fa);Qa.setAttribute("class",ob);Ga.appendChild(Qa);Ea.appendChild(Ga);WAVE.isObject(za)&&za.appendChild(Ea)}else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_PUZZLE))a(d,c),t(d);else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_TEXTAREA)||WAVE.strSame(c,WAVE.RecordModel.CTL_TP_SCRIPT)){a(d,c);var ga=d.field(),cb=d.DIV(),fb="tb"+p(d),gb=ga.validationError();WAVE.removeChildren(cb);var rb=ga.about(),sb=(ga.required()?b.CLS_REQ:"")+" "+(ga.isGUIModified()?b.CLS_MOD:""),
tb=b.CLS_ERROR,ub=ga.name(),vb=ga.isEnabled()?"":"disabled",wb=0>=ga.size()?"":ga.size(),xb=ga.readonly()?"readonly":"",hb=ga.isNull()?"":ga.displayValue(),yb=WAVE.strEmpty(ga.placeholder())?"":ga.placeholder(),zb=ga.required()?"required":"",Aa=cb;WAVE.isString(Aa)&&(Aa=WAVE.id(Aa));var Ia=WAVE.ce("div"),Ja=WAVE.ce("label");Ja.innerText=rb;Ja.setAttribute("for",fb);Ja.setAttribute("class",sb);Ia.appendChild(Ja);if(null!==gb){var Za=WAVE.ce("div");Za.innerText=gb;Za.setAttribute("class",tb);Ia.appendChild(Za)}var ia=
WAVE.ce("textarea");ia.innerText=hb;ia.setAttribute("id",fb);ia.setAttribute("name",ub);ia.disabled=vb;ia.setAttribute("maxlength",wb);ia.readOnly=xb;ia.setAttribute("value",hb);ia.setAttribute("placeholder",yb);ia.required=zb;ia.__fieldView=d;ia.addEventListener("change",m,!1);Ia.appendChild(ia);WAVE.isObject(Aa)&&Aa.appendChild(Ia)}else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_MARKDOWN))a(d,c),r(d);else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_HIDDEN)){a(d,c);var ib=d.DIV(),jb=d.field();WAVE.removeChildren(ib);
var Ab=jb.name(),Bb=jb.displayValue(),Ba=ib;WAVE.isString(Ba)&&(Ba=WAVE.id(Ba));var Ka=WAVE.ce("input");Ka.setAttribute("type","hidden");Ka.setAttribute("name",Ab);Ka.setAttribute("value",Bb);WAVE.isObject(Ba)&&Ba.appendChild(Ka)}else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_ERROR_REC))n(d,!1);else if(WAVE.strSame(c,WAVE.RecordModel.CTL_TP_ERROR_SUMMARY))n(d,!0);else{a(d,c);var da=d.field(),kb=d.DIV(),lb="tb"+p(d),mb=da.validationError(),nb=da.kind(),Cb=da.password()?"password":nb===WAVE.RecordModel.KIND_SCREENNAME?
"text":nb;WAVE.removeChildren(kb);var Db=da.about(),Eb=(da.required()?b.CLS_REQ:"")+" "+(da.isGUIModified()?b.CLS_MOD:""),Fb=b.CLS_ERROR,Gb=da.name(),Hb=da.isEnabled()?"":"disabled",Ib=0>=da.size()?"":da.size(),Jb=da.readonly()?"readonly":"",Kb=da.isNull()?"":da.displayValue(),Lb=WAVE.strEmpty(da.placeholder())?"":da.placeholder(),Mb=da.required()?"required":"",Ca=kb;WAVE.isString(Ca)&&(Ca=WAVE.id(Ca));var La=WAVE.ce("div"),Ma=WAVE.ce("label");Ma.innerText=Db;Ma.setAttribute("for",lb);Ma.setAttribute("class",
Eb);La.appendChild(Ma);if(mb){var $a=WAVE.ce("div");$a.innerText=mb;$a.setAttribute("class",Fb);La.appendChild($a)}var ja=WAVE.ce("input");ja.setAttribute("id",lb);ja.setAttribute("type",Cb);ja.setAttribute("name",Gb);ja.disabled=Hb;ja.setAttribute("maxlength",Ib);ja.readOnly=Jb;ja.setAttribute("value",Kb);ja.setAttribute("placeholder",Lb);ja.required=Mb;ja.__fieldView=d;ja.addEventListener("change",m,!1);La.appendChild(ja);WAVE.isObject(Ca)&&Ca.appendChild(La)}}function a(a,b){if(null===a.field())throw"The control type '"+
b+"' requires the field binding, but was bound to record";}var b={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle",CLS_COMBO_ARROW:"wvComboArrow",CLS_COMBO_WRAP:"wvComboWrap",getControlType:function(a){return a.getOrInferControlType()},buildFieldViewAnew:function(a){x(a)},eventNotifyFieldView:function(a,b,e,c){x(a)}};return b}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function p(c){return Math.log(c)/Math.LN10}var m={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},y=WAVE.Geometry;m.DataType={NUMBER:0,DATE:1};m.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32,STEP:64,STEP_SQUARE:128};m.SquareFillType={TOP:1,BOTTOM:2};m.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};m.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};m.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};m.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2,BY_STEP:3};var B=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,
15768E4,31536E4,63072E4,15768E5]);m.dvInfo=function(c,e,g,f,m){var r=c instanceof Date;this.isDate=function(){return r};var q=c;this.d0=function(a){"undefined"!==typeof a&&(q=a);return q};var n=e;this.d1=function(a){"undefined"!==typeof a&&(n=a);return n};var x=g;this.v0=function(a){"undefined"!==typeof a&&(x=a);return x};var a=f;this.v1=function(b){"undefined"!==typeof b&&(a=b);return a};var b=m;this.isLinear=function(a){"undefined"!==typeof a&&(b=a);return b};if(m){var d;r?(d=(e.getTime()-c.getTime())/
(f-g),this.d2v=function(a){return Math.floor(g+(a.getTime()-c.getTime())/d)},this.v2d=function(a){return new Date(Math.ceil(c.getTime()+(a-g)*d))}):(d=(e-c)/(f-g),this.d2v=function(a){return g+(a-c)/d},this.v2d=function(a){return c+(a-g)*d})}else{var h,u;r?(m=p(c.getTime()),e=p(e.getTime()),h=(f-g)/(e-m),u=g-h*m,this.d2v=function(a){return Math.floor(1>=a.getTime()?0:h*p(a.getTime())+u)},this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-u)/h)))}):(m=p(0>=c?1:c),e=p(0>=e?1:e),h=(f-g)/(e-
m),u=g-h*m,this.d2v=function(a){return Math.floor(1>=a?0:h*p(a)+u)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-u)/h))})}};m.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};m.Axis=function(c,e){var g=this;WAVE.extend(g,WAVE.EventManager);e=e||{};this.chart=function(){return c};var f=e.dataType||m.DataType.NUMBER;this.dataType=function(a){"undefined"!==typeof a&&a!==f&&(f=a,g.fireChanged());return f};
var v=e.min||null;this.min=function(a){"undefined"!==typeof a&&a!==v&&(v=a,g.fireChanged());return v};var r=e.max||null;this.max=function(a){"undefined"!==typeof a&&a!==r&&(r=a,g.fireChanged());return r};var q=e.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==q&&(q=a,g.fireChanged());return q};var n=e.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==n&&(n=a,g.fireChanged());return n};var p=!1!==e.isLinear;this.isLinear=function(a){"undefined"!==
typeof a&&a!==p&&(p=a,g.fireChanged());return p};var a=e.markType||m.AxisMarkType.AUTO;this.markType=function(b){"undefined"!==typeof b&&b!==a&&(a=b,g.fireChanged());return a};var b=5;this.tickLength=function(a){"undefined"!==typeof a&&a!==b&&(b=a,g.fireChanged());return b};var d=e.tickTextMargin||3;this.tickTextMargin=function(a){"undefined"!==typeof a&&a!==d&&(d=a,g.fireChanged());return d};var h;this.dvInfo=function(a){"undefined"!==typeof a&&(h=a);return h};var u;this.ticks=function(a){"undefined"!==
typeof a&&(u=a);return u};var w=e.onlyIntegerTicks||!1;this.onlyIntegerTicks=function(a){"undefined"!==typeof a&&(w=a);return w};var l=e.ticksStep||1;this.ticksStep=function(a){"undefined"!==typeof a&&(l=a);return l};this.fireChanged=function(){g.eventInvoke("EVT_CHANGED")}};m.Axis.prototype.toSeconds=function(c){return c.valueOf()/1E3};m.Axis.prototype.fromSeconds=function(c){return new Date(1E3*c)};m.Axis.prototype.getVTimeTicks=function(c,e,g,f,m,r){g=this.toSeconds(g);var q=this.toSeconds(f)-
g,n=e-c;f=q/n;var q=this.calcTimeTickLength(n,q,m,r),p=q.dThreshhold,q=q.vTickLength,p=(Math.floor(g/p)*p-g)/f,a=[],b=r+m/2;for(m=n-(r+m/2);p<=e;)p>=b&&p<=m&&a.push({vTick:c+p,dTick:this.fromSeconds(g+p*f)}),p+=q;return a};m.Axis.prototype.calcTimeTickLength=function(c,e,g,f){var m=e/c,r=e/Math.floor(c/(g+2*f));c=B.wFirst(function(c){return r<c});return{vTickLength:c/m,dThreshhold:c}};m.Axis.prototype.getVLog10Ticks=function(c,e,g,f,m,r){var q=e-c;f=Math.ceil(Math.log(f-g)/Math.LN10);e=q/f;var n=
[],p=r+m/2;m=q-(r+m/2);r=0;for(var q=c,a=1;r<=f;r++,q+=e,a*=10)q>=p&&q<=m&&n.push({vTick:c+q,dTick:g+a});return n};m.Axis.prototype.getVTicks=function(c,e,g,f,m,r){var q=[],n=f-g,p=e-c;f=n/p;var n=this.calcTicksLength(p,n,m,r),a=n.dTickLength,n=n.vTickLength,a=(Math.ceil(g/a)*a-g)/f,b=r+m/2;for(m=p-(r+m/2);a<=e;)a>=b&&a<=m&&q.push({vTick:c+a,dTick:g+a*f}),a+=n;return q};m.Axis.prototype.calcTicksLength=function(c,e,g,f){var m=e/c,r=WAVE.arrayWalkable([1,2,3,5,10]);c=e/(Math.floor(c/(g+f))-1);e=Math.pow(10,
Math.floor(Math.log(c)/Math.LN10));var q=c/e,r=r.wFirst(function(c){return q<c})*e;this.onlyIntegerTicks()&&1>r&&(r=1);return{vTickLength:r/m,dTickLength:r}};m.Axis.prototype.labelValToStr=function(c){return this.dataType()===m.DataType.NUMBER?WAVE.siNum(c,2):WAVE.toUSDateTimeString(c)};m.Axis.prototype.calcLabelRc=function(c,e,g){this.dataType()===m.DataType.NUMBER?(e=this.labelValToStr(e),g=this.labelValToStr(g),g=g.length>=e.length?g:e):g=this.labelValToStr(e);g=WAVE.SVG.createText(g,0,0,{class:"wvAxisLabel wvXAxisLabel",
visibility:"hidden"});c.appendChild(g);e=g.getBBox();c.removeChild(g);return e};m.XZone=function(c){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return c};var g=!0;this.enabled=function(c){"undefined"!==typeof c&&c!==g&&(g=c,e.eventInvoke("EVT_CHANGED"));return g}};m.XZone.prototype.getHeight=function(c){var e=this.chart().seriesListWalkable().wGroup(function(c){return c.xAxis()},function(c){return c.dataSet()}),g=WAVE.arrayWalkable(e.wSelect(function(e){return{axis:e.k,height:e.k.getHeight(c,
e.v)}}).wToArray()).wGroup(function(c){return c.axis.isBottom()},function(c){return c.height}).wGroupAggregate(function(c,e,g){return(e||0)+g}),e={top:0,bottom:0};if(!this.enabled())return e;for(g=g.getWalker();g.moveNext();){var f=g.current();!0===f.k?e.bottom=f.v:e.top=f.v}return e};m.XZone.prototype.draw=function(c,e){for(var g in e){var f=e[g],f=WAVE.SVG.createRect(f.left(),f.top(),f.width(),f.height(),{class:"wvSvgBkgr wvXZoneBackground"});c.appendChild(f)}g=this.chart().seriesListWalkable().wGroup(function(c){return c.xAxis()},
function(c){return c.dataSet()}).getWalker();for(var f=e.top.bottom(),m=e.bottom.top();g.moveNext();){var r=g.current(),q=r.k.getHeight(c,r.v),n;!0===r.k.isBottom()?(n=new y.Rectangle(new y.Point(e.bottom.left(),m),new y.Point(e.bottom.right(),m+q)),m+=q):(n=new y.Rectangle(new y.Point(e.top.left(),f-q),new y.Point(e.top.right(),f)),f-=q);r.k.draw(c,n,r.v)}};m.XAxis=function(c,e){m.Axis.call(this,c,e);var g=this;e=e||{};var f=e.verticalMargin||3;this.verticalMargin=function(c){"undefined"!==typeof c&&
c!==f&&(f=c,g.fireChanged());return f};var p=!1!==e.isBottom;this.isBottom=function(c){"undefined"!==typeof c&&c!==p&&(p=c,g.fireChanged());return p}};m.XAxis.prototype=Object.create(m.Axis.prototype);m.XAxis.prototype.constructor=m.XAxis;m.XAxis.prototype.d2v=function(c){return this.dvInfo().d2v(c)};m.XAxis.prototype.v2d=function(c){return this.dvInfo().v2d(c)};m.XAxis.prototype.draw=function(c,e,g){var f=this.getMinMax(g);this.dvInfo(new m.dvInfo(f.min,f.max,e.left(),e.right(),this.isLinear()));
f=this.isBottom()?WAVE.SVG.createLine(e.left(),e.top(),e.right(),e.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.bottom(),e.right(),e.bottom(),{class:"wvAxisLine"});c.appendChild(f);this.markAxis(c,e,g)};m.XAxis.prototype.getHeight=function(c,e){this.minMax=this.getMinMax(e);var g;!this.minMax.min&&0!==this.minMax.min||!this.minMax.max&&0!==this.minMax.max?g=0:(g=this.calcLabelRc(c,this.minMax.min,this.minMax.max),g=Math.ceil(g.height));return this.tickLength()+this.verticalMargin()+
this.tickTextMargin()+g};m.XAxis.prototype.getMinMax=function(c){var e=this.min()||c.wSelect(function(c){return c.getMinX()}).wWhere(function(c){return null!==c}).wMin();null===e&&(e=this.dataType()===m.DataType.DATE?new Date:0);e=this.dataType()===m.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();c=this.max()||c.wSelect(function(c){return c.getMaxX()}).wMax();null===c&&(c=this.dataType()===m.DataType.DATE?new Date:0);c=this.dataType()===m.DataType.DATE?new Date(c.getTime()+
1E3*this.maxMargin()):c+this.maxMargin();return this.minMax={min:e,max:c}};m.XAxis.prototype.markAxis=function(c,e,g){var f=[],p=this.getMinMax(g);if((this.minMax.min||0===this.minMax.min)&&(this.minMax.max||0===this.minMax.max)){var r=this.calcLabelRc(c,p.min,p.max),q=r.width,r=r.height;if(this.markType()===m.AxisMarkType.AUTO)f=this.dataType()===m.DataType.DATE?this.getVTimeTicks(e.left(),e.right(),p.min,p.max,q,5):this.getVTicks(e.left(),e.right(),p.min,p.max,q,5);else if(this.markType()===m.AxisMarkType.EXACT_BY_POINTS){var n=
this;g.wFirst().forEach(function(a){f.push({vTick:n.dvInfo().d2v(a.x),dTick:a.x})})}else if(this.markType()===m.AxisMarkType.BY_STEP)for(g=p.max,q=this.ticksStep(),p=p.min+q;p<=g;)f.push({vTick:this.dvInfo().d2v(p),dTick:p}),p+=q;this.ticks(f);for(var x in f)p=f[x],g=this.isBottom()?WAVE.SVG.createLine(p.vTick,e.top(),p.vTick,e.top()+this.tickLength(),{class:"wvAxisTickLine"}):WAVE.SVG.createLine(p.vTick,e.bottom(),p.vTick,e.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),c.appendChild(g),g=
this.labelValToStr(p.dTick),g=this.isBottom()?WAVE.SVG.createText(g,p.vTick,e.top()+this.tickTextMargin()+r,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(g,p.vTick,e.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),c.appendChild(g),q=g.getBBox(),g.setAttribute("x",p.vTick-q.width/2)}};m.YZone=function(c){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return c};var g=!0;this.enabled=function(c){"undefined"!==typeof c&&c!==g&&(g=c,e.eventInvoke("EVT_CHANGED"));
return g};this.getWidth=function(c){var f=e.chart().seriesListWalkable().wGroup(function(c){return c.yAxis()},function(c){return c.dataSet()}),k=WAVE.arrayWalkable(f.wSelect(function(e){return{axis:e.k,width:e.k.getWidth(c,e.v)}}).wToArray()).wGroup(function(c){return c.axis.isLeft()},function(c){return c.width}).wGroupAggregate(function(c,e,a){return(e||0)+a}),f={left:0,right:0};if(!g)return f;for(k=k.getWalker();k.moveNext();){var q=k.current();!0===q.k?f.left=q.v:f.right=q.v}return f};this.draw=
function(c,g){for(var f in g){var k=g[f],k=WAVE.SVG.createRect(k.left(),k.top(),k.width(),k.height(),{class:"wvSvgBkgr wvYZoneBackground"});c.appendChild(k)}f=e.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var k=g.left.right(),n=g.right.left();f.moveNext();){var m=f.current(),a=m.k.getWidth(c,m.v),b;!0===m.k.isLeft()?(b=new y.Rectangle(new y.Point(k-a,g.left.top()),new y.Point(k,g.left.bottom())),k-=a):(b=new y.Rectangle(new y.Point(n,
g.left.top()),new y.Point(n+a,g.left.bottom())),n+=a);m.k.draw(c,b,m.v)}}};m.YAxis=function(c,e){m.Axis.call(this,c,e);var g=this;e=e||{};var f=e.horizontalMargin||3;this.horizontalMargin=function(c){"undefined"!==typeof c&&c!==f&&(f=c,g.fireChanged());return f};var p=e.minWidth||0;this.minWidth=function(c){"undefined"!==typeof c&&c!==p&&(p=c,g.fireChanged());return p};var r=!1!==e.isLeft;this.isLeft=function(c){"undefined"!==typeof c&&c!==r&&(r=c,g.fireChanged());return r}};m.YAxis.prototype=Object.create(m.Axis.prototype);
m.YAxis.prototype.constructor=m.YAxis;m.YAxis.prototype.d2v=function(c){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(c)};m.YAxis.prototype.v2d=function(c){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-c)};m.YAxis.prototype.markAxis=function(c,e,g){var f=[];if(this.markType()===m.AxisMarkType.AUTO){g=this.getMinMax(g);var p=this.calcLabelRc(c,g.min,g.max).height,r=.2*p,f=this.dataType()===m.DataType.DATE?this.getVTimeTicks(e.top(),e.bottom(),g.min,g.max,p,r):this.isLinear()?
this.getVTicks(e.top(),e.bottom(),g.min,g.max,p,r):this.getVLog10Ticks(e.top(),e.bottom(),g.min,g.max,p,r)}else if(this.markType()===m.AxisMarkType.EXACT_BY_POINTS){var q=[],n=this;g.wFirst().forEach(function(a){var b=a.y,c;a:{if(q&&0!==q.length)for(c in q)if(1E-7>=Math.abs(q[c]-b)){c=!0;break a}c=!1}c||(f.push({vTick:n.dvInfo().d2v(a.y),dTick:b}),q.push(b))})}else if(this.markType()===m.AxisMarkType.BY_STEP)for(g=this.getMinMax(g),p=g.max,r=this.ticksStep(),g=g.min+r;g<=p;)f.push({vTick:this.dvInfo().d2v(g),
dTick:g}),g+=r;this.ticks(f);g=0;var p=[],x;for(x in f){var a=f[x],r=e.top()+e.bottom()-a.vTick,b;b=this.isLeft()?WAVE.SVG.createLine(e.right()-this.tickLength(),r,e.right(),r,{class:"wvAxisTickLine"}):WAVE.SVG.createLine(e.left(),r,e.left()+this.tickLength(),r,{class:"wvAxisTickLine"});c.appendChild(b);a=this.labelValToStr(a.dTick);a=this.isLeft()?WAVE.SVG.createText(a,e.right()-this.tickTextMargin()-this.tickLength(),r,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(a,e.left()+this.tickLength()+
this.tickTextMargin(),r,{class:"wvAxisLabel wvYAxisLabel"});c.appendChild(a);b=a.getBBox();a.setAttribute("y",r+b.height/3);p.push(a);b.width>g&&(g=b.width)}if(!this.isLeft())for(var d in p)c=p[d],e=parseFloat(c.getAttribute("x")),e+=g,c.setAttribute("x",e)};m.YAxis.prototype.draw=function(c,e,g){var f=this.getMinMax(g);this.dvInfo(new m.dvInfo(f.min,f.max,e.top(),e.bottom(),this.isLinear()));f=this.isLeft()?WAVE.SVG.createLine(e.right(),e.top(),e.right(),e.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),
e.top(),e.left(),e.bottom(),{class:"wvAxisLine"});c.appendChild(f);this.markAxis(c,e,g)};m.YAxis.prototype.getWidth=function(c,e){this.minMax=this.getMinMax(e);var g=this.calcLabelRc(c,this.minMax.min,this.minMax.max),g=this.tickLength()+this.horizontalMargin()+Math.ceil(g.width);return Math.max(g,this.minWidth())};m.YAxis.prototype.getMinMax=function(c){var e=this.min()||c.wSelect(function(c){return c.getMinY()}).wWhere(function(c){return null!==c}).wMin(),e=this.dataType()===m.DataType.DATE?new Date(e.getTime()-
1E3*this.minMargin()):e-this.minMargin();c=this.max()||c.wSelect(function(c){return c.getMaxY()}).wMax();c=this.dataType()===m.DataType.DATE?new Date(c.getTime()+1E3*this.maxMargin()):c+this.maxMargin();return this.minMax={min:e,max:c}};m.LZone=function(c,e){function g(){f.eventInvoke("EVT_CHANGED")}e=e||{};var f=this;WAVE.extend(f,WAVE.EventManager);this.chart=function(){return c};var p=!1!==e.enabled;this.enabled=function(a){"undefined"!==typeof a&&a!==p&&(p=a,g());return p};var r=e.legendMargin||
10;this.legendMargin=function(a){"undefined"!==typeof a&&a!==r&&(r=a,g());return r};var q=e.seriesMargin||3;this.seriesMargin=function(a){"undefined"!==typeof a&&a!==q&&(q=a,g());return q};var n=e.prefixLength||10;this.prefixLength=function(a){"undefined"!==typeof a&&a!==n&&(n=a,g());return n};var x=e.rowSpace||3;this.rowSpace=function(a){"undefined"!==typeof a&&a!==x&&(x=a,g());return x};var a=e.corner||m.RectCorner.RIGHTTOP;this.corner=function(b){"undefined"!==typeof b&&b!==a&&(a=b,g());return a}};
m.LZone.prototype.getSize=function(c){var e=this.chart().seriesListWalkable().wSelect(function(c){return c.title()||""}).wMax(function(c,e){return c.length>e.length}),g=WAVE.SVG.createText(e,0,0,{class:"wvLegendName",visibility:"hidden"});c.appendChild(g);e=g.getBBox();c.removeChild(g);c=this.rowSpace()+this.prefixLength()+this.rowSpace()+e.width+this.rowSpace();e=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+e.height);return{w:c,h:e}};m.LZone.prototype.drawLegendPrefix=function(c,
e,g){var f=(e.top()+e.bottom())/2;e=WAVE.SVG.createPath({d:"M"+e.left()+","+f+" L"+(e.left()+this.prefixLength())+","+f,class:g.lineClass()});c.appendChild(e)};m.LZone.prototype.draw=function(c,e){if(this.enabled()){var g=this,f=this.chart().seriesListWalkable(),m=WAVE.SVG.createRect(e.left(),e.top(),e.width(),e.height(),{class:"wvLZoneBackground"});c.appendChild(m);var r=e.top()+this.seriesMargin();f.wEach(function(f){var n=WAVE.SVG.createGroup({class:f.class()});c.appendChild(n);var m=WAVE.SVG.createText(f.title(),
e.left()+g.rowSpace()+g.prefixLength()+g.rowSpace(),r,{class:"wvLegendName"});n.appendChild(m);var a=m.getBBox();m.setAttribute("y",r+3*a.height/4);m=new y.Rectangle(new y.Point(e.left()+g.rowSpace(),r),new y.Point(e.left()+g.rowSpace()+g.prefixLength(),r+a.height));g.drawLegendPrefix(n,m,f);r+=a.height+2*g.seriesMargin()})}};var f=0;m.SZone=function(c,e){function g(){f.eventInvoke("EVT_CHANGED")}var f=this;WAVE.extend(f,WAVE.EventManager);e=e||{};this.chart=function(){return c};var p=e.chartType||
m.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==p&&(p=a,g());return p};var r=e.squareFillType||m.SquareFillType.BOTTOM;this.squareFillType=function(a){"undefined"!==typeof a&&a!==r&&(r=a,g());return r};var q=e.pointType||m.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==q&&(q=a,g());return q};var n=e.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==n&&(n=a,g());return n};var x=e.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=
function(a){"undefined"!==typeof a&&a!==x&&(x=a,g());return x};var a=e.pointClass||"wvSeriesPoint";this.pointClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,g());return a};var b=e.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==b&&(b=a,g());return b};var d=e.barClass||"wvSeriesRect";this.barClass=function(a){"undefined"!==typeof a&&a!==d&&(d=a,g());return d};var h=e.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==h&&(h=a,g());return h};var u=e.barGroupMargin||
5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==u&&(u=a,g());return u};var w=e.barMargin||3;this.barMargin=function(a){"undefined"!==typeof a&&a!==u&&(w=a,g());return w};var l=e.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==l&&(l=a);return l};var y=e.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==y&&(y=a);return y};var z=e.showPointTitle||!1;
this.showPointTitle=function(a){"undefined"!==typeof a&&a!==z&&(z=a,g());return z};var B=e.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==B&&(B=a,g());return B};var P=e.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==P&&(P=a,g());return P};var N=e.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==N&&(N=a,g());return N};var L=e.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==
typeof a&&a!==L&&(L=a,g());return L};var Z=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==Z&&(Z=a,g());return Z};this.showDefaultRuler=function(a){var b=0<E.length;return"undefined"!==typeof a&&a!==b?(a?f.attachToRulerScope(""):f.detachFromRulerScope(""),E.length&&g(),a):b};var E=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(E)};this.attachToRulerScope=function(a){-1===E.indexOf(a)&&(E.push(a),g())};this.detachFromRulerScope=function(a){a=E.indexOf(a);
-1!==a&&(E.splice(a,1),g())};var I=!1!==e.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==I&&(I=a,g());return I};var U=!1!==e.rulerCheckYContains;this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==U&&(U=a,g());return U};var C=null;this.lastArea=function(){return C};var H=[],sa=WAVE.arrayWalkable(H),ea=[],na=WAVE.arrayWalkable(ea),O=[],S=WAVE.arrayWalkable(O);this.addVTitle=function(a){H.push(a)};this.addVPoint=function(a){ea.push(a)};this.addVLine=
function(a){O.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=sa.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=na.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),g=S.wWhere(function(b){return!(b.x2<
a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,b.y1,b.x2,b.y2)}).wSum();return c+d+e+2*g};this.draw=function(a,b){C=b;H.splice(0,H.length);ea.splice(0,ea.length);O.splice(0,O.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),
d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var e=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});a.appendChild(e);var c=f.chart().seriesListWalkable(),d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),g=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});e.appendChild(d)}});g.wEach(function(a){a=a.ticks();
for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});e.appendChild(d)}});c.wGroup(function(a){return a.chartType()},function(a){return a}).wEach(function(c){switch(c.k){case m.ChartType.BAR:var d=f.barWidth(),g=f.barGroupMargin(),h=f.barMargin(),k=c.v.wCount(),l=c.v.wFirst();if(l.barBase()===m.RectSide.BOTTOM){var n=c.v.wMin(function(a,b){return a.dataSet().getMinX()<b.dataSet().getMinX()});if("undefined"===typeof n)break;
var q=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>b.dataSet().getMaxX()});if("undefined"===typeof q)break;for(var n=n.dataSet().getMinX(),q=q.dataSet().getMaxX(),p=l.xAxis().dvInfo(),l=p.d2v(n),q=p.d2v(q),k=Math.floor((q-l+g)/(k*(d+h)-h+g)),g=(q-l+g)/k,q=0;q<k;q++){var r=l+g*q,v=r;c.v.wEach(function(a){var c=p.v2d(r),c=a.getVY(c),c="M"+v+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});e.appendChild(a);
a.appendChild(c);v+=d+h})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawAllButTitle(a,d,b)})}});c.wWhere(function(a){return a.chartType()&m.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawPointTitles(a,d,b)})}};var z=function(c,e){function g(){t.invokeEvent("EVT_CHANGED")}var t=this;WAVE.extend(t,WAVE.EventManager);e=e||{};this.chart=function(){return c};var p="undefined"!==typeof e.id?
e.id:(++f).toString();this.id=function(){return p};var r=e.title||"";this.title=function(a){"undefined"!==typeof a&&a!==r&&(r=a,g());return r};var q=e.class||"";this.class=function(a){"undefined"!==typeof a&&a!==q&&(q=a,g());return q};var n=e.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==n&&(n=a,g());return n||t.chart().sZone().lineClass()};var x=e.lineSquareClass;this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==x&&(x=a,g());return x||t.chart().sZone().lineSquareClass()};
var a=e.barClass;this.barClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,g());return a||t.chart().sZone().barClass()};var b=e.chartType;this.chartType=function(a){"undefined"!==typeof a&&a!==b&&(b=a,g());return b||t.chart().sZone().chartType()};var d=e.squareFillType;this.squareFillType=function(a){"undefined"!==typeof a&&a!==d&&(d=a,g());return d||t.chart().sZone().squareFillType()};var h=e.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,g());return h||t.chart().sZone().pointType()};
var u=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==u&&(u=a,g());return u||t.chart().sZone().pointClass()};var w=e.pointSize;this.pointSize=function(a){"undefined"!==typeof a&&a!==w&&(w=a,g());return w||t.chart().sZone().pointSize()};var l=m.RectSide.BOTTOM;this.barBase=function(a){"undefined"!==typeof a&&a!==l&&(l=a,g());return l||t.chart().sZone().barBase()};var y=new m.DataSet(e.data);y.eventBind("EVT_CHANGED",function(){t.eventInvoke("EVT_CHANGED")});this.dataSet=
function(){return y};var z=e.xAxis;this.xAxis=function(a){"undefined"!==typeof a&&a!==z&&(z&&z.eventUnbind("EVT_CHANGED",g),z=a,z.eventBind("EVT_CHANGED",g),g());return z||t.chart().xAxis()};var B=e.yAxis;this.yAxis=function(a){"undefined"!==typeof a&&a!==B&&(B&&B.eventUnbind("EVT_CHANGED",g),B=a,B.eventBind("EVT_CHANGED",g),g());return B||t.chart().yAxis()};var P=e.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==P&&(P=a);return P||t.chart().sZone().showPointTooltip()};
var N=e.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==N&&(N=a);return N||t.chart().sZone().pointTooltipFormat()};var L=e.showPointTitle;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==L&&(L=a,g());return L||t.chart().sZone().showPointTitle()};var Z=e.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==Z&&(Z=a,g());return Z||t.chart().sZone().pointTitleFormat()};var E=e.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==
typeof a&&a!==E&&(E=a,g());return E||c.sZone().pointTitleClass()};var I=e.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==I&&(I=a,g());return I||c.sZone().pointTitleAngle()};var U=e.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==U&&(U=a,g());return U||c.sZone().pointTitleMargin()};var C=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==C&&(C=a,g());return!1===C?!1:C||c.sZone().showPointTitleLeg()}};
z.prototype.getDY=function(c){var e=this.dataSet().getPointByX(c);if(e)return e.y;e=this.dataSet().getNearestNeighbours(c);return null===e?null:null===e.left?e.right.y:null===e.right?e.left.y:(c-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y};z.prototype.getVY=function(c){c=this.getDY(c);return this.yAxis().d2v(c)};z.prototype.foreachPoint=function(c){var e=this,g=this.xAxis(),f=this.yAxis();e.dataSet().forEach(function(m){var p=Math.round(g.d2v(m.x)),q=Math.round(f.d2v(m.y));isNaN(p)||
isNaN(q)||c(p,q,m.x,m.y,m.title,e)})};z.prototype.drawAllButTitle=function(c,e,g,f){function p(a){var b=[],c=[],d=a.length-1,e=[],g=[],f=[],h=[];e[0]=0;g[0]=2;f[0]=1;h[0]=a[0]+2*a[1];var k;for(k=1;k<d-1;k++)e[k]=1,g[k]=4,f[k]=1,h[k]=4*a[k]+2*a[k+1];e[d-1]=2;g[d-1]=7;f[d-1]=0;h[d-1]=8*a[d-1]+a[d];for(k=1;k<d;k++){var n=e[k]/g[k-1];g[k]-=n*f[k-1];h[k]-=n*h[k-1]}b[d-1]=h[d-1]/g[d-1];for(k=d-2;0<=k;--k)b[k]=(h[k]-f[k]*b[k+1])/g[k];for(k=0;k<d-1;k++)c[k]=2*a[k+1]-b[k+1];c[d-1]=.5*(a[d]+b[d-1]);return{p1:b,
p2:c}}var r=this,q,n,x,a;if(this.chartType()&m.ChartType.LINE||this.chartType()&m.ChartType.LINE_SQUARE)q="",n=null,r.foreachPoint(function(b,c,d,e,g,f){null===n?(n=b,d="M "):(d="L ",r.chart().sZone().addVLine({x1:x,y1:a,x2:b,y2:c}));q+=d+b+" "+c+" ";x=b;a=c}),""!==q&&this.chartType()&m.ChartType.LINE_SQUARE&&(q=this.squareFillType()===m.SquareFillType.BOTTOM?q+(" V"+g.bottom()+" H"+n+" Z"):q+(" V"+g.top()+" H"+n+" Z")),f=WAVE.SVG.createPath({d:q,class:this.chartType()&m.ChartType.LINE_SQUARE?this.lineSquareClass():
this.lineClass()}),e.appendChild(f);if(this.chartType()&m.ChartType.SPLINE||this.chartType()&m.ChartType.SPLINE_SQUARE){var b=[],d=[];r.foreachPoint(function(a,f,h,n,m,q){r.drawPoint(c,e,g,a,f,h,n,m,q);b.push(a);d.push(f)});f=r.dataSet().length();if(1>=f)return;n=b[0];q="M "+b[0]+" "+d[0];if(2==f)q+=" L "+b[1]+" "+d[1];else for(var h=p(b),u=p(d),w=0;w<f-1;w++)q+=" C "+h.p1[w]+" "+u.p1[w]+", "+h.p2[w]+" "+u.p2[w]+", "+b[w+1]+" "+d[w+1];""!==q&&this.chartType()&m.ChartType.SPLINE_SQUARE&&(q=this.squareFillType()===
m.SquareFillType.BOTTOM?q+(" V"+g.bottom()+" H"+n+" Z"):q+(" V"+g.top()+" H"+n+" Z"));f=WAVE.SVG.createPath({d:q,class:this.chartType()&m.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});e.appendChild(f)}this.chartType()&m.ChartType.POINT&&r.foreachPoint(function(a,b,d,f,h,n){r.drawPoint(c,e,g,a,b,d,f,h,n)});if(this.chartType()&m.ChartType.STEP||this.chartType()&m.ChartType.STEP_SQUARE)q="",n=null,r.foreachPoint(function(b,c,d,e,g,f){null===n?(n=b,q+="M"+b+" "+c):q+=" H"+b+" V"+c;
x=b;a=c}),""!==q&&this.chartType()&m.ChartType.STEP_SQUARE&&(q=this.squareFillType()===m.SquareFillType.BOTTOM?q+(" V"+g.bottom()+" H"+n+" Z"):q+(" V"+g.top()+" H"+n+" Z")),f=WAVE.SVG.createPath({d:q,class:this.chartType()&m.ChartType.STEP_SQUARE?this.lineSquareClass():this.lineClass()}),e.appendChild(f)};z.prototype.drawPointTitles=function(c,e,g){var f=this;this.chartType()&m.ChartType.POINT&&this.foreachPoint(function(m,p,q,n,x,a){f.drawPointTitle(c,e,g,m,p,q,n,x)})};z.prototype.drawPoint=function(c,
e,g,f,p,r,q,n){var x;switch(this.pointType()){case m.PointType.CIRCLE:x=this.drawPointCircle(f,p,r,q);break;case m.PointType.RECT:x=this.drawPointRect(f,p,r,q);break;case m.PointType.TRI:x=this.drawPointTriangle(f,p,r,q)}var a=this;x&&(x.addEventListener("mouseover",function(b){a.chart().onSeriesMouseOver({originalEvt:b,vx:f,vy:p,dx:r,dy:q,title:n,series:a})}),x.addEventListener("mouseout",function(b){a.chart().onSeriesMouseOut({originalEvt:b,vx:f,vy:p,dx:r,dy:q,title:n,series:a})}),x.addEventListener("click",
function(b){a.chart().onSeriesClick({originalEvt:b,vx:f,vy:p,dx:r,dy:q,title:n,series:a})}),e.appendChild(x))};z.prototype.drawPointTitle=function(c,e,g,f,m,p,q,n){if(this.showPointTitle()&&n){var x=WAVE.strTemplate(this.pointTitleFormat(),{vx:f,vy:m,dx:p,dy:q,title:n,series:this.title()}),a=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+","+f+","+m+")"}),x=WAVE.SVG.createText(x,f,m);a.appendChild(x);c.appendChild(a);var b=a.getBBox();c.removeChild(a);
var d=b.x,h=b.y,u=b.width,w=b.height,d=d-2,h=h-2,u=u+4,w=w+4,b=f-d;c=m-h;for(var l=m-(h+w/2),y=f+this.pointTitleMargin(),d=WAVE.Geometry.toRectWH(d+(y-d),h+l,u,w),h=this.chart().sZone(),u=Number.MAX_VALUE,w=0;w<2*Math.PI;w+=Math.PI/4){l=WAVE.Geometry.rotateRectAroundCircle(f,m,15,d.width(),d.height(),w);y=h.getTitleRcPenalty(l,g);if(0===y){d=l;break}y<u&&(u=y,d=l)}h.addVTitle(d);g=WAVE.SVG.createRect(d.left(),d.top(),d.width(),d.height(),{rx:4,ry:4});x.setAttribute("x",d.left()+b);x.setAttribute("y",
d.top()+c);var z=this;a.addEventListener("mouseover",function(a){z.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:f,vy:m,dx:p,dy:q,title:n,series:z})});a.addEventListener("mouseout",function(a){z.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:f,vy:m,dx:p,dy:q,title:n,series:z})});a.addEventListener("click",function(a){z.chart().onSeriesPointTitleClick({originalEvt:a,vx:f,vy:m,dx:p,dy:q,title:n,series:z})});a.insertBefore(g,x);this.showPointTitleLeg()&&(x=(new WAVE.Geometry.Point(f,m)).toPolarPoint(d.centerPoint()).theta(),
x=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(d,x),x=WAVE.SVG.createLine(x.x(),x.y(),f,m),a.insertBefore(x,g));e.appendChild(a)}};z.prototype.calcTitlePos=function(c,e,g,f){var m=null,p=null,q,n,x=g.width*g.height;q=c+5;n=e-5-g.height;var a=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),q,n,g.width,g.height);a!==x?(q=c-5-g.width,n=e-5-g.height,a=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),q,n,g.width,g.height),a!==x?(q=c+5,n=e+5,a=WAVE.Geometry.overlapAreaWH(f.left(),
f.top(),f.width(),f.height(),q,n,g.width,g.height),a!==x?(q=c-5-g.width,n=e+5,a=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),q,n,g.width,g.height),a===x&&(m=q,p=n)):(m=q,p=n)):(m=q,p=n)):(m=q,p=n);return new WAVE.Geometry.Point(m,p)};z.prototype.drawPointCircle=function(c,e,g,f){g=this.pointSize();f=WAVE.SVG.createCircle(c,e,g,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-g,e-g,2*g,2*g));return f};z.prototype.drawPointRect=function(c,e,g,f){g=
this.pointSize();f=WAVE.SVG.createRect(c-g,e-g,2*g,2*g,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-g,e-g,2*g,2*g));return f};z.prototype.drawPointTriangle=function(c,e,g,f){g=this.pointSize();f=WAVE.SVG.createPath({d:"M"+(c-g)+","+(e+g)+" H"+(c+g)+" L"+c+","+(e-g)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-g,e-g,2*g,2*g));return f};z.prototype.toString=function(){return"Series "+this.title()};m.DataSet=function(c){var e=
this;WAVE.extend(e,WAVE.EventManager);var g=[],f=WAVE.arrayWalkable(g);this.feedWalkable=function(c,f){if(!f||f>e.MAX_POINTS_QTY)f=e.MAX_POINTS_QTY;e.removeAllPoints();for(var k=c.getWalker(),a=0;k.moveNext()&&a++<f;){var b=k.current();g.push({x:b.x,y:b.y,t:b.t})}e.eventInvoke("EVT_CHANGED")};this.addPoint=function(c,f,k){g.push({x:c,y:f,title:k});e.eventInvoke("EVT_CHANGED")};if(c)for(var m in c){var p=c[m];this.addPoint(p.x,p.y,p.title)}this.forEach=function(c){f.wEach(c)};this.removeAllPoints=
function(){0<g.length&&(g.splice(0,g.length),e.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(c){var f;do{f=!1;for(var k=0;k<g.length;k++)if(c(g[k])){g.splice(k,1);f=!0;break}}while(f);e.eventInvoke("EVT_CHANGED")};this.removePointByX=function(c){for(var e=0;e<g.length;e++)if(g[e].x===c){g.splice(e,1);break}};this.length=function(){return g.length};this.getPoint=function(c){return g[c]};this.getPointByX=function(c){for(var e=0;e<g.length;e++){var f=g[e];if(f.x===c)return f}};this.getMinX=
function(){return f.wSelect(function(c){return c.x}).wMin()};this.getMaxX=function(){return f.wSelect(function(c){return c.x}).wMax()};this.getMinY=function(){return f.wSelect(function(c){return c.y}).wMin()};this.getMaxY=function(){return f.wSelect(function(c){return c.y}).wMax()};this.getNearestNeighbours=function(c){if(0===g.length)return null;var e=g[0],k=g[g.length-1];if(c<e.x)return{left:null,right:e};if(c>k.x)return{left:k,right:null};e=f.wFirstIdx(function(a){return c<a.x});return{left:g[e-
1],right:g[e]}}};m.DataSet.prototype.MAX_POINTS_QTY=44100;var c=0;m.Chart=function(f,e){function g(){l&&0===w&&(r.draw(),l=!1)}function p(){l=!0;g()}function v(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!==c.nodeName?a.removeChild(c):b++}}var r=this;WAVE.extend(r,WAVE.EventManager);e=e||{};var q=++c;this.id=function(){return q};var n=f;this.svgEl=function(){return n};$(window).resize(function(){r.draw()});this.svgEl=function(a){"undefined"!==typeof a&&a!==n&&(n=a,r.draw());
return n};var x=new m.XZone(this);x.eventBind("EVT_CHANGED",p);this.xZone=function(){return x};var a=new m.YZone(this);a.eventBind("EVT_CHANGED",p);this.yZone=function(){return a};var b=new m.SZone(this,e.sZone);b.eventBind("EVT_CHANGED",p);this.sZone=function(){return b};var d=new m.LZone(this,e.lZone);d.eventBind("EVT_CHANGED",p);this.lZone=function(){return d};var h=new m.XAxis(r,e.xAxis);h.eventBind("EVT_CHANGED",p);this.xAxis=function(a){"undefined"!==typeof a&&a!==h&&(h=a,r.draw());return h};
var u=new m.YAxis(r,e.yAxis);u.eventBind("EVT_CHANGED",p);this.yAxis=function(a){"undefined"!==typeof a&&a!==u&&(u=a,r.draw());return u};var w=0,l=!0;this.beginUpdate=function(){w++};this.endUpdate=function(){0<w&&w--;g()};this.beginUpdate();var B=[],Y=e.series;if(Y){for(var R in Y){var P=new z(r,Y[R]);P.eventBind("EVT_CHANGED",p);B.push(P)}p()}var N=WAVE.arrayWalkable(B);this.seriesListWalkable=function(){return N};this.getSeries=function(a){return N.wFirst(function(b){return b.id()===a})};this.addSeries=
function(a){a=new z(r,a);a.eventBind("EVT_CHANGED",p);B.push(a);p();return a};this.removeSeries=function(a){var b=N.wFirstIdx(function(b){return b===a});-1!==b&&(B.splice(b,1),a.eventUnbind("EVT_CHANGED",p),p())};this.clearSeries=function(){if(0!==B.length){for(var a in B)B[a].eventUnbind("EVT_CHANGED",p);B=[];p()}};this.draw=function(){var a=n.getBoundingClientRect(),b=a.width,c=a.height,d;try{d=r.splitArea(n,b,c)}catch(e){console.error(e.message);return}v(n,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});
n.appendChild(b);r.xZone().draw(n,d.xZone);r.yZone().draw(n,d.yZone);r.sZone().draw(n,d.sZone);r.lZone().draw(n,d.lZone);var f=WAVE.Geometry.toRectWH(d.sZone.left()+a.left,d.sZone.top()+a.top,d.sZone.width(),d.sZone.height());d=r.sZone().rulerScopes();if(0<d.length)for(var g in d)WAVE.GUI.rulerSet({element:n,scope:d[g],elementCfg:{getTxt:function(b){var c=r.xAxis(),d=r.yAxis();if(f.contains(b.clientPoint)){var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,e=c.v2d(e),g=d.v2d(g);b.divHint.style.visibility=
"visible";return c.labelValToStr(e)+"; "+d.labelValToStr(g)}b.divHint.style.visibility="hidden"},getMasterInfo:function(b){var c=r.xAxis(),d=r.yAxis(),e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(e),d=d.v2d(g),d={dataPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=f.contains(b.clientPoint);return d},getSlaveInfo:function(b){var c=r.xAxis(),d=r.yAxis(),e=r.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;d=d.d2v(b)+a.top;d={clientPoint:new WAVE.Geometry.Point(c,
d)};d.isInParentRc=(!e.rulerCheckXContains()||d.clientPoint.x()>=f.left()&&d.clientPoint.x()<=f.right())&&(!e.rulerCheckYContains()||d.clientPoint.y()>=f.top()&&d.clientPoint.y()<=f.bottom());return d},parentRc:f}});else WAVE.GUI.rulerUnset({element:n})};this.splitArea=function(a,b,c){var d=r.xZone().getHeight(a),e=r.yZone().getWidth(a),f=new y.Point(0,0),g=new y.Point(Math.round(b),Math.round(c));d.top&&f.y(f.y()+d.top);d.bottom&&g.y(g.y()-d.bottom);e.left&&f.x(f.x()+e.left);e.right&&g.x(g.x()-e.right);
var d={top:new y.Rectangle(new y.Point(f.x(),0),new y.Point(g.x(),f.y())),bottom:new y.Rectangle(new y.Point(f.x(),g.y()),new y.Point(g.x(),c))},e={left:new y.Rectangle(new y.Point(0,f.y()),new y.Point(f.x(),g.y())),right:new y.Rectangle(new y.Point(g.x(),f.y()),new y.Point(b,g.y()))},h=new y.Rectangle(f,g);0<f.x()&&(h.corner1().x(h.left()+1),d.top.corner1().x(h.left()),d.bottom.corner1().x(h.left()));0<f.y()&&(h.corner1().y(h.top()+1),e.left.corner1().y(h.top()),e.right.corner1().y(h.top()));g.x()<
b&&(h.corner2().x(h.right()-1),d.top.corner2().x(h.right()),d.bottom.corner2().x(h.right()));g.y()<c&&(h.corner2().y(h.bottom()-1),e.left.corner2().y(h.bottom()),e.right.corner2().y(h.bottom()));a=r.lZone().getSize(a);var k,l;switch(r.lZone().corner()){case m.RectCorner.LEFTTOP:k=h.left()+r.lZone().legendMargin();l=h.top()+r.lZone().legendMargin();break;case m.RectCorner.RIGHTTOP:k=h.right()-r.lZone().legendMargin()-a.w;l=h.top()+r.lZone().legendMargin();break;case m.RectCorner.LEFTBOTTOM:k=h.left()+
r.lZone().legendMargin();l=h.bottom()-a.h-r.lZone().legendMargin();break;case m.RectCorner.RIGHTBOTTOM:k=h.right()-r.lZone().legendMargin()-a.w,l=h.bottom()-a.h-r.lZone().legendMargin()}k=new y.Rectangle(new y.Point(k,l),new y.Point(k+a.w,l+a.h));return{xZone:d,yZone:e,sZone:h,lZone:k}};this.endUpdate()};m.Chart.prototype.onSeriesMouseOver=function(c){this.eventInvoke(m.EVT_SERIES_POINT_MOUSEOVER,c)};m.Chart.prototype.onSeriesMouseOut=function(c){this.eventInvoke(m.EVT_SERIES_POINT_MOUSEOUT,c)};m.Chart.prototype.onSeriesClick=
function(c){this.eventInvoke(m.EVT_SERIES_POINT_CLICK,c)};m.Chart.prototype.onSeriesPointTitleMouseOver=function(c){this.eventInvoke(m.EVT_SERIES_POINT_TITLE_MOUSEOVER,c)};m.Chart.prototype.onSeriesPointTitleMouseOut=function(c){this.eventInvoke(m.EVT_SERIES_POINT_TITLE_MOUSEOUT,c)};m.Chart.prototype.onSeriesPointTitleClick=function(c){this.eventInvoke(m.EVT_SERIES_POINT_TITLE_CLICK,c)};return m}();WAVE.Pay.Providers.Braintree=function(){var p={TYPE:"braintree",clientToken:null,initialize:function(m){if(WAVE.strEmpty(m.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");p.clientToken=m.publicKey},tokenize:function(m,y,B){if(WAVE.strEmpty(p.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(y.cardNumber)||WAVE.strEmpty(y.cardExpMonth)||
WAVE.strEmpty(y.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var f={number:y.cardNumber,expirationMonth:y.cardExpMonth,expirationYear:y.cardExpYear};WAVE.strEmpty(y.cardCVC)||(f.cvv=y.cardCVC);WAVE.strEmpty(y.cardHolder)||(f.cardholderName=y.cardHolder);WAVE.strEmpty(y.cardAddressZip)||(f.billingAddress={postalCode:y.cardAddressZip});var z=p.clientToken;p.clientToken=null;
(new braintree.api.Client({clientToken:z})).tokenizeCard(f,function(c,f){var e={requestContext:{facade:m,paymentData:y},OK:!0,httpStatus:null,providerType:p.TYPE,providerName:m.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(c))e.tokenString=f;else{e.OK=!1;var g;g=WAVE.strEmpty(c)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;e.errorCode=g;g=WAVE.strEmpty(c)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
e.errorType=g;e.errorMessage=c;e.errorParams={};e.rawError=c}B(e)})}};return p}();WAVE.Pay.Providers.Stripe=function(){function p(f){switch(f){case "200":return B.HTTPStatus.STATUS200;case "400":return B.HTTPStatus.STATUS400;case "401":return B.HTTPStatus.STATUS401;case "402":return B.HTTPStatus.STATUS402;case "404":return B.HTTPStatus.STATUS404;case "429":return B.HTTPStatus.STATUS429;case "500":return B.HTTPStatus.STATUS50X;case "502":return B.HTTPStatus.STATUS50X;case "503":return B.HTTPStatus.STATUS50X;case "504":return B.HTTPStatus.STATUS50X}return f}function m(f){switch(f){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function y(f){switch(f){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var B={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(f){if(WAVE.strEmpty(f.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(f.publicKey)},tokenize:function(f,z,c){if(WAVE.strEmpty(z.cardNumber)||WAVE.strEmpty(z.cardExpMonth)||WAVE.strEmpty(z.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var k={number:z.cardNumber.replace(/\s+|-/g,
""),exp_month:2===z.cardExpMonth.length?"0"+z.cardExpMonth:z.cardExpMonth,exp_year:z.cardExpYear};WAVE.strEmpty(z.cardCVC)||(k.cvc=z.cardCVC);WAVE.strEmpty(z.cardHolder)||(k.name=z.cardHolder);WAVE.strEmpty(z.cardAddressLine1)||(k.address_line1=z.cardAddressLine1);WAVE.strEmpty(z.cardAddressLine2)||(k.address_line2=z.cardAddressLine2);WAVE.strEmpty(z.cardAddressCity)||(k.address_city=z.cardAddressCity);WAVE.strEmpty(z.cardAddressState)||(k.address_state=z.cardAddressState);WAVE.strEmpty(z.cardAddressZip)||
(k.address_zip=z.cardAddressZip);WAVE.strEmpty(z.cardAddressCountry)||(k.address_country=z.cardAddressCountry);Stripe.card.createToken(k,function(e,g){var k={requestContext:{facade:f,paymentData:z},OK:200<=e&&300>e,httpStatus:e,httpStatusDescr:p(e),providerType:B.TYPE,providerName:f.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(g.error)){k.tokenString=g.id;var v=g.card;k.card={providerID:v.id,addressCity:v.address_city,
addressCountry:v.address_country,addressLine1:v.address_line1,addressLine2:v.address_line2,addressState:v.address_state,addressZip:v.address_zip,brand:v.brand,CVCcheck:v.cvc_check,expirationMonth:v.exp_month,expirationYear:v.exp_year,fundingType:v.funding,last4:v.last4,holder:v.name}}else k.OK=!1,k.errorCode=y(g.error.code),k.errorType=m(g.error.type),k.errorMessage=g.error.message,k.errorParams={0:g.error.param},k.rawError=g.error;c(k)})}};return B}();
