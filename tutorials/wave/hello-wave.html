<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Hello WAVE </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Hello WAVE ">
    <meta name="generator" content="docfx 2.29.1.0">
    
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse nfx-navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a href="../../index.html">
                <img id="nfx-logo" src="../../images/NFX.Logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="hello-wave">Hello WAVE</h1>

<p>NFX.WAVE represents &quot;(W)eb(A)pp(V)iew(E)nhanced&quot; web server which provides DYNAMIC web site services.
This server is not meant to be exposed directly to the public Internet, rather it should be used as an application server behind the reverse proxy, such as NGINX. 
This server is designed to serve dynamic data-driven requests/APIs and not meant to be used for serving static content files (although it can). 
The implementation is based on a lightweight HttpListener that processes incoming Http requests via an injectable <code>WorkDispatcher</code> which governs the threading and <code>WorkContext</code> lifecycle.</p>
<p>Below is step-by-step guide to create the simplest NFX.Wave application that outputs &quot;Hello WAVE!&quot; message to your browser.</p>
<ol>
<li><p>Create new C# Console Application project <code>HelloWorld</code>.</p>
</li>
<li><p>Add reference to <strong>NFX</strong> (e.g. <a href="https://www.nuget.org/packages/NFX" target="_target">via NuGet</a>).</p>
</li>
<li><p>Add the following code to <code>Program.cs</code>:</p>
<pre><code class="lang-cs">using System;
using NFX.ApplicationModel;
using NFX.Wave;

namespace HelloWorld
{
  class Program
  {
    static void Main(string[] args)
    {
      try
      {
        using (var app = new ServiceBaseApplication(args, null))
        using (var server = new WaveServer())
        {
          server.Configure(null);
          server.Start();
          Console.WriteLine(&quot;server started...&quot;);
          Console.ReadLine();
        }
      }
      catch (Exception error)
      {
        Console.WriteLine(&quot;Critical error:&quot;);
        Console.WriteLine(error);
        Environment.ExitCode = -1;
      }
    }
  }
}
</code></pre><p>Here we create web server instance (<code>WaveServer</code>) in the scope of application container (<code>ServiceBaseApplication</code>). 
In this example the server is configured with application-level configuration - <code>server.Configure(null)</code> (to be added below), 
but one can configure web server with any specific configuration. </p>
</li>
<li><p>Create project folder <code>Pages</code> and add a file <code>Pages\Index.nht</code> with the following contents:</p>
<pre><code class="lang-html">#&lt;laconf&gt;
 compiler
 {
   base-class-name=&quot;NFX.Wave.Templatization.WaveTemplate&quot;
   namespace=&quot;HelloWorld.Pages&quot;
 }
#&lt;/laconf&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
 &lt;/head&gt;
 &lt;body&gt;
   &lt;div id=&quot;root&quot;&gt;Hello WAVE!&lt;/div&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>This is the simplest <a href="/specs/template.html">NTC template</a> of application start page. 
The code in <code>#&lt;laconf&gt;</code> brackets contains directives for <a href="/tools/ntc.html">NFX Template Compiler</a> which generates C# class from the template.</p>
</li>
<li><p>To obtain a file with C# class from the <code>Index</code> page template you can choose from two variants: explicitly run <a href="/tools/ntc.html">ntc tool</a> with proper parameters or add following line (fix path to ntc tool if it is necessary) to project pre-build events</p>
<pre><code>&quot;$(SolutionDir)packages\NFX.3.4.0.1\tools\ntc&quot; &quot;$(ProjectDir)Pages\*.nht&quot; -r -ext &quot;.auto.cs&quot; /src
</code></pre><p>Add the resulting file (e.g. Index.nht.auto.cs) with <code>Index</code> class to the project.</p>
</li>
<li><p>Create project folder <code>Controllers</code> and add a class <code>Controllers\Hello.cs</code>:</p>
<pre><code class="lang-cs">using NFX.Wave.MVC;
using HelloWorld.Pages;

namespace HelloWorld.Contollers
{
  public class Hello : Controller
  {
    [Action]
    public object Index()
    {
      return new Index();
    }
  }
}
</code></pre></li>
<li><p>Add configuration file <code>HelloWorld.laconf</code> with the following contents:</p>
<pre><code class="lang-js">application
{
  wave
  {
    server
    {
      prefix { name=&quot;http://localhost:8070/&quot; }
      dispatcher
      {
        handler
        {
          type=&quot;NFX.Wave.Handlers.MVCHandler, NFX.Wave&quot;
          type-location
          {
            assembly=&quot;HelloWorld.exe&quot;
            ns { name=&quot;HelloWorld.Controllers&quot; }
          }
          match { path=&quot;/{type=Hello}/{mvc-action=Index}&quot; }
        }
      }
    }
  }
}
</code></pre><p>Make sure that Build Action is set to None and Copy to Output Directory is set to Copy Always.</p>
</li>
</ol>
<p>In <code>prefix</code> section we define the address where we can send a request to the server. 
In <code>handler</code> section we define type of the handler, assembly where corresponding controllers are placed and pattern of path to controller and action.</p>
<ol>
<li>Run the <code>HelloWorld</code> application, open browser and type <code>http://localhost:8070/hello/index</code> or just <code>http://localhost:8070</code> in the address bar.</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2006-2018 
            <a href="http://agnicore.com/" target="_blank" title="Agnicore Inc.">
              <img id="agnicore-logo-small" src="../../images/agniCore.Logo.png" alt="Agnicore Inc">
            </a>
            <br>
            Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-98640025-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>  </body>
</html>
